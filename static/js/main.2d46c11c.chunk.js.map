{"version":3,"sources":["../../dist/index.es.js","Footer.js","App.js","index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","o","minLen","n","toString","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","arr2","_typeof","obj","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","p","_objectWithoutProperties$1","_objectWithoutPropertiesLoose$1","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_superPropBase","object","property","_get","receiver","Reflect","get","base","desc","getOwnPropertyDescriptor","set","_defineProperty","_set","isStrict","Error","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","_iterableToArrayLimit","_nonIterableRest","isString","str","String","DIRECTION","forceDirection","direction","objectIncludes","b","a","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","ActionDetails","cursorPos","oldValue","oldSelection","startChangePos","start","Math","min","substr","insertedCount","max","end","removedCount","substring","ChangeDetails","details","inserted","rawInserted","skip","tailShift","ContinuousTailDetails","stop","tail","masked","append","aggregate","_appendPlaceholder","pos","shiftChar","state","IMask","el","opts","InputMask","Masked","_value","_update","DEFAULTS","isInitialized","withValueRefresh","bind","reset","input","doCommit","fromPos","toPos","extractInput","appendTo","ch","flags","doPrepare","checkTail","consistentState","_appendCharRaw","consistentTail","appended","doValidate","beforeTailState","overwrite","shiftBefore","tailDetails","appendTail","_beforeTailState","ci","_appendChar","fn","_refreshing","rawInput","rawInputValue","ret","_isolated","prepare","validate","parent","commit","format","parse","deleteCount","removeDirection","tailPos","extractTail","nearestInputPos","remove","resolve","doParse","doFormat","raw","maskedClass","mask","MaskedRegExp","MaskedPattern","MaskedDate","Number","MaskedNumber","MaskedDynamic","Function","MaskedFunction","console","warn","createMask","MaskedClass","v","DEFAULT_INPUT_DEFINITIONS","PatternInputDefinition","blockOpts","_isFilled","isOptional","lazy","placeholderChar","Boolean","_this$masked","_this$masked2","_this$masked3","minPos","maxPos","boundPos","isComplete","_this$masked4","_this$parent","unmaskedValue","PatternFixedDefinition","_isRawInput","char","isResolved","isUnmasking","ChunksTailDetails","chunks","map","join","tailChunk","lastChunk","extendLast","extend","firstTailChunk","shift","blockIndex","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","index","_stops","_blocks","remainChars","chunkShiftPos","splice","c","cstate","_Masked","search","definitions","_rebuildMask","_this","defs","_maskedBlocks","pattern","unmaskingBlock","optionalBlock","blocks","bNames","filter","bName","sort","maskedBlock","_isInput","STOP_CHAR","ESCAPE_CHAR","def","forEach","blockIter","bi","_block","blockDetails","_this2","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","_blockStartPos","_","stopBefore","si","toBlockIndex","_this3","startBlockIter","startBlockIndex","endBlockIndex","args","bDetails","accVal","_block2","blockStartPos","offset","reduce","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","beginBlockData","beginBlockOffset","beginBlockIndex","beginBlock","beginBlockCursorPos","cursorAtRight","cursorAtLeft","searchBlockIndex","blockIndexAtLeft","blockAtLeft","blockInputPos","firstInputAtRight","blockAtRight","_blockInputPos","_bi","_block3","_blockInputPos2","firstFilledBlockIndexAtRight","_bi2","filledBlock","_blockInputPos3","firstEmptyInputBlockIndex","firstFilledInputBlockIndex","_bi3","_block4","_blockInputPos4","_bi4","_block5","_blockInputPos5","blockAlignedPos","isInput","_bi5","_block6","_blockInputPos6","firstInputBlockAlignedIndex","firstInputBlockAlignedPos","_bi6","_block7","_blockInputPos7","_bi7","_block8","_blockInputPos8","_bi8","_block9","_blockInputPos9","alignedPos","maskedBlocks","_this4","indices","gi","maskedState","every","block","InputDefinition","FixedDefinition","MaskedRange","_MaskedPattern","to","maxLength","fromStr","padStart","toStr","sameCharsCount","replace","repeat","minstr","maxstr","_ref2","match","placeholder","num","padEnd","autofix","val","prepStr","nextVal","_this$boundaries","boundaries","_this$boundaries2","_get2","firstNonZero","_matchFrom","_this$boundaries3","_this$boundaries4","_len","_key","concat","GET_DEFAULT_BLOCKS","Y","getFullYear","m","getMonth","d","getDate","bk","date","isDateExist","typedValue","_str$split2","split","day","month","year","MaskElement","selectionStart","selectionEnd","_unsafeSelect","e","handlers","_unsafeSelectionStart","_unsafeSelectionEnd","HTMLMaskElement","_MaskElement","_handlers","setSelectionRange","event","_toggleEventHandler","EVENTS_MAP","handler","removeEventListener","addEventListener","getRootNode","document","rootElement","activeElement","selectionChange","drop","click","focus","HTMLContenteditableMaskElement","_HTMLMaskElement","createRange","range","setStart","firstChild","setEnd","lastChild","root","selection","getSelection","removeAllRanges","addRange","anchorOffset","textContent","isContentEditable","tagName","_listeners","_unmaskedValue","_saveSelection","_onInput","_onChange","_onDrop","_onFocus","_onClick","alignCursor","alignCursorFriendly","_bindEvents","updateValue","bindEvents","unbindEvents","ev","listeners","l","_selection","newUnmaskedValue","newValue","isChanged","_fireChangeEvents","restOpts","updateMask","maskEquals","updateOpts","updateOptions","updateControl","_delayUpdateCursor","_abortUpdateCursor","_changingCursorPos","_cursorChanging","setTimeout","_fireEvent","_inputEvent","clearTimeout","hIndex","oldRawValue","removed","updateCursor","preventDefault","stopPropagation","_unbindEvents","isActive","select","MaskedEnum","enum","some","SEPARATOR","RE_DMS","RE_DD","fill","count","validateDD","serializeDMS","lat","lon","sep","res","item","dmsToDecimal","degrees","minutes","seconds","precision","factor","pow","dd","round","decimalToDMS","isLon","absolute","abs","floor","minutesFloat","minSecValidate","_ref","getDegreeMask","getMinuteMask","getSecondMask","getArcSecondMask","getDirectionMask","toUpperCase","useCoordMask","inputRef","controlledValue","degreeChar","minuteChar","secondChar","spacerChar","ddPrecision","dmsPrecision","onChange","maskRef","useRef","useMemo","_ref2$degreeChar","_ref2$minuteChar","_ref2$secondChar","_ref2$spacerChar","_ref2$placeholderChar","_ref2$dmsPrecision","DC","MC","SC","SPACER","DOT","AS","YD","YM","YS","NS","XD","XM","XS","EW","createMask$1","handleChange","useCallback","normalized","normalizeInput","validateDMS","dms","parseFloat","parseDMS","initMask","element","current","on","_maskRef$current","setValue","dmsValue","convertInput","useEffect","_inputRef$current","CoordinateInput","_ref$placeholder","innerRef","React","createElement","defaultValue","ref","type","propTypes","PropTypes","string","number","func","isRequired","repoName","repoUrl","tagImg","forksImg","starsImg","Footer","className","aria-label","style","height","href","src","alt","initialState","selectOptions","App","useState","setDDPrecision","setDMSPrecision","selected","setSelected","setState","dec","handleReset","log","handleBlur","handleChangeDDPrecision","parseInt","handleChangeDMSPrecision","handleSelectChange","output","JSON","stringify","dir","onBlur","disabled","onClick","ReactDOM","render","getElementById"],"mappings":"8OAGA,SAASA,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,IAK3B,OAAOL,IAGOS,MAAMC,KAAMR,WAkB9B,SAASS,EAAyBP,EAAQQ,GACxC,GAAc,MAAVR,EAAgB,MAAO,GAE3B,IAEIC,EAAKJ,EAFLD,EAlBN,SAAuCI,EAAQQ,GAC7C,GAAc,MAAVR,EAAgB,MAAO,GAC3B,IAEIC,EAAKJ,EAFLD,EAAS,GACTa,EAAaf,OAAOgB,KAAKV,GAG7B,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IACjCI,EAAMQ,EAAWZ,GACbW,EAASG,QAAQV,IAAQ,IAC7BL,EAAOK,GAAOD,EAAOC,IAGvB,OAAOL,EAMMgB,CAA8BZ,EAAQQ,GAInD,GAAId,OAAOmB,sBAAuB,CAChC,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAEpD,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IACvCI,EAAMa,EAAiBjB,GACnBW,EAASG,QAAQV,IAAQ,GACxBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KACxDL,EAAOK,GAAOD,EAAOC,IAIzB,OAAOL,EAGT,SAASoB,EAAmBC,GAC1B,OAGF,SAA4BA,GAC1B,GAAIC,MAAMC,QAAQF,GAAM,OAAOG,EAAkBH,GAJ1CI,CAAmBJ,IAO5B,SAA0BK,GACxB,GAAsB,qBAAXC,QAA0BA,OAAOC,YAAY9B,OAAO4B,GAAO,OAAOJ,MAAMO,KAAKH,GARtDI,CAAiBT,IAWrD,SAAqCU,EAAGC,GACtC,IAAKD,EAAG,OACR,GAAiB,kBAANA,EAAgB,OAAOP,EAAkBO,EAAGC,GACvD,IAAIC,EAAInC,OAAOQ,UAAU4B,SAAS1B,KAAKuB,GAAGI,MAAM,GAAI,GAC1C,WAANF,GAAkBF,EAAEK,cAAaH,EAAIF,EAAEK,YAAYC,MACvD,GAAU,QAANJ,GAAqB,QAANA,EAAa,OAAOX,MAAMO,KAAKE,GAClD,GAAU,cAANE,GAAqB,2CAA2CK,KAAKL,GAAI,OAAOT,EAAkBO,EAAGC,GAjB9CO,CAA4BlB,IA4BzF,WACE,MAAM,IAAImB,UAAU,wIA7B2EC,GAoBjG,SAASjB,EAAkBH,EAAKqB,IACnB,MAAPA,GAAeA,EAAMrB,EAAIlB,UAAQuC,EAAMrB,EAAIlB,QAE/C,IAAK,IAAIF,EAAI,EAAG0C,EAAO,IAAIrB,MAAMoB,GAAMzC,EAAIyC,EAAKzC,IAAK0C,EAAK1C,GAAKoB,EAAIpB,GAEnE,OAAO0C,EAOT,SAASC,EAAQC,GAaf,OATED,EADoB,oBAAXjB,QAAoD,kBAApBA,OAAOC,SACtC,SAAUiB,GAClB,cAAcA,GAGN,SAAUA,GAClB,OAAOA,GAAyB,oBAAXlB,QAAyBkB,EAAIT,cAAgBT,QAAUkB,IAAQlB,OAAOrB,UAAY,gBAAkBuC,IAI9GA,GAGjB,SAASC,EAAgBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAIR,UAAU,qCAIxB,SAASS,EAAkBjD,EAAQkD,GACjC,IAAK,IAAIjD,EAAI,EAAGA,EAAIiD,EAAM/C,OAAQF,IAAK,CACrC,IAAIkD,EAAaD,EAAMjD,GACvBkD,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDxD,OAAOyD,eAAevD,EAAQmD,EAAW9C,IAAK8C,IAIlD,SAASK,EAAaR,EAAaS,EAAYC,GAG7C,OAFID,GAAYR,EAAkBD,EAAY1C,UAAWmD,GACrDC,GAAaT,EAAkBD,EAAaU,GACzCV,EAkBT,SAASW,EAAUC,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIrB,UAAU,sDAGtBoB,EAAStD,UAAYR,OAAOgE,OAAOD,GAAcA,EAAWvD,UAAW,CACrE8B,YAAa,CACX2B,MAAOH,EACPN,UAAU,EACVD,cAAc,KAGdQ,GAAYG,EAAgBJ,EAAUC,GAG5C,SAASI,EAAgBlC,GAIvB,OAHAkC,EAAkBnE,OAAOoE,eAAiBpE,OAAOqE,eAAiB,SAAyBpC,GACzF,OAAOA,EAAEqC,WAAatE,OAAOqE,eAAepC,KAEvBA,GAGzB,SAASiC,EAAgBjC,EAAGsC,GAM1B,OALAL,EAAkBlE,OAAOoE,gBAAkB,SAAyBnC,EAAGsC,GAErE,OADAtC,EAAEqC,UAAYC,EACPtC,IAGcA,EAAGsC,GAkB5B,SAASC,EAA2BlE,EAAQQ,GAC1C,GAAc,MAAVR,EAAgB,MAAO,GAE3B,IAEIC,EAAKJ,EAFLD,EAlBN,SAAyCI,EAAQQ,GAC/C,GAAc,MAAVR,EAAgB,MAAO,GAC3B,IAEIC,EAAKJ,EAFLD,EAAS,GACTa,EAAaf,OAAOgB,KAAKV,GAG7B,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IACjCI,EAAMQ,EAAWZ,GACbW,EAASG,QAAQV,IAAQ,IAC7BL,EAAOK,GAAOD,EAAOC,IAGvB,OAAOL,EAMMuE,CAAgCnE,EAAQQ,GAIrD,GAAId,OAAOmB,sBAAuB,CAChC,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAEpD,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IACvCI,EAAMa,EAAiBjB,GACnBW,EAASG,QAAQV,IAAQ,GACxBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KACxDL,EAAOK,GAAOD,EAAOC,IAIzB,OAAOL,EAWT,SAASwE,EAA2BC,EAAMjE,GACxC,OAAIA,GAAyB,kBAATA,GAAqC,oBAATA,EATlD,SAAgCiE,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,EAQAE,CAAuBF,GAHrBjE,EAMX,SAASoE,EAAeC,EAAQC,GAC9B,MAAQhF,OAAOQ,UAAUC,eAAeC,KAAKqE,EAAQC,IAEpC,QADfD,EAASZ,EAAgBY,MAI3B,OAAOA,EAGT,SAASE,EAAK/E,EAAQ8E,EAAUE,GAkB9B,OAhBED,EADqB,qBAAZE,SAA2BA,QAAQC,IACrCD,QAAQC,IAER,SAAclF,EAAQ8E,EAAUE,GACrC,IAAIG,EAAOP,EAAe5E,EAAQ8E,GAElC,GAAKK,EAAL,CACA,IAAIC,EAAOtF,OAAOuF,yBAAyBF,EAAML,GAEjD,OAAIM,EAAKF,IACAE,EAAKF,IAAI1E,KAAKwE,GAGhBI,EAAKrB,SAIJ/D,EAAQ8E,EAAUE,GAAYhF,GAG5C,SAASsF,EAAItF,EAAQ8E,EAAUf,EAAOiB,GAqCpC,OAnCEM,EADqB,qBAAZL,SAA2BA,QAAQK,IACtCL,QAAQK,IAER,SAAatF,EAAQ8E,EAAUf,EAAOiB,GAC1C,IAEII,EAFAD,EAAOP,EAAe5E,EAAQ8E,GAIlC,GAAIK,EAAM,CAGR,IAFAC,EAAOtF,OAAOuF,yBAAyBF,EAAML,IAEpCQ,IAEP,OADAF,EAAKE,IAAI9E,KAAKwE,EAAUjB,IACjB,EACF,IAAKqB,EAAK9B,SACf,OAAO,EAMX,GAFA8B,EAAOtF,OAAOuF,yBAAyBL,EAAUF,GAEvC,CACR,IAAKM,EAAK9B,SACR,OAAO,EAGT8B,EAAKrB,MAAQA,EACbjE,OAAOyD,eAAeyB,EAAUF,EAAUM,QA5JlD,SAAyBvC,EAAKxC,EAAK0D,GAC7B1D,KAAOwC,EACT/C,OAAOyD,eAAeV,EAAKxC,EAAK,CAC9B0D,MAAOA,EACPX,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZT,EAAIxC,GAAO0D,EAqJPwB,CAAgBP,EAAUF,EAAUf,GAGtC,OAAO,IAIA/D,EAAQ8E,EAAUf,EAAOiB,GAGtC,SAASQ,EAAKxF,EAAQ8E,EAAUf,EAAOiB,EAAUS,GAG/C,IAFQH,EAAItF,EAAQ8E,EAAUf,EAAOiB,GAAYhF,IAEvCyF,EACR,MAAM,IAAIC,MAAM,0BAGlB,OAAO3B,EAGT,SAAS4B,EAAetE,EAAKpB,GAC3B,OAGF,SAAyBoB,GACvB,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,EAJxBuE,CAAgBvE,IAOzB,SAA+BA,EAAKpB,GAClC,KAAM0B,OAAOC,YAAY9B,OAAOuB,KAAgD,uBAAxCvB,OAAOQ,UAAU4B,SAAS1B,KAAKa,GACrE,OAGF,IAAIwE,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKC,EAET,IACE,IAAK,IAAiCC,EAA7BC,EAAK9E,EAAIM,OAAOC,cAAmBkE,GAAMI,EAAKC,EAAGC,QAAQC,QAChER,EAAKS,KAAKJ,EAAGnC,QAET9D,GAAK4F,EAAK1F,SAAWF,GAH8C6F,GAAK,IAK9E,MAAOS,GACPR,GAAK,EACLC,EAAKO,EARP,QAUE,IACOT,GAAsB,MAAhBK,EAAE,QAAoBA,EAAE,SADrC,QAGE,GAAIJ,EAAI,MAAMC,GAIlB,OAAOH,EAlCwBW,CAAsBnF,EAAKpB,IAqC5D,WACE,MAAM,IAAIuC,UAAU,wDAtC4CiE,GA0ClE,SAASC,EAASC,GAChB,MAAsB,kBAARA,GAAoBA,aAAeC,OAWnD,IAAIC,EACI,OADJA,EAEI,OAFJA,EAGU,aAHVA,EAIK,QAJLA,EAKW,cAIf,SAASC,EAAeC,GACtB,OAAQA,GACN,KAAKF,EACH,OAAOA,EAET,KAAKA,EACH,OAAOA,EAET,QACE,OAAOE,GAIb,SAASC,EAAeC,EAAGC,GACzB,GAAIA,IAAMD,EAAG,OAAO,EACpB,IAEIhH,EAFAkH,EAAO7F,MAAMC,QAAQ2F,GACrBE,EAAO9F,MAAMC,QAAQ0F,GAGzB,GAAIE,GAAQC,EAAM,CAChB,GAAIF,EAAE/G,QAAU8G,EAAE9G,OAAQ,OAAO,EAEjC,IAAKF,EAAI,EAAGA,EAAIiH,EAAE/G,OAAQF,IACxB,IAAK+G,EAAeE,EAAEjH,GAAIgH,EAAEhH,IAAK,OAAO,EAG1C,OAAO,EAGT,GAAIkH,GAAQC,EAAM,OAAO,EAEzB,GAAIF,GAAKD,GAAoB,WAAfrE,EAAQsE,IAAkC,WAAftE,EAAQqE,GAAiB,CAChE,IAAII,EAAQH,aAAaI,KACrBC,EAAQN,aAAaK,KACzB,GAAID,GAASE,EAAO,OAAOL,EAAEM,WAAaP,EAAEO,UAC5C,GAAIH,GAASE,EAAO,OAAO,EAC3B,IAAIE,EAAUP,aAAaQ,OACvBC,EAAUV,aAAaS,OAC3B,GAAID,GAAWE,EAAS,OAAOT,EAAEhF,YAAc+E,EAAE/E,WACjD,GAAIuF,GAAWE,EAAS,OAAO,EAC/B,IAAI7G,EAAOhB,OAAOgB,KAAKoG,GAEvB,IAAKjH,EAAI,EAAGA,EAAIa,EAAKX,OAAQF,IAC3B,IAAKH,OAAOQ,UAAUC,eAAeC,KAAKyG,EAAGnG,EAAKb,IAAK,OAAO,EAGhE,IAAKA,EAAI,EAAGA,EAAIa,EAAKX,OAAQF,IAC3B,IAAK+G,EAAeC,EAAEnG,EAAKb,IAAKiH,EAAEpG,EAAKb,KAAM,OAAO,EAGtD,OAAO,EACF,SAAIiH,IAAKD,GAAkB,oBAANC,GAAiC,oBAAND,IAC9CC,EAAEhF,aAAe+E,EAAE/E,WAQ9B,IAAI0F,EAEJ,WAQE,SAASA,EAAc7D,EAAO8D,EAAWC,EAAUC,GAQjD,IAPAjF,EAAgBpC,KAAMkH,GAEtBlH,KAAKqD,MAAQA,EACbrD,KAAKmH,UAAYA,EACjBnH,KAAKoH,SAAWA,EAChBpH,KAAKqH,aAAeA,EAEbrH,KAAKqD,MAAM5B,MAAM,EAAGzB,KAAKsH,kBAAoBtH,KAAKoH,SAAS3F,MAAM,EAAGzB,KAAKsH,mBAC5EtH,KAAKqH,aAAaE,MA0FxB,OAjFAzE,EAAaoE,EAAe,CAAC,CAC3BvH,IAAK,iBACL6E,IAAK,WACH,OAAOgD,KAAKC,IAAIzH,KAAKmH,UAAWnH,KAAKqH,aAAaE,SAOnD,CACD5H,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAKmH,UAAYnH,KAAKsH,iBAO9B,CACD3H,IAAK,WACL6E,IAAK,WACH,OAAOxE,KAAKqD,MAAMqE,OAAO1H,KAAKsH,eAAgBtH,KAAK2H,iBAOpD,CACDhI,IAAK,eACL6E,IAAK,WAEH,OAAOgD,KAAKI,IAAI5H,KAAKqH,aAAaQ,IAAM7H,KAAKsH,gBAC7CtH,KAAKoH,SAAS3H,OAASO,KAAKqD,MAAM5D,OAAQ,KAO3C,CACDE,IAAK,UACL6E,IAAK,WACH,OAAOxE,KAAKoH,SAASM,OAAO1H,KAAKsH,eAAgBtH,KAAK8H,gBAOvD,CACDnI,IAAK,OACL6E,IAAK,WACH,OAAOxE,KAAKqD,MAAM0E,UAAU,EAAG/H,KAAKsH,kBAOrC,CACD3H,IAAK,OACL6E,IAAK,WACH,OAAOxE,KAAKqD,MAAM0E,UAAU/H,KAAKsH,eAAiBtH,KAAK2H,iBAOxD,CACDhI,IAAK,kBACL6E,IAAK,WACH,OAAKxE,KAAK8H,cAAgB9H,KAAK2H,cAAsBxB,EAE9CnG,KAAKqH,aAAaQ,MAAQ7H,KAAKmH,WAAanH,KAAKqH,aAAaE,QAAUvH,KAAKmH,UAAYhB,EAAkBA,MAI/Ge,EA3GT,GAsHIc,EAEJ,WAQE,SAASA,EAAcC,GACrB7F,EAAgBpC,KAAMgI,GAEtB5I,OAAOC,OAAOW,KAAM,CAClBkI,SAAU,GACVC,YAAa,GACbC,MAAM,EACNC,UAAW,GACVJ,GA0BL,OAlBAnF,EAAakF,EAAe,CAAC,CAC3BrI,IAAK,YACL0D,MAAO,SAAmB4E,GAKxB,OAJAjI,KAAKmI,aAAeF,EAAQE,YAC5BnI,KAAKoI,KAAOpI,KAAKoI,MAAQH,EAAQG,KACjCpI,KAAKkI,UAAYD,EAAQC,SACzBlI,KAAKqI,WAAaJ,EAAQI,UACnBrI,OAIR,CACDL,IAAK,SACL6E,IAAK,WACH,OAAOxE,KAAKqI,UAAYrI,KAAKkI,SAASzI,WAInCuI,EA1CT,GA8CIM,EAEJ,WAME,SAASA,IACP,IAAIjF,EAAQ7D,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAC5E2B,EAAO3B,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC3E+I,EAAO/I,UAAUC,OAAS,EAAID,UAAU,QAAK+F,EAEjDnD,EAAgBpC,KAAMsI,GAEtBtI,KAAKqD,MAAQA,EACbrD,KAAKmB,KAAOA,EACZnB,KAAKuI,KAAOA,EA0Cd,OAvCAzF,EAAawF,EAAuB,CAAC,CACnC3I,IAAK,WACL0D,MAAO,WACL,OAAOrD,KAAKqD,QAEb,CACD1D,IAAK,SACL0D,MAAO,SAAgBmF,GACrBxI,KAAKqD,OAAS6C,OAAOsC,KAEtB,CACD7I,IAAK,WACL0D,MAAO,SAAkBoF,GACvB,OAAOA,EAAOC,OAAO1I,KAAKwB,WAAY,CACpCgH,MAAM,IACLG,UAAUF,EAAOG,wBAErB,CACDjJ,IAAK,cACL0D,MAAO,SAAqBwF,GAC1B,GAAI7I,KAAKmB,MAAQ0H,IAAQ7I,KAAKqD,MAAM5D,OAAQ,MAAO,GACnD,IAAIqJ,EAAY9I,KAAKqD,MAAM,GAE3B,OADArD,KAAKqD,MAAQrD,KAAKqD,MAAM5B,MAAM,GACvBqH,IAER,CACDnJ,IAAK,QACL6E,IAAK,WACH,MAAO,CACLnB,MAAOrD,KAAKqD,MACZlC,KAAMnB,KAAKmB,KACXoH,KAAMvI,KAAKuI,OAGf3D,IAAK,SAAamE,GAChB3J,OAAOC,OAAOW,KAAM+I,OAIjBT,EAzDT,GAmEA,SAASU,EAAMC,GACb,IAAIC,EAAO1J,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAE/E,OAAO,IAAIwJ,EAAMG,UAAUF,EAAIC,GAMjC,IAAIE,EAEJ,WAqBE,SAASA,EAAOF,GACd9G,EAAgBpC,KAAMoJ,GAEtBpJ,KAAKqJ,OAAS,GAEdrJ,KAAKsJ,QAAQlK,OAAOC,OAAO,GAAI+J,EAAOG,SAAU,GAAIL,IAEpDlJ,KAAKwJ,eAAgB,EA2UvB,OAtUA1G,EAAasG,EAAQ,CAAC,CACpBzJ,IAAK,gBACL0D,MAAO,SAAuB6F,GACvB9J,OAAOgB,KAAK8I,GAAMzJ,QACvBO,KAAKyJ,iBAAiBzJ,KAAKsJ,QAAQI,KAAK1J,KAAMkJ,MAO/C,CACDvJ,IAAK,UACL0D,MAAO,SAAiB6F,GACtB9J,OAAOC,OAAOW,KAAMkJ,KAIrB,CACDvJ,IAAK,QAGL0D,MAAO,WACLrD,KAAKqJ,OAAS,KAIf,CACD1J,IAAK,UAGL0D,MAAO,SAAiBA,GAMtB,OALArD,KAAK2J,QACL3J,KAAK0I,OAAOrF,EAAO,CACjBuG,OAAO,GACN,IACH5J,KAAK6J,WACE7J,KAAKqD,QAIb,CACD1D,IAAK,kBAGL0D,MAAO,SAAyB8D,EAAWd,GACzC,OAAOc,IAIR,CACDxH,IAAK,eACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OAC3F,OAAOO,KAAKqD,MAAM5B,MAAMqI,EAASC,KAIlC,CACDpK,IAAK,cACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OAC3F,OAAO,IAAI6I,EAAsBtI,KAAKgK,aAAaF,EAASC,GAAQD,KAKrE,CACDnK,IAAK,aACL0D,MAAO,SAAoBmF,GAEzB,OADIxC,EAASwC,KAAOA,EAAO,IAAIF,EAAsBpC,OAAOsC,KACrDA,EAAKyB,SAASjK,QAItB,CACDL,IAAK,iBACL0D,MAAO,SAAwB6G,GAC7B,IAAIC,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAEhF,OADA0K,EAAKlK,KAAKoK,UAAUF,EAAIC,KAExBnK,KAAKqJ,QAAUa,EACR,IAAIlC,EAAc,CACvBE,SAAUgC,EACV/B,YAAa+B,KAJC,IAAIlC,IASrB,CACDrI,IAAK,cACL0D,MAAO,SAAqB6G,GAC1B,IAAIC,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAC5E6K,EAAY7K,UAAUC,OAAS,EAAID,UAAU,QAAK+F,EAClD+E,EAAkBtK,KAAK+I,MAEvBd,EAAUjI,KAAKuK,eAAeL,EAAIC,GAEtC,GAAIlC,EAAQC,SAAU,CACpB,IAAIsC,EACAC,GAAsC,IAA3BzK,KAAK0K,WAAWP,GAE/B,GAAIM,GAAyB,MAAbJ,EAAmB,CAEjC,IAAIM,EAAkB3K,KAAK+I,MAEvB/I,KAAK4K,YACPJ,EAAiBH,EAAUtB,MAC3BsB,EAAUQ,YAAY7K,KAAKqD,MAAM5D,SAGnC,IAAIqL,EAAc9K,KAAK+K,WAAWV,IAClCI,EAAWK,EAAY3C,cAAgBkC,EAAU7I,aAEjCsJ,EAAY5C,WAAUlI,KAAK+I,MAAQ4B,GAIhDF,IACHxC,EAAU,IAAID,EACdhI,KAAK+I,MAAQuB,EACTD,GAAaG,IAAgBH,EAAUtB,MAAQyB,IAIvD,OAAOvC,IAIR,CACDtI,IAAK,qBACL0D,MAAO,WACL,OAAO,IAAI2E,IAKZ,CACDrI,IAAK,SACL0D,MAAO,SAAgB4C,EAAKkE,EAAO3B,GACjC,IAAKxC,EAASC,GAAM,MAAM,IAAIjB,MAAM,0BACpC,IAAIiD,EAAU,IAAID,EACdqC,EAAYrE,EAASwC,GAAQ,IAAIF,EAAsBpC,OAAOsC,IAASA,EACvE2B,EAAM3B,OAAM2B,EAAMa,iBAAmBhL,KAAK+I,OAE9C,IAAK,IAAIkC,EAAK,EAAGA,EAAKhF,EAAIxG,SAAUwL,EAClChD,EAAQU,UAAU3I,KAAKkL,YAAYjF,EAAIgF,GAAKd,EAAOE,IAUrD,OANiB,MAAbA,IACFpC,EAAQI,WAAarI,KAAK+K,WAAWV,GAAWhC,WAK3CJ,IAIR,CACDtI,IAAK,SACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OAE3F,OADAO,KAAKqJ,OAASrJ,KAAKqD,MAAM5B,MAAM,EAAGqI,GAAW9J,KAAKqD,MAAM5B,MAAMsI,GACvD,IAAI/B,IAIZ,CACDrI,IAAK,mBACL0D,MAAO,SAA0B8H,GAC/B,GAAInL,KAAKoL,cAAgBpL,KAAKwJ,cAAe,OAAO2B,IACpDnL,KAAKoL,aAAc,EACnB,IAAIC,EAAWrL,KAAKsL,cAChBjI,EAAQrD,KAAKqD,MACbkI,EAAMJ,IAQV,OAPAnL,KAAKsL,cAAgBD,EAEjBrL,KAAKqD,QAAUA,GAAuC,IAA9BA,EAAMhD,QAAQL,KAAKqD,QAC7CrD,KAAK0I,OAAOrF,EAAM5B,MAAMzB,KAAKqD,MAAM5D,QAAS,GAAI,WAG3CO,KAAKoL,YACLG,IAIR,CACD5L,IAAK,cACL0D,MAAO,SAAqB8H,GAC1B,GAAInL,KAAKwL,YAAcxL,KAAKwJ,cAAe,OAAO2B,EAAGnL,MACrDA,KAAKwL,WAAY,EACjB,IAAIzC,EAAQ/I,KAAK+I,MACbwC,EAAMJ,EAAGnL,MAGb,OAFAA,KAAK+I,MAAQA,SACN/I,KAAKwL,UACLD,IAOR,CACD5L,IAAK,YACL0D,MAAO,SAAmB4C,GACxB,IAAIkE,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAChF,OAAOQ,KAAKyL,QAAUzL,KAAKyL,QAAQxF,EAAKjG,KAAMmK,GAASlE,IAOxD,CACDtG,IAAK,aACL0D,MAAO,SAAoB8G,GACzB,QAASnK,KAAK0L,UAAY1L,KAAK0L,SAAS1L,KAAKqD,MAAOrD,KAAMmK,OAAanK,KAAK2L,QAAU3L,KAAK2L,OAAOjB,WAAWP,MAO9G,CACDxK,IAAK,WACL0D,MAAO,WACDrD,KAAK4L,QAAQ5L,KAAK4L,OAAO5L,KAAKqD,MAAOrD,QAI1C,CACDL,IAAK,WACL0D,MAAO,SAAkBA,GACvB,OAAOrD,KAAK6L,OAAS7L,KAAK6L,OAAOxI,EAAOrD,MAAQqD,IAIjD,CACD1D,IAAK,UACL0D,MAAO,SAAiB4C,GACtB,OAAOjG,KAAK8L,MAAQ9L,KAAK8L,MAAM7F,EAAKjG,MAAQiG,IAI7C,CACDtG,IAAK,SACL0D,MAAO,SAAgBkE,EAAOwE,EAAa7D,EAAU8D,GACnD,IAAIC,EAAU1E,EAAQwE,EAClBvD,EAAOxI,KAAKkM,YAAYD,GACxB3E,EAAiBtH,KAAKmM,gBAAgB5E,EAAOyE,GAOjD,OANoB,IAAIhE,EAAc,CACpCK,UAAWf,EAAiBC,IAE3BoB,UAAU3I,KAAKoM,OAAO9E,IAAiBqB,UAAU3I,KAAK0I,OAAOR,EAAU,CACxE0B,OAAO,GACNpB,MAGJ,CACD7I,IAAK,QACL6E,IAAK,WACH,MAAO,CACL6E,OAAQrJ,KAAKqD,QAGjBuB,IAAK,SAAamE,GAChB/I,KAAKqJ,OAASN,EAAMM,SAErB,CACD1J,IAAK,QACL6E,IAAK,WACH,OAAOxE,KAAKqJ,QAEdzE,IAAK,SAAavB,GAChBrD,KAAKqM,QAAQhJ,KAEd,CACD1D,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAKqD,OAEduB,IAAK,SAAavB,GAChBrD,KAAK2J,QACL3J,KAAK0I,OAAOrF,EAAO,GAAI,IACvBrD,KAAK6J,aAIN,CACDlK,IAAK,aACL6E,IAAK,WACH,OAAOxE,KAAKsM,QAAQtM,KAAKqD,QAE3BuB,IAAK,SAAavB,GAChBrD,KAAKqD,MAAQrD,KAAKuM,SAASlJ,KAI5B,CACD1D,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAKgK,aAAa,EAAGhK,KAAKqD,MAAM5D,OAAQ,CAC7C+M,KAAK,KAGT5H,IAAK,SAAavB,GAChBrD,KAAK2J,QACL3J,KAAK0I,OAAOrF,EAAO,CACjBmJ,KAAK,GACJ,IACHxM,KAAK6J,aAIN,CACDlK,IAAK,aACL6E,IAAK,WACH,OAAO,MAIJ4E,EAvWT,GAqXA,SAASqD,EAAYC,GACnB,GAAY,MAARA,EACF,MAAM,IAAI1H,MAAM,mCAIlB,OAAI0H,aAAgB1F,OAAegC,EAAM2D,aAErC3G,EAAS0G,GAAc1D,EAAM4D,cAE7BF,aAAgB9F,MAAQ8F,IAAS9F,KAAaoC,EAAM6D,WAEpDH,aAAgBI,QAA0B,kBAATJ,GAAqBA,IAASI,OAAe9D,EAAM+D,aAEpFnM,MAAMC,QAAQ6L,IAASA,IAAS9L,MAAcoI,EAAMgE,cAEpDhE,EAAMI,QAAUsD,EAAK9M,qBAAqBoJ,EAAMI,OAAesD,EAE/DA,aAAgBO,SAAiBjE,EAAMkE,eAEvCR,aAAgB1D,EAAMI,OAAesD,EAAKhL,aAC9CyL,QAAQC,KAAK,0BAA2BV,GAGjC1D,EAAMI,QAIf,SAASiE,EAAWnE,GAElB,GAAIF,EAAMI,QAAUF,aAAgBF,EAAMI,OAAQ,OAAOF,EAEzD,IAAIwD,GADJxD,EAAO9J,OAAOC,OAAO,GAAI6J,IACTwD,KAEhB,GAAI1D,EAAMI,QAAUsD,aAAgB1D,EAAMI,OAAQ,OAAOsD,EACzD,IAAIY,EAAcb,EAAYC,GAC9B,IAAKY,EAAa,MAAM,IAAItI,MAAM,qHAClC,OAAO,IAAIsI,EAAYpE,GAjDzBE,EAAOG,SAAW,CAChBsC,OAAQ,SAAgB0B,GACtB,OAAOA,GAETzB,MAAO,SAAeyB,GACpB,OAAOA,IAGXvE,EAAMI,OAASA,EA2CfJ,EAAMqE,WAAaA,EAEnB,IAAIG,EAA4B,CAC9B,EAAK,KACL,EAAK,snIAEL,IAAK,KAIHC,EAEJ,WAYE,SAASA,EAAuBvE,GAC9B9G,EAAgBpC,KAAMyN,GAEtB,IAAIf,EAAOxD,EAAKwD,KACZgB,EAAY9J,EAA2BsF,EAAM,CAAC,SAElDlJ,KAAKyI,OAAS4E,EAAW,CACvBX,KAAMA,IAERtN,OAAOC,OAAOW,KAAM0N,GAiJtB,OA9IA5K,EAAa2K,EAAwB,CAAC,CACpC9N,IAAK,QACL0D,MAAO,WACLrD,KAAK2N,WAAY,EACjB3N,KAAKyI,OAAOkB,UAEb,CACDhK,IAAK,SACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OAE3F,OAAgB,IAAZqK,GAAiBC,GAAS,GAC5B/J,KAAK2N,WAAY,EACV3N,KAAKyI,OAAO2D,OAAOtC,EAASC,IAG9B,IAAI/B,IAEZ,CACDrI,IAAK,cACL0D,MAAO,SAAqB4C,GAC1B,IAAIkE,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAChF,GAAIQ,KAAK2N,UAAW,OAAO,IAAI3F,EAC/B,IAAIe,EAAQ/I,KAAKyI,OAAOM,MAEpBd,EAAUjI,KAAKyI,OAAOyC,YAAYjF,EAAKkE,GAa3C,OAXIlC,EAAQC,WAAuC,IAA3BlI,KAAK0K,WAAWP,KACtClC,EAAQC,SAAWD,EAAQE,YAAc,GACzCnI,KAAKyI,OAAOM,MAAQA,GAGjBd,EAAQC,UAAalI,KAAK4N,YAAe5N,KAAK6N,MAAS1D,EAAMP,QAChE3B,EAAQC,SAAWlI,KAAK8N,iBAG1B7F,EAAQG,MAAQH,EAAQC,WAAalI,KAAK4N,WAC1C5N,KAAK2N,UAAYI,QAAQ9F,EAAQC,UAC1BD,IAER,CACDtI,IAAK,SACL0D,MAAO,WACL,IAAI2K,EAEJ,OAAQA,EAAehO,KAAKyI,QAAQC,OAAO3I,MAAMiO,EAAcxO,aAEhE,CACDG,IAAK,qBACL0D,MAAO,WACL,IAAI4E,EAAU,IAAID,EAClB,OAAIhI,KAAK2N,WAAa3N,KAAK4N,aAC3B5N,KAAK2N,WAAY,EACjB1F,EAAQC,SAAWlI,KAAK8N,iBAFsB7F,IAK/C,CACDtI,IAAK,cACL0D,MAAO,WACL,IAAI4K,EAEJ,OAAQA,EAAgBjO,KAAKyI,QAAQyD,YAAYnM,MAAMkO,EAAezO,aAEvE,CACDG,IAAK,aACL0D,MAAO,WACL,IAAI6K,EAEJ,OAAQA,EAAgBlO,KAAKyI,QAAQsC,WAAWhL,MAAMmO,EAAe1O,aAEtE,CACDG,IAAK,eACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OACvF0K,EAAQ3K,UAAUC,OAAS,EAAID,UAAU,QAAK+F,EAClD,OAAOvF,KAAKyI,OAAOuB,aAAaF,EAASC,EAAOI,KAEjD,CACDxK,IAAK,kBACL0D,MAAO,SAAyB8D,GAC9B,IAAId,EAAY7G,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK2G,EAChFgI,EAAS,EACTC,EAASpO,KAAKqD,MAAM5D,OACpB4O,EAAW7G,KAAKC,IAAID,KAAKI,IAAIT,EAAWgH,GAASC,GAErD,OAAQ/H,GACN,KAAKF,EACL,KAAKA,EACH,OAAOnG,KAAKsO,WAAaD,EAAWF,EAEtC,KAAKhI,EACL,KAAKA,EACH,OAAOnG,KAAKsO,WAAaD,EAAWD,EAEtC,KAAKjI,EACL,QACE,OAAOkI,KAGZ,CACD1O,IAAK,aACL0D,MAAO,WACL,IAAIkL,EAAeC,EAEnB,OAAQD,EAAgBvO,KAAKyI,QAAQiC,WAAW3K,MAAMwO,EAAe/O,cAAgBQ,KAAK2L,SAAW6C,EAAexO,KAAK2L,QAAQjB,WAAW3K,MAAMyO,EAAchP,cAEjK,CACDG,IAAK,WACL0D,MAAO,WACLrD,KAAKyI,OAAOoB,aAEb,CACDlK,IAAK,QACL6E,IAAK,WACH,OAAOxE,KAAKyI,OAAOpF,QAAUrD,KAAK2N,YAAc3N,KAAK4N,WAAa5N,KAAK8N,gBAAkB,MAE1F,CACDnO,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAKyI,OAAOgG,gBAEpB,CACD9O,IAAK,aACL6E,IAAK,WACH,OAAOuJ,QAAQ/N,KAAKyI,OAAOpF,QAAUrD,KAAK4N,aAE3C,CACDjO,IAAK,QACL6E,IAAK,WACH,MAAO,CACLiE,OAAQzI,KAAKyI,OAAOM,MACpB4E,UAAW3N,KAAK2N,YAGpB/I,IAAK,SAAamE,GAChB/I,KAAKyI,OAAOM,MAAQA,EAAMN,OAC1BzI,KAAK2N,UAAY5E,EAAM4E,cAIpBF,EAtKT,GAyKIiB,EAEJ,WAQE,SAASA,EAAuBxF,GAC9B9G,EAAgBpC,KAAM0O,GAEtBtP,OAAOC,OAAOW,KAAMkJ,GACpBlJ,KAAKqJ,OAAS,GAyHhB,OAtHAvG,EAAa4L,EAAwB,CAAC,CACpC/O,IAAK,QACL0D,MAAO,WACLrD,KAAK2O,aAAc,EACnB3O,KAAKqJ,OAAS,KAEf,CACD1J,IAAK,SACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqJ,OAAO5J,OAG5F,OAFAO,KAAKqJ,OAASrJ,KAAKqJ,OAAO5H,MAAM,EAAGqI,GAAW9J,KAAKqJ,OAAO5H,MAAMsI,GAC3D/J,KAAKqJ,SAAQrJ,KAAK2O,aAAc,GAC9B,IAAI3G,IAEZ,CACDrI,IAAK,kBACL0D,MAAO,SAAyB8D,GAC9B,IAAId,EAAY7G,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK2G,EAChFgI,EAAS,EACTC,EAASpO,KAAKqJ,OAAO5J,OAEzB,OAAQ4G,GACN,KAAKF,EACL,KAAKA,EACH,OAAOgI,EAET,KAAKhI,EACL,KAAKA,EACL,KAAKA,EACL,QACE,OAAOiI,KAGZ,CACDzO,IAAK,eACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqJ,OAAO5J,OACxF0K,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAChF,OAAO2K,EAAMqC,KAAOxM,KAAK2O,aAAe3O,KAAKqJ,OAAO5H,MAAMqI,EAASC,IAAU,KAE9E,CACDpK,IAAK,cACL0D,MAAO,SAAqB4C,GAC1B,IAAIkE,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAC5EyI,EAAU,IAAID,EAClB,GAAIhI,KAAKqJ,OAAQ,OAAOpB,EACxB,IAAIwC,EAAWzK,KAAK4O,OAAS3I,EAAI,GAC7B4I,EAAapE,IAAazK,KAAK8O,aAAe3E,EAAMP,OAASO,EAAMqC,OAASrC,EAAM3B,KAItF,OAHIqG,IAAY5G,EAAQE,YAAcnI,KAAK4O,MAC3C5O,KAAKqJ,OAASpB,EAAQC,SAAWlI,KAAK4O,KACtC5O,KAAK2O,YAAcE,IAAe1E,EAAMqC,KAAOrC,EAAMP,OAC9C3B,IAER,CACDtI,IAAK,qBACL0D,MAAO,WACL,IAAI4E,EAAU,IAAID,EAClB,OAAIhI,KAAKqJ,SACTrJ,KAAKqJ,OAASpB,EAAQC,SAAWlI,KAAK4O,MADd3G,IAIzB,CACDtI,IAAK,cACL0D,MAAO,WACO7D,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,IAAkCQ,KAAKqD,MAAM5D,OAC3F,OAAO,IAAI6I,EAAsB,MAGlC,CACD3I,IAAK,aACL0D,MAAO,SAAoBmF,GAEzB,OADIxC,EAASwC,KAAOA,EAAO,IAAIF,EAAsBpC,OAAOsC,KACrDA,EAAKyB,SAASjK,QAEtB,CACDL,IAAK,SACL0D,MAAO,SAAgB4C,EAAKkE,EAAO3B,GACjC,IAAIP,EAAUjI,KAAKkL,YAAYjF,EAAKkE,GAMpC,OAJY,MAAR3B,IACFP,EAAQI,WAAarI,KAAK+K,WAAWvC,GAAMH,WAGtCJ,IAER,CACDtI,IAAK,WACL0D,MAAO,cACN,CACD1D,IAAK,QACL6E,IAAK,WACH,OAAOxE,KAAKqJ,SAEb,CACD1J,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAK8O,YAAc9O,KAAKqD,MAAQ,KAExC,CACD1D,IAAK,aACL6E,IAAK,WACH,OAAO,IAER,CACD7E,IAAK,QACL6E,IAAK,WACH,MAAO,CACL6E,OAAQrJ,KAAKqJ,OACbsF,YAAa3O,KAAK2O,cAGtB/J,IAAK,SAAamE,GAChB3J,OAAOC,OAAOW,KAAM+I,OAIjB2F,EArIT,GAwIIK,EAEJ,WAEE,SAASA,IACP,IAAIC,EAASxP,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAC7E2B,EAAO3B,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAE/E4C,EAAgBpC,KAAM+O,GAEtB/O,KAAKgP,OAASA,EACdhP,KAAKmB,KAAOA,EAoJd,OAjJA2B,EAAaiM,EAAmB,CAAC,CAC/BpP,IAAK,WACL0D,MAAO,WACL,OAAOrD,KAAKgP,OAAOC,IAAI/I,QAAQgJ,KAAK,MAGrC,CACDvP,IAAK,SACL0D,MAAO,SAAgB8L,GACrB,GAAKjJ,OAAOiJ,GAAZ,CACInJ,EAASmJ,KAAYA,EAAY,IAAI7G,EAAsBpC,OAAOiJ,KACtE,IAAIC,EAAYpP,KAAKgP,OAAOhP,KAAKgP,OAAOvP,OAAS,GAC7C4P,EAAaD,IACjBA,EAAU7G,OAAS4G,EAAU5G,MAA0B,MAAlB4G,EAAU5G,OAC/C4G,EAAUhO,OAASiO,EAAUjO,KAAOiO,EAAU5N,WAAW/B,OAEzD,GAAI0P,aAAqB7G,EAEnB+G,EAEFD,EAAUE,OAAOH,EAAU3N,YAG3BxB,KAAKgP,OAAOpJ,KAAKuJ,QAEd,GAAIA,aAAqBJ,EAAmB,CACjD,GAAsB,MAAlBI,EAAU5G,KAIZ,IAFA,IAAIgH,EAEGJ,EAAUH,OAAOvP,QAAsC,MAA5B0P,EAAUH,OAAO,GAAGzG,OACpDgH,EAAiBJ,EAAUH,OAAOQ,SACnBrO,MAAQgO,EAAUhO,KACjCnB,KAAKsP,OAAOC,GAKZJ,EAAU3N,aAEZ2N,EAAU5G,KAAO4G,EAAUM,WAC3BzP,KAAKgP,OAAOpJ,KAAKuJ,QAItB,CACDxP,IAAK,WACL0D,MAAO,SAAkBoF,GAEvB,KAAMA,aAAkBO,EAAM4D,eAE5B,OADW,IAAItE,EAAsBtI,KAAKwB,YAC9ByI,SAASxB,GAKvB,IAFA,IAAIR,EAAU,IAAID,EAETiD,EAAK,EAAGA,EAAKjL,KAAKgP,OAAOvP,SAAWwI,EAAQG,OAAQ6C,EAAI,CAC/D,IAAIyE,EAAQ1P,KAAKgP,OAAO/D,GAEpB0E,EAAgBlH,EAAOmH,eAAenH,EAAOpF,MAAM5D,QAEnD8I,EAAOmH,EAAMnH,KACbsH,OAAa,EAYjB,GAVY,MAARtH,KACHoH,GAAiBA,EAAcG,OAASvH,MACnCmH,aAAiBX,GACrBtG,EAAOsH,OAAO1P,QAAQkI,IAAS,IAC7BN,EAAQU,UAAUF,EAAOG,mBAAmBL,IAG9CsH,EAAaH,aAAiBX,GAAqBtG,EAAOuH,QAAQzH,IAGhEsH,EAAY,CACd,IAAI/E,EAAc+E,EAAW9E,WAAW2E,GACxC5E,EAAY1C,MAAO,EAEnBH,EAAQU,UAAUmC,GAClBrC,EAAOY,QAAUyB,EAAY5C,SAE7B,IAAI+H,EAAcP,EAAMlO,WAAWC,MAAMqJ,EAAY3C,YAAY1I,QAC7DwQ,GAAahI,EAAQU,UAAUF,EAAOC,OAAOuH,EAAa,CAC5DzH,MAAM,UAGRP,EAAQU,UAAUF,EAAOC,OAAOgH,EAAMlO,WAAY,CAChDgH,MAAM,KAIZ,OAAOP,IAER,CACDtI,IAAK,cACL0D,MAAO,SAAqBwF,GAC1B,GAAI7I,KAAKmB,MAAQ0H,IAAQ7I,KAAKgP,OAAOvP,OAAQ,MAAO,GAIpD,IAHA,IAAIyQ,EAAgBrH,EAAM7I,KAAKmB,KAC3B8J,EAAK,EAEFA,EAAKjL,KAAKgP,OAAOvP,QAAQ,CAC9B,IAAIiQ,EAAQ1P,KAAKgP,OAAO/D,GACpBnC,EAAY4G,EAAM7E,YAAYqF,GAElC,GAAIR,EAAMlO,WAAY,CAGpB,IAAKsH,EAAW,QACdmC,OAGFjL,KAAKgP,OAAOmB,OAAOlF,EAAI,GAGzB,GAAInC,EAAW,OAAOA,EAGxB,MAAO,KAER,CACDnJ,IAAK,QACL6E,IAAK,WACH,MAAO,CACLwK,OAAQhP,KAAKgP,OAAOC,KAAI,SAAUmB,GAChC,OAAOA,EAAErH,SAEX5H,KAAMnB,KAAKmB,KACXoH,KAAMvI,KAAKuI,KACXkH,WAAYzP,KAAKyP,aAGrB7K,IAAK,SAAamE,GAChB,IAAIiG,EAASjG,EAAMiG,OACfxM,EAAQoB,EAA2BmF,EAAO,CAAC,WAE/C3J,OAAOC,OAAOW,KAAMwC,GACpBxC,KAAKgP,OAASA,EAAOC,KAAI,SAAUoB,GACjC,IAAIX,EAAQ,WAAYW,EAAS,IAAItB,EAAsB,IAAIzG,EAG/D,OADAoH,EAAM3G,MAAQsH,EACPX,SAKNX,EA7JT,GAkKIpC,EAEJ,SAAU2D,GAGR,SAAS3D,IAGP,OAFAvK,EAAgBpC,KAAM2M,GAEf7I,EAA2B9D,KAAMuD,EAAgBoJ,GAAc5M,MAAMC,KAAMR,YAmBpF,OAxBAyD,EAAU0J,EAAc2D,GAQxBxN,EAAa6J,EAAc,CAAC,CAC1BhN,IAAK,UAML0D,MAAO,SAAiB6F,GAClBA,EAAKwD,OAAMxD,EAAKwC,SAAW,SAAUrI,GACvC,OAAOA,EAAMkN,OAAOrH,EAAKwD,OAAS,IAGpCrI,EAAKd,EAAgBoJ,EAAa/M,WAAY,UAAWI,MAAMF,KAAKE,KAAMkJ,OAIvEyD,EAzBT,CA0BEvD,GACFJ,EAAM2D,aAAeA,EAUrB,IAAIC,EAEJ,SAAU0D,GAUR,SAAS1D,IACP,IAAI1D,EAAO1J,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAM/E,OAJA4C,EAAgBpC,KAAM4M,GAGtB1D,EAAKsH,YAAcpR,OAAOC,OAAO,GAAImO,EAA2BtE,EAAKsH,aAC9D1M,EAA2B9D,KAAMuD,EAAgBqJ,GAAe9M,KAAKE,KAAMZ,OAAOC,OAAO,GAAIuN,EAAcrD,SAAU,GAAIL,KA0oBlI,OA1pBAjG,EAAU2J,EAAe0D,GAwBzBxN,EAAa8J,EAAe,CAAC,CAC3BjN,IAAK,UACL0D,MAAO,WACL,IAAI6F,EAAO1J,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAC/E0J,EAAKsH,YAAcpR,OAAOC,OAAO,GAAIW,KAAKwQ,YAAatH,EAAKsH,aAE5DnM,EAAKd,EAAgBqJ,EAAchN,WAAY,UAAWI,MAAMF,KAAKE,KAAMkJ,GAE3ElJ,KAAKyQ,iBAIN,CACD9Q,IAAK,eACL0D,MAAO,WACL,IAAIqN,EAAQ1Q,KAER2Q,EAAO3Q,KAAKwQ,YAChBxQ,KAAKgQ,QAAU,GACfhQ,KAAK+P,OAAS,GACd/P,KAAK4Q,cAAgB,GACrB,IAAIC,EAAU7Q,KAAK0M,KACnB,GAAKmE,GAAYF,EAIjB,IAHA,IAAIG,GAAiB,EACjBC,GAAgB,EAEXxR,EAAI,EAAGA,EAAIsR,EAAQpR,SAAUF,EAAG,CACvC,GAAIS,KAAKgR,OAmCP,GAAa,aAlCF,WACT,IAAIrN,EAAIkN,EAAQpP,MAAMlC,GAClB0R,EAAS7R,OAAOgB,KAAKsQ,EAAMM,QAAQE,QAAO,SAAUC,GACtD,OAA4B,IAArBxN,EAAEtD,QAAQ8Q,MAGnBF,EAAOG,MAAK,SAAU5K,EAAGD,GACvB,OAAOA,EAAE9G,OAAS+G,EAAE/G,UAGtB,IAAI0R,EAAQF,EAAO,GAEnB,GAAIE,EAAO,CACT,IAAIE,EAAchE,EAAWjO,OAAOC,OAAO,CACzCsM,OAAQ+E,EACR7C,KAAM6C,EAAM7C,KACZC,gBAAiB4C,EAAM5C,gBACvBlD,UAAW8F,EAAM9F,WAChB8F,EAAMM,OAAOG,KAYhB,OAVIE,IACFX,EAAMV,QAAQpK,KAAKyL,GAGdX,EAAME,cAAcO,KAAQT,EAAME,cAAcO,GAAS,IAE9DT,EAAME,cAAcO,GAAOvL,KAAK8K,EAAMV,QAAQvQ,OAAS,IAGzDF,GAAK4R,EAAM1R,OAAS,EACb,YA9BA,GAkCc,SAG3B,IAAImP,EAAOiC,EAAQtR,GAEf+R,EAAW1C,KAAQ+B,EAEvB,GAAI/B,IAAShC,EAAc2E,UAM3B,GAAa,MAAT3C,GAAyB,MAATA,EAKpB,GAAa,MAATA,GAAyB,MAATA,EAApB,CAKA,GAAIA,IAAShC,EAAc4E,YAAa,CAGtC,KAFEjS,IACFqP,EAAOiC,EAAQtR,IACJ,MACX+R,GAAW,EAGb,IAAIG,EAAMH,EAAW,IAAI7D,EAAuB,CAC9C9B,OAAQ3L,KACR6N,KAAM7N,KAAK6N,KACXC,gBAAiB9N,KAAK8N,gBACtBpB,KAAMiE,EAAK/B,GACXhB,WAAYmD,IACT,IAAIrC,EAAuB,CAC9BE,KAAMA,EACNE,YAAagC,IAGf9Q,KAAKgQ,QAAQpK,KAAK6L,QAtBhBV,GAAiBA,OALjBD,GAAkBA,OANlB9Q,KAAK+P,OAAOnK,KAAK5F,KAAKgQ,QAAQvQ,WAwCnC,CACDE,IAAK,QAKL0D,MAAO,WACLgB,EAAKd,EAAgBqJ,EAAchN,WAAY,QAASI,MAAMF,KAAKE,MAEnEA,KAAKgQ,QAAQ0B,SAAQ,SAAUnL,GAC7B,OAAOA,EAAEoD,aAOZ,CACDhK,IAAK,WAKL0D,MAAO,WACLrD,KAAKgQ,QAAQ0B,SAAQ,SAAUnL,GAC7B,OAAOA,EAAEsD,cAGXxF,EAAKd,EAAgBqJ,EAAchN,WAAY,WAAYI,MAAMF,KAAKE,QAMvE,CACDL,IAAK,aAKL0D,MAAO,SAAoBmF,GACzB,OAAOnE,EAAKd,EAAgBqJ,EAAchN,WAAY,aAAcI,MAAMF,KAAKE,KAAMwI,GAAMG,UAAU3I,KAAK4I,wBAM3G,CACDjJ,IAAK,iBACL0D,MAAO,SAAwB6G,GAC7B,IAAIC,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAChF0K,EAAKlK,KAAKoK,UAAUF,EAAIC,GAExB,IAAIwH,EAAY3R,KAAK4P,eAAe5P,KAAKqD,MAAM5D,QAE3CwI,EAAU,IAAID,EAClB,IAAK2J,EAAW,OAAO1J,EAEvB,IAAK,IAAI2J,EAAKD,EAAU7B,SAAU8B,EAAI,CACpC,IAAIC,EAAS7R,KAAKgQ,QAAQ4B,GAC1B,IAAKC,EAAQ,MAEb,IAAIC,EAAeD,EAAO3G,YAAYhB,EAAIC,GAEtC/B,EAAO0J,EAAa1J,KAExB,GADAH,EAAQU,UAAUmJ,GACd1J,GAAQ0J,EAAa3J,YAAa,MAGxC,OAAOF,IAMR,CACDtI,IAAK,cACL0D,MAAO,WACL,IAAI0O,EAAS/R,KAET8J,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OACvFuS,EAAY,IAAIjD,EACpB,OAAIjF,IAAYC,GAEhB/J,KAAKiS,sBAAsBnI,EAASC,GAAO,SAAUxD,EAAGqL,EAAIM,EAAUC,GACpE,IAAIC,EAAa7L,EAAE2F,YAAYgG,EAAUC,GACzCC,EAAW7J,KAAOwJ,EAAOM,gBAAgBT,GACzCQ,EAAWjR,KAAO4Q,EAAOO,eAAeV,GACpCQ,aAAsBrD,IAAmBqD,EAAW3C,WAAamC,GACrEI,EAAU1C,OAAO8C,MAPWJ,IAgB/B,CACDrS,IAAK,eACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OACvF0K,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAChF,GAAIsK,IAAYC,EAAO,MAAO,GAC9B,IAAIH,EAAQ,GAMZ,OAJA5J,KAAKiS,sBAAsBnI,EAASC,GAAO,SAAUxD,EAAGgM,EAAGzI,EAASC,GAClEH,GAASrD,EAAEyD,aAAaF,EAASC,EAAOI,MAGnCP,IAER,CACDjK,IAAK,kBACL0D,MAAO,SAAyBoM,GAG9B,IAFA,IAAI+C,EAEKC,EAAK,EAAGA,EAAKzS,KAAK+P,OAAOtQ,SAAUgT,EAAI,CAC9C,IAAIlK,EAAOvI,KAAK+P,OAAO0C,GACvB,KAAIlK,GAAQkH,GAAmC,MAAvB+C,EAAajK,EAGvC,OAAOiK,IAIR,CACD7S,IAAK,qBACL0D,MAAO,SAA4BqP,GACjC,IAAIC,EAAS3S,KAETiI,EAAU,IAAID,EAClB,GAAIhI,KAAK6N,MAAwB,MAAhB6E,EAAsB,OAAOzK,EAE9C,IAAI2K,EAAiB5S,KAAK4P,eAAe5P,KAAKqD,MAAM5D,QAEpD,IAAKmT,EAAgB,OAAO3K,EAC5B,IAAI4K,EAAkBD,EAAe9C,MACjCgD,EAAgC,MAAhBJ,EAAuBA,EAAe1S,KAAKgQ,QAAQvQ,OAcvE,OAZAO,KAAKgQ,QAAQvO,MAAMoR,EAAiBC,GAAepB,SAAQ,SAAUnL,GACnE,IAAKA,EAAEsH,MAAwB,MAAhB6E,EAAsB,CAEnC,IAAIK,EAAoB,MAAbxM,EAAEyJ,QAAkB,CAACzJ,EAAEyJ,QAAQvQ,QAAU,GAEhDuT,EAAWzM,EAAEqC,mBAAmB7I,MAAMwG,EAAGwM,GAE7CJ,EAAOtJ,QAAU2J,EAAS9K,SAC1BD,EAAQU,UAAUqK,OAIf/K,IAIR,CACDtI,IAAK,iBACL0D,MAAO,SAAwBwF,GAG7B,IAFA,IAAIoK,EAAS,GAEJrB,EAAK,EAAGA,EAAK5R,KAAKgQ,QAAQvQ,SAAUmS,EAAI,CAC/C,IAAIsB,EAAUlT,KAAKgQ,QAAQ4B,GACvBuB,EAAgBF,EAAOxT,OAG3B,GAAIoJ,IAFJoK,GAAUC,EAAQ7P,OAEA5D,OAChB,MAAO,CACLqQ,MAAO8B,EACPwB,OAAQvK,EAAMsK,MAOrB,CACDxT,IAAK,iBACL0D,MAAO,SAAwBoM,GAC7B,OAAOzP,KAAKgQ,QAAQvO,MAAM,EAAGgO,GAAY4D,QAAO,SAAUxK,EAAKtC,GAC7D,OAAOsC,EAAOtC,EAAElD,MAAM5D,SACrB,KAIJ,CACDE,IAAK,wBACL0D,MAAO,SAA+ByG,GACpC,IAAIC,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OACvF0L,EAAK3L,UAAUC,OAAS,EAAID,UAAU,QAAK+F,EAE3C+N,EAAgBtT,KAAK4P,eAAe9F,GAExC,GAAIwJ,EAAe,CACjB,IAAIC,EAAcvT,KAAK4P,eAAe7F,GAGlCyJ,EAAcD,GAAeD,EAAcxD,QAAUyD,EAAYzD,MACjE2D,EAAoBH,EAAcF,OAClCM,EAAkBH,GAAeC,EAAcD,EAAYH,OAASpT,KAAKgQ,QAAQsD,EAAcxD,OAAOzM,MAAM5D,OAGhH,GAFA0L,EAAGnL,KAAKgQ,QAAQsD,EAAcxD,OAAQwD,EAAcxD,MAAO2D,EAAmBC,GAE1EH,IAAgBC,EAAa,CAE/B,IAAK,IAAI5B,EAAK0B,EAAcxD,MAAQ,EAAG8B,EAAK2B,EAAYzD,QAAS8B,EAC/DzG,EAAGnL,KAAKgQ,QAAQ4B,GAAKA,EAAI,EAAG5R,KAAKgQ,QAAQ4B,GAAIvO,MAAM5D,QAIrD0L,EAAGnL,KAAKgQ,QAAQuD,EAAYzD,OAAQyD,EAAYzD,MAAO,EAAGyD,EAAYH,YAQ3E,CACDzT,IAAK,SACL0D,MAAO,WACL,IAAIyG,EAAUtK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAC9EuK,EAAQvK,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKQ,KAAKqD,MAAM5D,OAEvFkU,EAAgBtP,EAAKd,EAAgBqJ,EAAchN,WAAY,SAAUI,MAAMF,KAAKE,KAAM8J,EAASC,GAMvG,OAJA/J,KAAKiS,sBAAsBnI,EAASC,GAAO,SAAUxD,EAAGgM,EAAGL,EAAUC,GACnEwB,EAAchL,UAAUpC,EAAE6F,OAAO8F,EAAUC,OAGtCwB,IAMR,CACDhU,IAAK,kBACL0D,MAAO,SAAyB8D,GAC9B,IAAId,EAAY7G,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK2G,EAEhFyN,EAAiB5T,KAAK4P,eAAezI,IAAc,CACrD2I,MAAO,EACPsD,OAAQ,GAENS,EAAmBD,EAAeR,OAClCU,EAAkBF,EAAe9D,MACjCiE,EAAa/T,KAAKgQ,QAAQ8D,GAC9B,IAAKC,EAAY,OAAO5M,EACxB,IAAI6M,EAAsBH,EAEE,IAAxBG,GAA6BA,EAAsBD,EAAW1Q,MAAM5D,SACtEuU,EAAsBD,EAAW5H,gBAAgB0H,EAAkBzN,EAAeC,KAGpF,IAAI4N,EAAgBD,IAAwBD,EAAW1Q,MAAM5D,OACzDyU,EAAuC,IAAxBF,EAEnB,IAAKE,IAAiBD,EAAe,OAAOjU,KAAKsS,eAAewB,GAAmBE,EACnF,IAAIG,EAAmBF,EAAgBH,EAAkB,EAAIA,EAE7D,GAAIzN,IAAcF,EAAgB,CAUhC,GAAIgO,EAAmB,EAAG,CACxB,IAAIC,EAAmBD,EAAmB,EACtCE,EAAcrU,KAAKgQ,QAAQoE,GAC3BE,EAAgBD,EAAYlI,gBAAgB,EAAGhG,GAEnD,IAAKkO,EAAYhR,MAAM5D,QAAU6U,IAAkBD,EAAYhR,MAAM5D,OACnE,OAAOO,KAAKsS,eAAe6B,GAO/B,IAFA,IAAII,EAAoBJ,EAEfvC,EAAK2C,EAAmB3C,EAAK5R,KAAKgQ,QAAQvQ,SAAUmS,EAAI,CAC/D,IAAI4C,EAAexU,KAAKgQ,QAAQ4B,GAE5B6C,EAAiBD,EAAarI,gBAAgB,EAAGhG,GAErD,IAAKqO,EAAanR,MAAM5D,QAAUgV,IAAmBD,EAAanR,MAAM5D,OACtE,OAAOO,KAAKsS,eAAeV,GAAM6C,EAMrC,IAAK,IAAIC,EAAMP,EAAmB,EAAGO,GAAO,IAAKA,EAAK,CACpD,IAAIC,EAAU3U,KAAKgQ,QAAQ0E,GAEvBE,EAAkBD,EAAQxI,gBAAgB,EAAGhG,GAGjD,IAAKwO,EAAQtR,MAAM5D,QAAUmV,IAAoBD,EAAQtR,MAAM5D,OAC7D,OAAOO,KAAKsS,eAAeoC,GAAOC,EAAQtR,MAAM5D,OAIpD,OAAO0H,EAGT,GAAId,IAAcF,GAAkBE,IAAcF,EAAsB,CAWtE,IAFA,IAAI0O,EAEKC,EAAOX,EAAkBW,EAAO9U,KAAKgQ,QAAQvQ,SAAUqV,EAC9D,GAAI9U,KAAKgQ,QAAQ8E,GAAMzR,MAAO,CAC5BwR,EAA+BC,EAC/B,MAIJ,GAAoC,MAAhCD,EAAsC,CACxC,IAAIE,EAAc/U,KAAKgQ,QAAQ6E,GAE3BG,EAAkBD,EAAY5I,gBAAgB,EAAGhG,GAErD,GAAwB,IAApB6O,GAAyBD,EAAYtG,cAAchP,OAErD,OAAOO,KAAKsS,eAAeuC,GAAgCG,EAS/D,IAHA,IACIC,EADAC,GAA8B,EAGzBC,EAAOhB,EAAmB,EAAGgB,GAAQ,IAAKA,EAAM,CACvD,IAAIC,EAAUpV,KAAKgQ,QAAQmF,GAEvBE,EAAkBD,EAAQjJ,gBAAgBiJ,EAAQ/R,MAAM5D,OAAQ0G,GAIpE,GAFKiP,EAAQ/R,OAA6B,IAApBgS,IAAuBJ,EAA4BE,GAEjD,IAApBE,EAAuB,CACzB,GAAIA,IAAoBD,EAAQ/R,MAAM5D,OAEpC,OAAOO,KAAKsS,eAAe6C,GAAQE,EAGnCH,EAA6BC,EAC7B,OAKN,GAAI9O,IAAcF,EAEhB,IAAK,IAAImP,EAAOJ,EAA6B,EAAGI,GAAQ9N,KAAKC,IAAI0M,EAAkBnU,KAAKgQ,QAAQvQ,OAAS,KAAM6V,EAAM,CACnH,IAAIC,EAAUvV,KAAKgQ,QAAQsF,GAEvBE,EAAkBD,EAAQpJ,gBAAgB,EAAGhG,GAE7CsP,EAAkBzV,KAAKsS,eAAegD,GAAQE,EAElD,GAAIC,EAAkBtO,EAAW,MAEjC,GAAIqO,IAAoBD,EAAQlS,MAAM5D,OAAQ,OAAOgW,EAKzD,GAAIP,GAA8B,EAChC,OAAOlV,KAAKsS,eAAe4C,GAA8BlV,KAAKgQ,QAAQkF,GAA4B7R,MAAM5D,OAI1G,GAAI4G,IAAcF,GAAwBnG,KAAK6N,OAAS7N,KAAKgK,iBAAmB0L,EAAQ1V,KAAKgQ,QAAQmE,IACnG,OAAO,EAGT,GAAiC,MAA7Bc,EACF,OAAOjV,KAAKsS,eAAe2C,GAI7B,IAAK,IAAIU,EAAOxB,EAAkBwB,EAAO3V,KAAKgQ,QAAQvQ,SAAUkW,EAAM,CACpE,IAAIC,EAAU5V,KAAKgQ,QAAQ2F,GAEvBE,EAAkBD,EAAQzJ,gBAAgB,EAAGhG,GAGjD,IAAKyP,EAAQvS,MAAM5D,QAAUoW,IAAoBD,EAAQvS,MAAM5D,OAC7D,OAAOO,KAAKsS,eAAeqD,GAAQE,EAIvC,OAAO,EAGT,GAAIxP,IAAcF,GAAmBE,IAAcF,EAAuB,CASxE,IAHA,IAAI2P,EACAC,EAEKC,EAAO7B,EAAkB6B,EAAOhW,KAAKgQ,QAAQvQ,SAAUuW,EAAM,CACpE,IAAIC,EAAUjW,KAAKgQ,QAAQgG,GAEvBE,EAAkBD,EAAQ9J,gBAAgB,EAAGhG,GAEjD,GAAI+P,IAAoBD,EAAQ5S,MAAM5D,OAAQ,CAC5CsW,EAA4B/V,KAAKsS,eAAe0D,GAAQE,EACxDJ,EAA8BE,EAC9B,OAIJ,GAAmC,MAA/BF,GAAoE,MAA7BC,EAAmC,CAC5E,IAAK,IAAII,EAAOL,EAA6BK,EAAOnW,KAAKgQ,QAAQvQ,SAAU0W,EAAM,CAC/E,IAAIC,EAAUpW,KAAKgQ,QAAQmG,GAEvBE,EAAkBD,EAAQjK,gBAAgB,EAAGhG,GAEjD,GAAIkQ,IAAoBD,EAAQ/S,MAAM5D,OACpC,OAAOO,KAAKsS,eAAe6D,GAAQE,EAIvC,OAAOhQ,IAAcF,EAAwBnG,KAAKqD,MAAM5D,OAASsW,EAGnE,IAAK,IAAIO,EAAO9O,KAAKC,IAAI0M,EAAkBnU,KAAKgQ,QAAQvQ,OAAS,GAAI6W,GAAQ,IAAKA,EAAM,CACtF,IAAIC,EAAUvW,KAAKgQ,QAAQsG,GAEvBE,EAAkBD,EAAQpK,gBAAgBoK,EAAQlT,MAAM5D,OAAQ0G,GAEpE,GAAwB,IAApBqQ,EAAuB,CACzB,IAAIC,GAAazW,KAAKsS,eAAegE,GAAQE,EAE7C,GAAIC,IAActP,EAAW,OAAOsP,GACpC,QAKN,OAAOtP,IAIR,CACDxH,IAAK,cACL0D,MAAO,SAAqB1B,GAC1B,OAAO3B,KAAK0W,aAAa/U,GAAM,KAIhC,CACDhC,IAAK,eACL0D,MAAO,SAAsB1B,GAC3B,IAAIgV,EAAS3W,KAET4W,EAAU5W,KAAK4Q,cAAcjP,GACjC,OAAKiV,EACEA,EAAQ3H,KAAI,SAAU4H,GAC3B,OAAOF,EAAO3G,QAAQ6G,MAFH,KAKtB,CACDlX,IAAK,QACL6E,IAAK,WACH,OAAOpF,OAAOC,OAAO,GAAIgF,EAAKd,EAAgBqJ,EAAchN,WAAY,QAASI,MAAO,CACtFgQ,QAAShQ,KAAKgQ,QAAQf,KAAI,SAAU1I,GAClC,OAAOA,EAAEwC,YAIfnE,IAAK,SAAamE,GAChB,IAAIiH,EAAUjH,EAAMiH,QAChB8G,EAAclT,EAA2BmF,EAAO,CAAC,YAErD/I,KAAKgQ,QAAQ0B,SAAQ,SAAUnL,EAAGqL,GAChC,OAAOrL,EAAEwC,MAAQiH,EAAQ4B,MAG3B9M,EAAKvB,EAAgBqJ,EAAchN,WAAY,QAASkX,EAAa9W,MAAM,KAE5E,CACDL,IAAK,aACL6E,IAAK,WACH,OAAOxE,KAAKgQ,QAAQ+G,OAAM,SAAUxQ,GAClC,OAAOA,EAAE+H,gBAGZ,CACD3O,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAKgQ,QAAQqD,QAAO,SAAUpN,EAAKM,GACxC,OAAON,EAAOM,EAAEkI,gBACf,KAEL7J,IAAK,SAAa6J,GAChB3J,EAAKvB,EAAgBqJ,EAAchN,WAAY,gBAAiB6O,EAAezO,MAAM,KAMtF,CACDL,IAAK,QACL6E,IAAK,WAEH,OAAOxE,KAAKgQ,QAAQqD,QAAO,SAAUpN,EAAKM,GACxC,OAAON,EAAOM,EAAElD,QACf,KAELuB,IAAK,SAAavB,GAChByB,EAAKvB,EAAgBqJ,EAAchN,WAAY,QAASyD,EAAOrD,MAAM,OAIlE4M,EA3pBT,CA4pBExD,GAUF,SAASsM,EAAQsB,GACf,IAAKA,EAAO,OAAO,EACnB,IAAI3T,EAAQ2T,EAAM3T,MAClB,OAAQA,GAAS2T,EAAM7K,gBAAgB,EAAGhG,KAAoB9C,EAAM5D,OAZtEmN,EAAcrD,SAAW,CACvBsE,MAAM,EACNC,gBAAiB,KAEnBlB,EAAc2E,UAAY,IAC1B3E,EAAc4E,YAAc,KAC5B5E,EAAcqK,gBAAkBxJ,EAChCb,EAAcsK,gBAAkBxI,EAQhC1F,EAAM4D,cAAgBA,EAItB,IAAIuK,EAEJ,SAAUC,GAGR,SAASD,IAGP,OAFA/U,EAAgBpC,KAAMmX,GAEfrT,EAA2B9D,KAAMuD,EAAgB4T,GAAapX,MAAMC,KAAMR,YAiInF,OAtIAyD,EAAUkU,EAAaC,GAQvBtU,EAAaqU,EAAa,CAAC,CACzBxX,IAAK,UAKL0D,MAAO,SAAiB6F,GAEtBA,EAAO9J,OAAOC,OAAO,CACnBgY,GAAIrX,KAAKqX,IAAM,EACflW,KAAMnB,KAAKmB,MAAQ,GAClB+H,GACH,IAAIoO,EAAYpR,OAAOgD,EAAKmO,IAAI5X,OACV,MAAlByJ,EAAKoO,YAAmBA,EAAY9P,KAAKI,IAAI0P,EAAWpO,EAAKoO,YACjEpO,EAAKoO,UAAYA,EAKjB,IAJA,IAAIC,EAAUrR,OAAOgD,EAAK/H,MAAMqW,SAASF,EAAW,KAChDG,EAAQvR,OAAOgD,EAAKmO,IAAIG,SAASF,EAAW,KAC5CI,EAAiB,EAEdA,EAAiBD,EAAMhY,QAAUgY,EAAMC,KAAoBH,EAAQG,MACtEA,EAGJxO,EAAKwD,KAAO+K,EAAMhW,MAAM,EAAGiW,GAAgBC,QAAQ,KAAM,OAAS,IAAIC,OAAON,EAAYI,GAEzFrT,EAAKd,EAAgB4T,EAAYvX,WAAY,UAAWI,MAAMF,KAAKE,KAAMkJ,KAM1E,CACDvJ,IAAK,aACL0D,MAAO,SAAoB4C,GACzB,IAAI4R,EAAS,GACTC,EAAS,GAGTC,EAAQ9S,EADDgB,EAAI+R,MAAM,qBAAuB,GACX,GAC7BC,EAAcF,EAAM,GACpBG,EAAMH,EAAM,GAShB,OAPIG,IACFL,EAAS,IAAID,OAAOK,EAAYxY,QAAUyY,EAC1CJ,EAAS,IAAIF,OAAOK,EAAYxY,QAAUyY,GAKrC,CAFPL,EAASA,EAAOM,OAAOnY,KAAKsX,UAAW,KACvCQ,EAASA,EAAOK,OAAOnY,KAAKsX,UAAW,QAOxC,CACD3X,IAAK,YACL0D,MAAO,SAAmB4C,GACxB,IAAIkE,EAAQ3K,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAEhF,GADAyG,EAAM5B,EAAKd,EAAgB4T,EAAYvX,WAAY,YAAaI,MAAMF,KAAKE,KAAMiG,EAAKkE,GAAOwN,QAAQ,MAAO,KACvG3X,KAAKoY,QAAS,OAAOnS,EAM1B,IALA,IAAIsR,EAAUrR,OAAOlG,KAAKmB,MAAMqW,SAASxX,KAAKsX,UAAW,KACrDG,EAAQvR,OAAOlG,KAAKqX,IAAIG,SAASxX,KAAKsX,UAAW,KACjDe,EAAMrY,KAAKqD,MACXiV,EAAU,GAELrN,EAAK,EAAGA,EAAKhF,EAAIxG,SAAUwL,EAAI,CACtC,IAAIsN,EAAUF,EAAMC,EAAUrS,EAAIgF,GAE9BuN,EAAmBxY,KAAKyY,WAAWF,GACnCG,EAAoBzT,EAAeuT,EAAkB,GACrDX,EAASa,EAAkB,GAC3BZ,EAASY,EAAkB,GAE3B5L,OAAOgL,GAAU9X,KAAKmB,KAAMmX,GAAWf,EAAQgB,EAAQ9Y,OAAS,GAAYqN,OAAO+K,GAAU7X,KAAKqX,GAAIiB,GAAWb,EAAMc,EAAQ9Y,OAAS,GAAQ6Y,GAAWrS,EAAIgF,GAGrK,OAAOqN,IAMR,CACD3Y,IAAK,aACL0D,MAAO,WACL,IAAIsV,EAEA1S,EAAMjG,KAAKqD,MACXuV,EAAe3S,EAAIsK,OAAO,QAC9B,IAAsB,IAAlBqI,GAAuB3S,EAAIxG,QAAUO,KAAK6Y,WAAY,OAAO,EAOjE,IALA,IAAIC,EAAoB9Y,KAAKyY,WAAWxS,GACpC8S,EAAoB9T,EAAe6T,EAAmB,GACtDjB,EAASkB,EAAkB,GAC3BjB,EAASiB,EAAkB,GAEtBC,EAAOxZ,UAAUC,OAAQsT,EAAO,IAAInS,MAAMoY,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ElG,EAAKkG,GAAQzZ,UAAUyZ,GAGzB,OAAOjZ,KAAKmB,MAAQ2L,OAAOgL,IAAWhL,OAAO+K,IAAW7X,KAAKqX,KAAOsB,EAAQtU,EAAKd,EAAgB4T,EAAYvX,WAAY,aAAcI,OAAOF,KAAKC,MAAM4Y,EAAO,CAAC3Y,MAAMkZ,OAAOnG,MAE/K,CACDpT,IAAK,aAYL6E,IAAK,WACH,OAAOxE,KAAKsX,UAAYpR,OAAOlG,KAAKmB,MAAM1B,SAE3C,CACDE,IAAK,aACL6E,IAAK,WACH,OAAOH,EAAKd,EAAgB4T,EAAYvX,WAAY,aAAcI,OAAS+N,QAAQ/N,KAAKqD,WAIrF8T,EAvIT,CAwIEvK,GACF5D,EAAMmO,YAAcA,EAIpB,IAAItK,EAEJ,SAAUuK,GAcR,SAASvK,EAAW3D,GAGlB,OAFA9G,EAAgBpC,KAAM6M,GAEf/I,EAA2B9D,KAAMuD,EAAgBsJ,GAAY/M,KAAKE,KAAMZ,OAAOC,OAAO,GAAIwN,EAAWtD,SAAU,GAAIL,KAqF5H,OArGAjG,EAAU4J,EAAYuK,GAuBtBtU,EAAa+J,EAAY,CAAC,CACxBlN,IAAK,UACL0D,MAAO,SAAiB6F,GAClBA,EAAKwD,OAAS9F,aAAasC,EAAKwD,KAChCxD,EAAK2H,UAAS3H,EAAKwD,KAAOxD,EAAK2H,SACnC,IAAIG,EAAS9H,EAAK8H,OAClB9H,EAAK8H,OAAS5R,OAAOC,OAAO,GAAIwN,EAAWsM,sBAEvCjQ,EAAKzB,MAAKyB,EAAK8H,OAAOoI,EAAEjY,KAAO+H,EAAKzB,IAAI4R,eACxCnQ,EAAKtB,MAAKsB,EAAK8H,OAAOoI,EAAE/B,GAAKnO,EAAKtB,IAAIyR,eAEtCnQ,EAAKzB,KAAOyB,EAAKtB,KAAOsB,EAAK8H,OAAOoI,EAAEjY,OAAS+H,EAAK8H,OAAOoI,EAAE/B,KAC/DnO,EAAK8H,OAAOsI,EAAEnY,KAAO+H,EAAKzB,IAAI8R,WAAa,EAC3CrQ,EAAK8H,OAAOsI,EAAEjC,GAAKnO,EAAKtB,IAAI2R,WAAa,EAErCrQ,EAAK8H,OAAOsI,EAAEnY,OAAS+H,EAAK8H,OAAOsI,EAAEjC,KACvCnO,EAAK8H,OAAOwI,EAAErY,KAAO+H,EAAKzB,IAAIgS,UAC9BvQ,EAAK8H,OAAOwI,EAAEnC,GAAKnO,EAAKtB,IAAI6R,YAIhCra,OAAOC,OAAO6J,EAAK8H,OAAQA,GAE3B5R,OAAOgB,KAAK8I,EAAK8H,QAAQU,SAAQ,SAAUgI,GACzC,IAAInT,EAAI2C,EAAK8H,OAAO0I,GACd,YAAanT,IAAIA,EAAE6R,QAAUlP,EAAKkP,YAG1C/T,EAAKd,EAAgBsJ,EAAWjN,WAAY,UAAWI,MAAMF,KAAKE,KAAMkJ,KAMzE,CACDvJ,IAAK,aACL0D,MAAO,WAKL,IAJA,IAAIsV,EAEAgB,EAAO3Z,KAAK2Z,KAEPX,EAAOxZ,UAAUC,OAAQsT,EAAO,IAAInS,MAAMoY,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ElG,EAAKkG,GAAQzZ,UAAUyZ,GAGzB,OAAQN,EAAQtU,EAAKd,EAAgBsJ,EAAWjN,WAAY,aAAcI,OAAOF,KAAKC,MAAM4Y,EAAO,CAAC3Y,MAAMkZ,OAAOnG,OAAY/S,KAAKsO,YAActO,KAAK4Z,YAAY5Z,KAAKqD,QAAkB,MAARsW,IAA6B,MAAZ3Z,KAAKyH,KAAezH,KAAKyH,KAAOkS,KAAsB,MAAZ3Z,KAAK4H,KAAe+R,GAAQ3Z,KAAK4H,QAI7Q,CACDjI,IAAK,cACL0D,MAAO,SAAqB4C,GAC1B,OAAOjG,KAAK6L,OAAO7L,KAAK8L,MAAM7F,EAAKjG,MAAOA,MAAMK,QAAQ4F,IAAQ,IAIjE,CACDtG,IAAK,OACL6E,IAAK,WACH,OAAOxE,KAAK6Z,YAEdjV,IAAK,SAAa+U,GAChB3Z,KAAK6Z,WAAaF,IAMnB,CACDha,IAAK,aACL6E,IAAK,WACH,OAAOxE,KAAKsO,WAAajK,EAAKd,EAAgBsJ,EAAWjN,WAAY,aAAcI,MAAQ,MAE7F4E,IAAK,SAAavB,GAChByB,EAAKvB,EAAgBsJ,EAAWjN,WAAY,aAAcyD,EAAOrD,MAAM,OAIpE6M,EAtGT,CAuGED,GACFC,EAAWtD,SAAW,CACpBsH,QAAS,cACThF,OAAQ,SAAgB8N,GAItB,MAAO,CAHGzT,OAAOyT,EAAKF,WAAWjC,SAAS,EAAG,KACjCtR,OAAOyT,EAAKJ,WAAa,GAAG/B,SAAS,EAAG,KACzCmC,EAAKN,eACUnK,KAAK,MAEjCpD,MAAO,SAAe7F,GACpB,IACI6T,EAAc7U,EADDgB,EAAI8T,MAAM,KACkB,GACzCC,EAAMF,EAAY,GAClBG,EAAQH,EAAY,GACpBI,EAAOJ,EAAY,GAEvB,OAAO,IAAIlT,KAAKsT,EAAMD,EAAQ,EAAGD,KAIrCnN,EAAWsM,mBAAqB,WAC9B,MAAO,CACLK,EAAG,CACD9M,KAAMyK,EACNhW,KAAM,EACNkW,GAAI,GACJC,UAAW,GAEbgC,EAAG,CACD5M,KAAMyK,EACNhW,KAAM,EACNkW,GAAI,GACJC,UAAW,GAEb8B,EAAG,CACD1M,KAAMyK,EACNhW,KAAM,KACNkW,GAAI,QAKVrO,EAAM6D,WAAaA,EAMnB,IAAIsN,GAEJ,WACE,SAASA,IACP/X,EAAgBpC,KAAMma,GAsExB,OAnEArX,EAAaqX,EAAa,CAAC,CACzBxa,IAAK,SAGL0D,MAAO,SAAgBkE,EAAOM,GAC5B,GAAa,MAATN,GAAwB,MAAPM,IAAeN,IAAUvH,KAAKoa,gBAAkBvS,IAAQ7H,KAAKqa,cAElF,IACEra,KAAKsa,cAAc/S,EAAOM,GAC1B,MAAO0S,OAIV,CACD5a,IAAK,gBACL0D,MAAO,SAAuBkE,EAAOM,MAGpC,CACDlI,IAAK,aAGL0D,MAAO,SAAoBmX,MAG1B,CACD7a,IAAK,eACL0D,MAAO,cACN,CACD1D,IAAK,iBASL6E,IAAK,WACH,IAAI+C,EAEJ,IACEA,EAAQvH,KAAKya,sBACb,MAAOF,IAET,OAAgB,MAAThT,EAAgBA,EAAQvH,KAAKqD,MAAM5D,SAI3C,CACDE,IAAK,eACL6E,IAAK,WACH,IAAIqD,EAEJ,IACEA,EAAM7H,KAAK0a,oBACX,MAAOH,IAET,OAAc,MAAP1S,EAAcA,EAAM7H,KAAKqD,MAAM5D,SAEvC,CACDE,IAAK,WACL6E,IAAK,WACH,OAAO,MAIJ2V,EAxET,GA0EAnR,EAAMmR,YAAcA,GAIpB,IAAIQ,GAEJ,SAAUC,GAUR,SAASD,EAAgB/Q,GACvB,IAAI8G,EAOJ,OALAtO,EAAgBpC,KAAM2a,IAEtBjK,EAAQ5M,EAA2B9D,KAAMuD,EAAgBoX,GAAiB7a,KAAKE,QACzE4J,MAAQA,EACd8G,EAAMmK,UAAY,GACXnK,EA8GT,OA/HAzN,EAAU0X,EAAiBC,GAuB3B9X,EAAa6X,EAAiB,CAAC,CAC7Bhb,IAAK,gBAML0D,MAAO,SAAuBkE,EAAOM,GACnC7H,KAAK4J,MAAMkR,kBAAkBvT,EAAOM,KAOrC,CACDlI,IAAK,aAML0D,MAAO,SAAoBmX,GACzB,IAAIzI,EAAS/R,KAEbZ,OAAOgB,KAAKoa,GAAU9I,SAAQ,SAAUqJ,GACtC,OAAOhJ,EAAOiJ,oBAAoBL,EAAgBM,WAAWF,GAAQP,EAASO,SAQjF,CACDpb,IAAK,eACL0D,MAAO,WACL,IAAIsP,EAAS3S,KAEbZ,OAAOgB,KAAKJ,KAAK6a,WAAWnJ,SAAQ,SAAUqJ,GAC5C,OAAOpI,EAAOqI,oBAAoBD,QAKrC,CACDpb,IAAK,sBACL0D,MAAO,SAA6B0X,EAAOG,GACrClb,KAAK6a,UAAUE,KACjB/a,KAAK4J,MAAMuR,oBAAoBJ,EAAO/a,KAAK6a,UAAUE,WAC9C/a,KAAK6a,UAAUE,IAGpBG,IACFlb,KAAK4J,MAAMwR,iBAAiBL,EAAOG,GACnClb,KAAK6a,UAAUE,GAASG,KAG3B,CACDvb,IAAK,cACL6E,IAAK,WACH,OAAOxE,KAAK4J,MAAMyR,YAAcrb,KAAK4J,MAAMyR,cAAgBC,WAO5D,CACD3b,IAAK,WACL6E,IAAK,WAEH,OAAOxE,KAAK4J,QAAU5J,KAAKub,YAAYC,gBAOxC,CACD7b,IAAK,wBACL6E,IAAK,WACH,OAAOxE,KAAK4J,MAAMwQ,iBAOnB,CACDza,IAAK,sBACL6E,IAAK,WACH,OAAOxE,KAAK4J,MAAMyQ,eAEnB,CACD1a,IAAK,QACL6E,IAAK,WACH,OAAOxE,KAAK4J,MAAMvG,OAEpBuB,IAAK,SAAavB,GAChBrD,KAAK4J,MAAMvG,MAAQA,MAIhBsX,EAhIT,CAiIER,IACFQ,GAAgBM,WAAa,CAC3BQ,gBAAiB,UACjB7R,MAAO,QACP8R,KAAM,OACNC,MAAO,QACPC,MAAO,QACPhQ,OAAQ,QAEV5C,EAAM2R,gBAAkBA,GAExB,IAAIkB,GAEJ,SAAUC,GAGR,SAASD,IAGP,OAFAzZ,EAAgBpC,KAAM6b,GAEf/X,EAA2B9D,KAAMuD,EAAgBsY,GAAgC9b,MAAMC,KAAMR,YA+DtG,OApEAyD,EAAU4Y,EAAgCC,GAQ1ChZ,EAAa+Y,EAAgC,CAAC,CAC5Clc,IAAK,gBAML0D,MAAO,SAAuBkE,EAAOM,GACnC,GAAK7H,KAAKub,YAAYQ,YAAtB,CACA,IAAIC,EAAQhc,KAAKub,YAAYQ,cAC7BC,EAAMC,SAASjc,KAAK4J,MAAMsS,YAAclc,KAAK4J,MAAOrC,GACpDyU,EAAMG,OAAOnc,KAAK4J,MAAMwS,WAAapc,KAAK4J,MAAO/B,GACjD,IAAIwU,EAAOrc,KAAKub,YACZe,EAAYD,EAAKE,cAAgBF,EAAKE,eAEtCD,IACFA,EAAUE,kBACVF,EAAUG,SAAST,OAQtB,CACDrc,IAAK,wBAML6E,IAAK,WACH,IAAI6X,EAAOrc,KAAKub,YACZe,EAAYD,EAAKE,cAAgBF,EAAKE,eAC1C,OAAOD,GAAaA,EAAUI,eAO/B,CACD/c,IAAK,sBACL6E,IAAK,WACH,IAAI6X,EAAOrc,KAAKub,YACZe,EAAYD,EAAKE,cAAgBF,EAAKE,eAC1C,OAAOD,GAAatc,KAAKya,sBAAwBvU,OAAOoW,GAAW7c,SAEpE,CACDE,IAAK,QACL6E,IAAK,WAEH,OAAOxE,KAAK4J,MAAM+S,aAEpB/X,IAAK,SAAavB,GAChBrD,KAAK4J,MAAM+S,YAActZ,MAItBwY,EArET,CAsEElB,IACF3R,EAAM6S,+BAAiCA,GAIvC,IAAI1S,GAEJ,WAeE,SAASA,EAAUF,EAAIC,GACrB9G,EAAgBpC,KAAMmJ,GAEtBnJ,KAAKiJ,GAAKA,aAAckR,GAAclR,EAAKA,EAAG2T,mBAAoC,UAAf3T,EAAG4T,SAAsC,aAAf5T,EAAG4T,QAAyB,IAAIhB,GAA+B5S,GAAM,IAAI0R,GAAgB1R,GACtLjJ,KAAKyI,OAAS4E,EAAWnE,GACzBlJ,KAAK8c,WAAa,GAClB9c,KAAKqJ,OAAS,GACdrJ,KAAK+c,eAAiB,GACtB/c,KAAKgd,eAAiBhd,KAAKgd,eAAetT,KAAK1J,MAC/CA,KAAKid,SAAWjd,KAAKid,SAASvT,KAAK1J,MACnCA,KAAKkd,UAAYld,KAAKkd,UAAUxT,KAAK1J,MACrCA,KAAKmd,QAAUnd,KAAKmd,QAAQzT,KAAK1J,MACjCA,KAAKod,SAAWpd,KAAKod,SAAS1T,KAAK1J,MACnCA,KAAKqd,SAAWrd,KAAKqd,SAAS3T,KAAK1J,MACnCA,KAAKsd,YAActd,KAAKsd,YAAY5T,KAAK1J,MACzCA,KAAKud,oBAAsBvd,KAAKud,oBAAoB7T,KAAK1J,MAEzDA,KAAKwd,cAGLxd,KAAKyd,cAELzd,KAAKkd,YA2WP,OAtWApa,EAAaqG,EAAW,CAAC,CACvBxJ,IAAK,aACL0D,MAAO,SAAoBqJ,GACzB,OAAe,MAARA,GAAgBA,IAAS1M,KAAKyI,OAAOiE,MAAQA,IAAS9F,MAAQ5G,KAAKyI,kBAAkBoE,IAE7F,CACDlN,IAAK,cAML0D,MAAO,WACLrD,KAAKiJ,GAAGyU,WAAW,CACjBjC,gBAAiBzb,KAAKgd,eACtBpT,MAAO5J,KAAKid,SACZvB,KAAM1b,KAAKmd,QACXxB,MAAO3b,KAAKqd,SACZzB,MAAO5b,KAAKod,SACZxR,OAAQ5L,KAAKkd,cAQhB,CACDvd,IAAK,gBACL0D,MAAO,WACDrD,KAAKiJ,IAAIjJ,KAAKiJ,GAAG0U,iBAOtB,CACDhe,IAAK,aACL0D,MAAO,SAAoBua,GACzB,IAAK,IAAI5E,EAAOxZ,UAAUC,OAAQsT,EAAO,IAAInS,MAAMoY,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAClGlG,EAAKkG,EAAO,GAAKzZ,UAAUyZ,GAG7B,IAAI4E,EAAY7d,KAAK8c,WAAWc,GAC3BC,GACLA,EAAUnM,SAAQ,SAAUoM,GAC1B,OAAOA,EAAE/d,WAAM,EAAQgT,QAQ1B,CACDpT,IAAK,iBAML0D,MAAO,WAGDrD,KAAKqD,QAAUrD,KAAKiJ,GAAG5F,OACzB8J,QAAQC,KAAK,2GAGfpN,KAAK+d,WAAa,CAChBxW,MAAOvH,KAAKoa,eACZvS,IAAK7H,KAAKmH,aAKb,CACDxH,IAAK,cACL0D,MAAO,WACLrD,KAAKyI,OAAOpF,MAAQrD,KAAKiJ,GAAG5F,MAC5BrD,KAAKqJ,OAASrJ,KAAKyI,OAAOpF,QAI3B,CACD1D,IAAK,gBACL0D,MAAO,WACL,IAAI2a,EAAmBhe,KAAKyI,OAAOgG,cAC/BwP,EAAWje,KAAKyI,OAAOpF,MACvB6a,EAAYle,KAAKyO,gBAAkBuP,GAAoBhe,KAAKqD,QAAU4a,EAC1Eje,KAAK+c,eAAiBiB,EACtBhe,KAAKqJ,OAAS4U,EACVje,KAAKiJ,GAAG5F,QAAU4a,IAAUje,KAAKiJ,GAAG5F,MAAQ4a,GAC5CC,GAAWle,KAAKme,sBAIrB,CACDxe,IAAK,gBACL0D,MAAO,SAAuB6F,GAC5B,IAAIwD,EAAOxD,EAAKwD,KACZ0R,EAAWxa,EAA2BsF,EAAM,CAAC,SAE7CmV,GAAcre,KAAKse,WAAW5R,GAC9B6R,GAAcjY,EAAetG,KAAKyI,OAAQ2V,GAC1CC,IAAYre,KAAK0M,KAAOA,GACxB6R,GAAYve,KAAKyI,OAAO+V,cAAcJ,IACtCC,GAAcE,IAAYve,KAAKye,kBAIpC,CACD9e,IAAK,eACL0D,MAAO,SAAsB8D,GACV,MAAbA,IACJnH,KAAKmH,UAAYA,EAEjBnH,KAAK0e,mBAAmBvX,MAOzB,CACDxH,IAAK,qBACL0D,MAAO,SAA4B8D,GACjC,IAAIuJ,EAAQ1Q,KAEZA,KAAK2e,qBAEL3e,KAAK4e,mBAAqBzX,EAC1BnH,KAAK6e,gBAAkBC,YAAW,WAC3BpO,EAAMzH,KAEXyH,EAAMvJ,UAAYuJ,EAAMkO,mBAExBlO,EAAMiO,wBACL,MAOJ,CACDhf,IAAK,oBACL0D,MAAO,WACLrD,KAAK+e,WAAW,SAAU/e,KAAKgf,aAE3Bhf,KAAKyI,OAAO6F,YAAYtO,KAAK+e,WAAW,WAAY/e,KAAKgf,eAO9D,CACDrf,IAAK,qBACL0D,MAAO,WACDrD,KAAK6e,kBACPI,aAAajf,KAAK6e,wBACX7e,KAAK6e,mBAKf,CACDlf,IAAK,cACL0D,MAAO,WACLrD,KAAKmH,UAAYnH,KAAKyI,OAAO0D,gBAAgBnM,KAAKmH,UAAWhB,KAI9D,CACDxG,IAAK,sBACL0D,MAAO,WACDrD,KAAKoa,iBAAmBpa,KAAKmH,WAEjCnH,KAAKsd,gBAIN,CACD3d,IAAK,KACL0D,MAAO,SAAYua,EAAI1C,GAKrB,OAJKlb,KAAK8c,WAAWc,KAAK5d,KAAK8c,WAAWc,GAAM,IAEhD5d,KAAK8c,WAAWc,GAAIhY,KAAKsV,GAElBlb,OAIR,CACDL,IAAK,MACL0D,MAAO,SAAaua,EAAI1C,GACtB,IAAKlb,KAAK8c,WAAWc,GAAK,OAAO5d,KAEjC,IAAKkb,EAEH,cADOlb,KAAK8c,WAAWc,GAChB5d,KAGT,IAAIkf,EAASlf,KAAK8c,WAAWc,GAAIvd,QAAQ6a,GAGzC,OADIgE,GAAU,GAAGlf,KAAK8c,WAAWc,GAAIzN,OAAO+O,EAAQ,GAC7Clf,OAIR,CACDL,IAAK,WACL0D,MAAO,SAAkBkX,GAMvB,GALAva,KAAKgf,YAAczE,EAEnBva,KAAK2e,sBAGA3e,KAAK+d,WAAY,OAAO/d,KAAKyd,cAClC,IAAIxV,EAAU,IAAIf,EAClBlH,KAAKiJ,GAAG5F,MAAOrD,KAAKmH,UACpBnH,KAAKqD,MAAOrD,KAAK+d,YACboB,EAAcnf,KAAKyI,OAAO6C,cAC1B8H,EAASpT,KAAKyI,OAAO0H,OAAOlI,EAAQX,eAAgBW,EAAQmX,QAAQ3f,OAAQwI,EAAQC,SAAUD,EAAQ+D,iBAAiBoH,OAGvHpH,EAAkBmT,IAAgBnf,KAAKyI,OAAO6C,cAAgBrD,EAAQ+D,gBAAkB7F,EACxFgB,EAAYnH,KAAKyI,OAAO0D,gBAAgBlE,EAAQX,eAAiB8L,EAAQpH,GAC7EhM,KAAKye,gBACLze,KAAKqf,aAAalY,UACXnH,KAAKgf,cAIb,CACDrf,IAAK,YACL0D,MAAO,WACDrD,KAAKqD,QAAUrD,KAAKiJ,GAAG5F,OACzBrD,KAAKyd,cAGPzd,KAAKyI,OAAOoB,WACZ7J,KAAKye,gBAELze,KAAKgd,mBAIN,CACDrd,IAAK,UACL0D,MAAO,SAAiBua,GACtBA,EAAG0B,iBACH1B,EAAG2B,oBAIJ,CACD5f,IAAK,WACL0D,MAAO,SAAkBua,GACvB5d,KAAKud,wBAIN,CACD5d,IAAK,WACL0D,MAAO,SAAkBua,GACvB5d,KAAKud,wBAIN,CACD5d,IAAK,UACL0D,MAAO,WACLrD,KAAKwf,gBAGLxf,KAAK8c,WAAWrd,OAAS,SAElBO,KAAKiJ,KAEb,CACDtJ,IAAK,OACL6E,IAAK,WACH,OAAOxE,KAAKyI,OAAOiE,MAErB9H,IAAK,SAAa8H,GAChB,IAAI1M,KAAKse,WAAW5R,GAEpB,GAAMA,aAAgB1D,EAAMI,QAAWpJ,KAAKyI,OAAO/G,cAAgB+K,EAAYC,GAA/E,CAOA,IAAIjE,EAAS4E,EAAW,CACtBX,KAAMA,IAERjE,EAAOgG,cAAgBzO,KAAKyI,OAAOgG,cACnCzO,KAAKyI,OAASA,OAVZzI,KAAKyI,OAAO+V,cAAc,CACxB9R,KAAMA,MAaX,CACD/M,IAAK,QACL6E,IAAK,WACH,OAAOxE,KAAKqJ,QAEdzE,IAAK,SAAaqB,GAChBjG,KAAKyI,OAAOpF,MAAQ4C,EACpBjG,KAAKye,gBACLze,KAAKsd,gBAIN,CACD3d,IAAK,gBACL6E,IAAK,WACH,OAAOxE,KAAK+c,gBAEdnY,IAAK,SAAaqB,GAChBjG,KAAKyI,OAAOgG,cAAgBxI,EAC5BjG,KAAKye,gBACLze,KAAKsd,gBAIN,CACD3d,IAAK,aACL6E,IAAK,WACH,OAAOxE,KAAKyI,OAAOoR,YAErBjV,IAAK,SAAayT,GAChBrY,KAAKyI,OAAOoR,WAAaxB,EACzBrY,KAAKye,gBACLze,KAAKsd,gBAEN,CACD3d,IAAK,iBACL6E,IAAK,WACH,OAAOxE,KAAK6e,gBAAkB7e,KAAK4e,mBAAqB5e,KAAKiJ,GAAGmR,iBAIjE,CACDza,IAAK,YACL6E,IAAK,WACH,OAAOxE,KAAK6e,gBAAkB7e,KAAK4e,mBAAqB5e,KAAKiJ,GAAGoR,cAElEzV,IAAK,SAAaiE,GACX7I,KAAKiJ,IAAOjJ,KAAKiJ,GAAGwW,WACzBzf,KAAKiJ,GAAGyW,OAAO7W,EAAKA,GAEpB7I,KAAKgd,sBAIF7T,EAhZT,GAkZAH,EAAMG,UAAYA,GAIlB,IAAIwW,GAEJ,SAAUvI,GAGR,SAASuI,IAGP,OAFAvd,EAAgBpC,KAAM2f,GAEf7b,EAA2B9D,KAAMuD,EAAgBoc,GAAY5f,MAAMC,KAAMR,YAoClF,OAzCAyD,EAAU0c,EAAYvI,GAQtBtU,EAAa6c,EAAY,CAAC,CACxBhgB,IAAK,UAML0D,MAAO,SAAiB6F,GAElBA,EAAK0W,OAAM1W,EAAKwD,KAAO,IAAIkL,OAAO1O,EAAK0W,KAAK,GAAGngB,SAEnD4E,EAAKd,EAAgBoc,EAAW/f,WAAY,UAAWI,MAAMF,KAAKE,KAAMkJ,KAMzE,CACDvJ,IAAK,aACL0D,MAAO,WAIL,IAHA,IACIsV,EADAjI,EAAQ1Q,KAGHgZ,EAAOxZ,UAAUC,OAAQsT,EAAO,IAAInS,MAAMoY,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ElG,EAAKkG,GAAQzZ,UAAUyZ,GAGzB,OAAOjZ,KAAK4f,KAAKC,MAAK,SAAUtF,GAC9B,OAAOA,EAAEla,QAAQqQ,EAAMjC,gBAAkB,OACpCkK,EAAQtU,EAAKd,EAAgBoc,EAAW/f,WAAY,aAAcI,OAAOF,KAAKC,MAAM4Y,EAAO,CAAC3Y,MAAMkZ,OAAOnG,QAI7G4M,EA1CT,CA2CE/S,GACF5D,EAAM2W,WAAaA,GAEnB,IAMIG,GAAY,IA0BZC,GAAS,gQAeTC,GAAQ,IAAIhZ,OAAO,KAAKkS,OAHf,wEAG8B,WAAWA,OAFzC,qFAEwD,OAcrE,SAAS+G,GAAKtf,EAAK0C,EAAO6c,GACxB,IAAK,IAAI3gB,EAAI,EAAGA,EAAI2gB,EAAO3gB,IACzBoB,EAAIiF,KAAKvC,GAGX,OAAO1C,EAkDT,SAASwf,GAAW9c,GAClB,OAAO2c,GAAMpe,KAAKyB,GA6CpB,SAAS+c,GAAaC,EAAKC,GACzB,IAAIC,EAAM/gB,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKsgB,GAC1EU,EAAM,GAOV,OANAA,EAAI,GAAKH,EAAIpR,KAAI,SAAUwR,GACzB,OAAOA,EAAKjf,WAAWmW,QAAQ,iBAAkB,YAChDzI,KAAKqR,GACRC,EAAI,GAAKF,EAAIrR,KAAI,SAAUwR,EAAMlhB,GAC/B,OAAa,IAANA,EAAUkhB,EAAKjf,WAAWmW,QAAQ,SAAU,QAAQA,QAAQ,WAAY,OAAS8I,EAAKjf,WAAWmW,QAAQ,iBAAkB,YACjIzI,KAAKqR,GACDC,EAAItR,KAAKqR,GAkBlB,SAASG,GAAaC,EAASC,EAASC,EAASxa,GAC/C,IAAIya,EAAYthB,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAChFuhB,EAASvZ,KAAKwZ,IAAI,GAAIF,GACtBG,EAAKN,EAAUC,EAAU,GAAKC,EAAU,KAI5C,OAFAI,EAAKzZ,KAAK0Z,MAAMD,EAAKF,GAAUA,EAExB,MAAMnf,KAAKyE,IAAmB,EAAN4a,EAAUA,EAa3C,SAASE,GAAaF,EAAIG,GACxB,IAAIN,EAAYthB,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,EAChFuhB,EAASvZ,KAAKwZ,IAAI,GAAIF,GACtBza,EAAY4a,EAAK,EAAIG,EAAQ,IAAM,IAAMA,EAAQ,IAAM,IAEvDC,EAAW7Z,KAAK8Z,IAAIL,GACpBN,EAAUnZ,KAAK+Z,MAAMF,GACrBG,EAAsC,IAAtBH,EAAWV,GAC3BC,EAAUpZ,KAAK+Z,MAAMC,GACrBX,EAAqC,IAA1BW,EAAeZ,GAc9B,OAVgB,MAFhBC,EAAUrZ,KAAK0Z,MAAML,EAAUE,GAAUA,KAGvCH,IACAC,EAAU,GAGI,KAAZD,IACFD,IACAC,EAAU,GAGL,CAACD,EAASC,EAASC,EAASxa,GAarC,IAAIob,GAAiB,SAAwBL,EAAON,GAClD,OAAO,SAAUzd,EAAOqe,GACtB,IAAI1R,EAAU0R,EAAK/V,OAAOqE,QACtBpI,EAAMwZ,EAAQ,IAAM,GAGpBzV,EAASyV,EAAQpR,EADX8Q,EAAY,GAAK,IACS9Q,EAAQ,GACxC2Q,EAAU7T,OAAOnB,EAAOtI,OACxBwd,EAAU/T,OAAOzJ,GAErB,QAASsd,IAAY/Y,GAAOiZ,EAAU,KAItCc,GAAgB,SAAuBP,GACzC,MAAO,CACL1U,KAAMyK,EACNhW,KAAM,EACNkW,GAAI+J,EAAQ,IAAM,KAIlBQ,GAAgB,SAAuBR,EAAON,GAChD,MAAO,CACLpU,KAAMyK,EACNhW,KAAM,EACNkW,GAAI,GACJ3L,SAAU+V,GAAeL,EAAON,KAIhCe,GAAgB,SAAuBT,EAAON,GAChD,MAAO,CACLpU,KAAMyK,EACNhW,KAAM,EACNkW,GAAI,GACJ3L,SAAU+V,GAAeL,EAAON,KAIhCgB,GAAmB,SAA0BhB,GAC/C,MAAO,CACLpU,KAAMyK,EACNhW,KAAM,EACNkW,GAAIvK,OAAOmT,GAAK,GAAI,EAAGa,GAAW5R,KAAK,OAIvC6S,GAAmB,SAA0BX,GAC/C,MAAO,CACL1U,KAAMiT,GACN,KAAQyB,EAAQ,CAAC,IAAK,KAAO,CAAC,IAAK,KACnC3V,QAAS,SAAiBxF,GACxB,OAAOA,EAAI+b,iBAkGbC,GAAe,SAAsBP,GACvC,IAAIQ,EAAWR,EAAKQ,SAChBC,EAAkBT,EAAKS,gBACvBC,EAAaV,EAAKU,WAClBC,EAAaX,EAAKW,WAClBC,EAAaZ,EAAKY,WAClBC,EAAab,EAAKa,WAClBzU,EAAkB4T,EAAK5T,gBACvB0U,EAAcd,EAAKc,YACnBC,EAAef,EAAKe,aACpBC,EAAWhB,EAAKgB,SAChBC,EAAUC,iBAAO,MACjBlW,EAAOmW,mBAAQ,WACjB,OA5Fe,WACjB,IAAI9K,EAAQvY,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAK,GAC5EsjB,EAAmB/K,EAAMqK,WACzBA,OAAkC,IAArBU,EAhUD,OAgU6CA,EACzDC,EAAmBhL,EAAMsK,WACzBA,OAAkC,IAArBU,EAjUD,SAiU6CA,EACzDC,EAAmBjL,EAAMuK,WACzBA,OAAkC,IAArBU,EAlUD,SAkU6CA,EACzDC,EAAmBlL,EAAMwK,WACzBA,OAAkC,IAArBU,EAnUD,IAmU6CA,EACzDC,EAAwBnL,EAAMjK,gBAC9BA,OAA4C,IAA1BoV,EApUD,IAoUuDA,EACxEC,EAAqBpL,EAAM0K,aAC3BA,OAAsC,IAAvBU,EAAgC,EAAIA,EAEnDrC,EAAY2B,EAAe,EAAI,EAAIA,EAAe,EAAI,EAAIA,EAC1D/V,EAAO,CAAC,KAAM,KAAM,SAAU,KAAM,KAAM,SAAU,KAAM,KAAM,SAAU,KAAM,SAAU,KAAM,KAAM,SAAU,KAAM,KAAM,SAAU,KAAM,KAAM,SAAU,MAUhK,OARIoU,EAAY,IACdpU,EAAKyD,OAAO,EAAG,EAAG,OAClBzD,EAAKyD,OAAO,EAAG,EAAG,MAClBzD,EAAKyD,OAAO,GAAI,EAAG,OACnBzD,EAAKyD,OAAO,GAAI,EAAG,OAId,IAAIvD,EAAc,CACvBF,KAAMA,EAAKwC,KAAK,IAChBpB,gBAAiBA,EACjBsK,SAAS,EACTxN,WAAW,EAGXiD,KAA0B,OAApBC,EACNkD,OAAQ,CACNoS,GAAI,CACF1W,KAAM0V,GAERiB,GAAI,CACF3W,KAAM2V,GAERiB,GAAI,CACF5W,KAAM4V,GAERiB,OAAQ,CACN7W,KAAM6V,GAERiB,IAAK,CACH9W,KAxWE,KA0WJ+W,GAAI3B,GAAiBhB,GACrB4C,GAAI/B,KACJgC,GAAI/B,KACJgC,GAAI/B,KACJgC,GAAI9B,KACJ+B,GAAInC,IAAc,GAClBoC,GAAInC,IAAc,EAAMd,GACxBkD,GAAInC,IAAc,EAAMf,GACxBmD,GAAIlC,IAAiB,MAkChBmC,CAAa,CAClB9B,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZzU,gBAAiBA,EACjB2U,aAAcA,MAEf,CAACL,EAAYC,EAAYC,EAAYC,EAAYzU,EAAiB2U,IACjE0B,EAAeC,uBAAY,SAAU/gB,EAAOoL,GAC9C,GAAIA,EAAchP,OAAQ,CACxB,IAAI4kB,EAtVV,SAAwBhhB,GACtB,IAAIkd,EAAM/gB,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKsgB,GAC9E,OAAkB,OAAVzc,QAA4B,IAAVA,OAAmB,EAASA,EAAMsU,QAAQ,gBAAiB4I,GAAK5I,QAAQ,SAAU4I,KAAS,GAoVhG+D,CAAejhB,GAGhC,GAzSN,SAAqBA,GACnB,OAAO0c,GAAOne,KAAKyB,GAsSDkhB,CAAYF,GAEb,CACX,IAAIG,EA7RZ,SAAkBnhB,GAChB,IAAIkd,EAAM/gB,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKsgB,GAC1E9H,EAAQ3U,EAAM2U,MAAM+H,IAAQte,MAAM,GAClC4e,EAAMrI,EAAM,GAAG+B,MAAMwG,GAAKtR,KAAI,SAAU1N,GAC1C,OAAOkjB,WAAWljB,MAEhB+e,EAAMtI,EAAM,GAAG+B,MAAMwG,GAAKtR,KAAI,SAAU1N,GAC1C,OAAOkjB,WAAWljB,MAEpB,MAAO,CAAC,CAAC8e,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIrI,EAAM,IAAK,CAACsI,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAItI,EAAM,KAoR3D0M,CAASL,GAEfhE,EAAMK,GAAa3gB,WAAM,EAAQW,EAAmB8jB,EAAI,IAAItL,OAAO,CAACsJ,KAEpElC,EAAMI,GAAa3gB,WAAM,EAAQW,EAAmB8jB,EAAI,IAAItL,OAAO,CAACsJ,KAExEE,EAASrf,EAAO,CACdoL,cAAeA,EACfwS,GAAI,CAACZ,EAAKC,GACVkE,IAAKA,UAIT9B,EAAS,GAAI,CACXjU,cAAe,GACfwS,GAAI,GACJuD,IAAK,OAGR,CAAChC,EAAaE,IACbiC,EAAWP,uBAAY,SAAUQ,EAASlY,GAC5CiW,EAAQkC,QAAU7b,EAAM4b,EAASlY,GAEjCiW,EAAQkC,QAAQC,GAAG,UAAU,WAGL,KAFFnC,EAAQkC,QAAQpW,eAGlCkU,EAAQkC,QAAQ9F,WAAW,eAG/B4D,EAAQkC,QAAQC,GAAG,YAAY,WAC7B,IAAIC,EAAmBpC,EAAQkC,QAC3BpW,EAAgBsW,EAAiBtW,cACjCpL,EAAQ0hB,EAAiB1hB,MAE7B8gB,EAAa9gB,EAAOoL,QAErB,CAAC0V,IACAa,EAAWZ,uBAAY,SAAU/gB,GAEnC,IAAI4hB,EAnXR,SAAsB5hB,EAAOyd,GAC3B,IAAIP,EAAM/gB,UAAUC,OAAS,QAAsB8F,IAAjB/F,UAAU,GAAmBA,UAAU,GAAKsgB,GAE9E,GAAIK,GAAW9c,GAAQ,CACrB,IAAI4d,EAAK5d,EAAM0W,MAAM,KACjBsG,EAAMoE,WAAWxD,EAAG,IACpBX,EAAMmE,WAAWxD,EAAG,IAGxB5d,EAAQ+c,GAFKe,GAAad,GAAK,EAAOS,GACzBK,GAAab,GAAK,EAAMQ,GACAP,GAGvC,OAAOld,GAAS,GAuWC6hB,CAAa7hB,EAAOof,EAAc,IAEjD/V,EAAKL,QAAQ4Y,GAGbtC,EAAQkC,QAAQpG,kBACf,CAACgE,EAAc/V,IAElByY,qBAAU,WACHxC,EAAQkC,SACXF,EAASzC,EAAS2C,QAASnY,KAE5B,CAACiY,EAAUzC,EAAUxV,IAExByY,qBAAU,WACR,IAAIC,EAGAzC,EAAQkC,UAAuD,QAA1CO,EAAoBlD,EAAS2C,eAA2C,IAAtBO,OAA+B,EAASA,EAAkB/hB,SAAW8e,GAC9I6C,EAAS7C,KAEV,CAACA,EAAiBD,EAAU8C,KAO7BK,GAAkB,SAAyB3D,GAC7C,IAAIU,EAAaV,EAAKU,WAClBC,EAAaX,EAAKW,WAClBC,EAAaZ,EAAKY,WAClBC,EAAab,EAAKa,WAClBzU,EAAkB4T,EAAK5T,gBACvB0U,EAAcd,EAAKc,YACnBC,EAAef,EAAKe,aACpBP,EAAWR,EAAKQ,SAChBoD,EAAmB5D,EAAKzJ,YACxBA,OAAmC,IAArBqN,EAA8B,yDAAiCA,EAC7E5C,EAAWhB,EAAKgB,SAChBP,EAAkBT,EAAKre,MACvBb,EAAQvC,EAAyByhB,EAAM,CAAC,aAAc,aAAc,aAAc,aAAc,kBAAmB,cAAe,eAAgB,WAAY,cAAe,WAAY,UAEzL6D,EAAW3C,iBAAO,MAkBtB,OAjBAX,GAAa,CACXC,SAAUqD,EACVpD,gBAAiBA,EACjBC,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZzU,gBAAiBA,EACjB0U,YAAaA,EACbC,aAAcA,EACdC,SAAUA,IAEZyC,qBAAU,WACgB,oBAAbjD,GACTA,EAASqD,EAASV,WAEnB,CAACU,EAAUrD,IACMsD,IAAMC,cAAc,QAAStmB,EAAS,GAAIqD,EAAO,CACnEkjB,aAAcvD,EACdlK,YAAaA,EACb0N,IAAKJ,EACLK,KAAM,WAIVP,GAAgBQ,UAAY,CAC1BzD,WAAY0D,IAAUC,OACtBvD,YAAasD,IAAUE,OACvBvD,aAAcqD,IAAUE,OACxB3D,WAAYyD,IAAUC,OACtBrD,SAAUoD,IAAUG,KAAKC,WACzBjO,YAAa6N,IAAUC,OACvBjY,gBAAiBgY,IAAUC,OAC3B7D,SAAU4D,IAAUG,KACpB3D,WAAYwD,IAAUC,OACtBxD,WAAYuD,IAAUC,OACtB1iB,MAAOyiB,IAAUC,QAGJV,UC1zHTc,GAAW,kCACXC,GAAO,6BAAyBD,IAChCE,GAAM,6CAAyCF,IAC/CG,GAAQ,+CAA2CH,IACnDI,GAAQ,+CAA2CJ,IA2B1CK,GAzBA,IACb,qBACEC,UAAU,8CACVC,aAAW,cAFb,SAIE,+BACE,oBAAIC,MAAO,CAAEC,OAAQ,IAArB,SACE,mBAAGC,KAAMT,GAAT,SACE,qBAAKU,IAAKT,GAAQU,IAAI,0BAG1B,6BACE,mBAAGF,KAAMT,GAAT,SACE,qBAAKU,IAAKR,GAAUS,IAAI,qBAG5B,6BACE,mBAAGF,KAAMT,GAAT,SACE,qBAAKU,IAAKP,GAAUQ,IAAI,0BCflC,IAAMC,GAAe,CACnB3jB,MAAO,GACPoL,cAAe,GACfwS,GAAI,GACJuD,IAAK,IAGDyC,GAAgB,CACpB,WACA,WACA,iBACA,yBACA,kBACA,0DAiKaC,GA9JH,KAAO,IAAD,EACsBC,mBAAS,GAD/B,mBACT3E,EADS,KACI4E,EADJ,OAEwBD,mBAAS,GAFjC,mBAET1E,EAFS,KAEK4E,EAFL,OAGgBF,mBAAS,IAHzB,mBAGTG,EAHS,KAGCC,EAHD,OAIUJ,mBAASH,IAJnB,mBAITje,EAJS,KAIFye,EAJE,KAKVtF,EAAWU,mBAEX3K,EAAc4K,mBAAQ,KAC1B,IACI4E,EAAM,GAKV,OAJIhF,EAAe,IACjBgF,EAlCN,SAAc9mB,EAAK0C,EAAO6c,GACxB,IAAK,IAAI3gB,EAAI,EAAGA,EAAI2gB,EAAO3gB,IACzBoB,EAAIiF,KAAKvC,GAEX,OAAO1C,EA8BGsf,CAAK,GAAI,EAAGwC,GAAcvT,KAAK,IACrCuY,EAAG,WAAOA,IAJF,iEAMD9P,QAAQ,SAAU8P,KAC1B,CAAChF,IAEEiF,EAActD,uBAAY,KAC9BoD,EAASR,IACTO,EAAY,MACX,IAEGpD,EAAeC,uBAAY,CAAC/gB,EAAOb,KACvC2K,QAAQwa,IAAI,eAAZ,aAA8BtkB,SAAUb,IACxCglB,EAAS,aAAEnkB,SAAUb,MACpB,IAEGolB,EAAaxD,uBAAa7J,OAE7B,IAEGsN,EAA0BzD,uBAC7B7J,IACCmN,IACA,IAAIrkB,EAAQykB,SAASvN,EAAEjb,OAAO+D,MAAO,KAAO,EAE5C+jB,EADA/jB,EAAQA,EAAQ,EAAI,EAAIA,EAAQ,EAAI,EAAIA,KAG1C,CAACqkB,IAGGK,EAA2B3D,uBAC9B7J,IACCmN,IACA,IAAIrkB,EAAQykB,SAASvN,EAAEjb,OAAO+D,MAAO,KAAO,EAE5CgkB,EADAhkB,EAAQA,EAAQ,EAAI,EAAIA,EAAQ,EAAI,EAAIA,KAG1C,CAACqkB,IAGGM,EAAqB5D,uBAAY,EAAG9kB,QAAU+D,aAClDkkB,EAAYlkB,GACZmkB,EAAS,CAAEnkB,YACV,IAEH8hB,qBAAU,QAEP,IAEH,IAAM8C,EAAM,2BACPlf,GADO,IAEVyb,IAAK0D,KAAKC,UAAUpf,EAAMyb,KAC1BvD,GAAIiH,KAAKC,UAAUpf,EAAMkY,MAG3B,OACE,yBAASwF,UAAU,0CAAnB,SACE,qBAAKA,UAAU,YAAf,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,0BAAf,UACE,oBAAIA,UAAU,wCAAd,oCAGA,sBAAKA,UAAU,MAAf,UACE,sBAAKA,UAAU,QAAf,UACE,uBAAOA,UAAU,QAAjB,6CACA,qBAAKA,UAAU,UAAf,SACE,cAAC,GAAD,CACEC,aAAW,mBACXD,UAAU,QACV2B,IAAI,OACJ5F,YAAaA,EACbC,aAAcA,EACdP,SAAW9R,GAAO8R,EAAS2C,QAAUzU,EACrCzO,KAAK,mBACL0mB,OAAQT,EACRlF,SAAUyB,EACVlM,YAAaA,EACbnK,gBAAgB,IAChBzK,MAAO0F,EAAM1F,UAGjB,oBAAGojB,UAAU,OAAb,sBAA8BxO,QAEhC,sBAAKwO,UAAU,mBAAf,UACE,qBAAKA,UAAU,UAAf,SACE,qBAAKA,UAAU,SAAf,SACE,yBACE6B,SAAU7F,EAAe,EACzBC,SAAUsF,EACV3kB,MAAOikB,EAHT,UAKE,wBAAQjkB,MAAM,GAAd,0BACC4jB,GAAchY,KAAI,CAAChG,EAAI1J,IACtB,iCAAiB0J,GAAJ1J,YAKrB,qBAAKknB,UAAU,UAAf,SACE,wBAAQA,UAAU,SAAS8B,QAASb,EAApC,wBAKJ,yCACA,sBAAKjB,UAAU,QAAf,UACE,uBAAOA,UAAU,+BAAjB,8CAGA,qBAAKA,UAAU,UAAf,SACE,uBACEA,UAAU,QACV/D,SAAUqF,EACVnC,KAAK,SACLviB,MAAOof,SAIb,sBAAKgE,UAAU,QAAf,UACE,uBAAOA,UAAU,+BAAjB,sDAGA,qBAAKA,UAAU,UAAf,SACE,uBACEA,UAAU,QACV/D,SAAUmF,EACVjC,KAAK,SACLviB,MAAOmf,SAIb,sBAAKiE,UAAU,QAAf,UACE,uBAAOA,UAAU,QAAjB,mBACA,qBAAKA,UAAU,UAAf,SACE,8BAAMyB,KAAKC,UAAUF,EAAQ,KAAM,aAIzC,cAAC,GAAD,cC3KZO,IAASC,OAAO,cAAC,GAAD,IAASnN,SAASoN,eAAe,W","file":"static/js/main.2d46c11c.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useRef, useMemo, useCallback, useEffect } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _objectWithoutPropertiesLoose$1(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties$1(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose$1(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n/**\r\n  Direction\r\n  @prop {string} NONE\r\n  @prop {string} LEFT\r\n  @prop {string} FORCE_LEFT\r\n  @prop {string} RIGHT\r\n  @prop {string} FORCE_RIGHT\r\n*/\n\nvar DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n/** */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n\n    default:\n      return direction;\n  }\n}\n\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  var arrA = Array.isArray(a),\n      arrB = Array.isArray(b),\n      i;\n\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n\n    for (i = 0; i < a.length; i++) {\n      if (!objectIncludes(a[i], b[i])) return false;\n    }\n\n    return true;\n  }\n\n  if (arrA != arrB) return false;\n\n  if (a && b && _typeof(a) === 'object' && _typeof(b) === 'object') {\n    var dateA = a instanceof Date,\n        dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    var regexpA = a instanceof RegExp,\n        regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    var keys = Object.keys(a); // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    }\n\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n\n  return false;\n}\n\n/** Provides details of changing input */\n\nvar ActionDetails =\n/*#__PURE__*/\nfunction () {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n  function ActionDetails(value, cursorPos, oldValue, oldSelection) {\n    _classCallCheck(this, ActionDetails);\n\n    this.value = value;\n    this.cursorPos = cursorPos;\n    this.oldValue = oldValue;\n    this.oldSelection = oldSelection; // double check if left part was changed (autofilling, other non-standard input triggers)\n\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n  }\n  /**\r\n    Start changing position\r\n    @readonly\r\n  */\n\n\n  _createClass(ActionDetails, [{\n    key: \"startChangePos\",\n    get: function get() {\n      return Math.min(this.cursorPos, this.oldSelection.start);\n    }\n    /**\r\n      Inserted symbols count\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"insertedCount\",\n    get: function get() {\n      return this.cursorPos - this.startChangePos;\n    }\n    /**\r\n      Inserted symbols\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"inserted\",\n    get: function get() {\n      return this.value.substr(this.startChangePos, this.insertedCount);\n    }\n    /**\r\n      Removed symbols count\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"removedCount\",\n    get: function get() {\n      // Math.max for opposite operation\n      return Math.max(this.oldSelection.end - this.startChangePos || // for Delete\n      this.oldValue.length - this.value.length, 0);\n    }\n    /**\r\n      Removed symbols\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"removed\",\n    get: function get() {\n      return this.oldValue.substr(this.startChangePos, this.removedCount);\n    }\n    /**\r\n      Unchanged head symbols\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"head\",\n    get: function get() {\n      return this.value.substring(0, this.startChangePos);\n    }\n    /**\r\n      Unchanged tail symbols\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"tail\",\n    get: function get() {\n      return this.value.substring(this.startChangePos + this.insertedCount);\n    }\n    /**\r\n      Remove direction\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"removeDirection\",\n    get: function get() {\n      if (!this.removedCount || this.insertedCount) return DIRECTION.NONE; // align right if delete at right or if range removed (event with backspace)\n\n      return this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos ? DIRECTION.RIGHT : DIRECTION.LEFT;\n    }\n  }]);\n\n  return ActionDetails;\n}();\n\n/**\r\n  Provides details of changing model value\r\n  @param {Object} [details]\r\n  @param {string} [details.inserted] - Inserted symbols\r\n  @param {boolean} [details.skip] - Can skip chars\r\n  @param {number} [details.removeCount] - Removed symbols count\r\n  @param {number} [details.tailShift] - Additional offset if any changes occurred before tail\r\n*/\nvar ChangeDetails =\n/*#__PURE__*/\nfunction () {\n  /** Inserted symbols */\n\n  /** Can skip chars */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n  function ChangeDetails(details) {\n    _classCallCheck(this, ChangeDetails);\n\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      skip: false,\n      tailShift: 0\n    }, details);\n  }\n  /**\r\n    Aggregate changes\r\n    @returns {ChangeDetails} `this`\r\n  */\n\n\n  _createClass(ChangeDetails, [{\n    key: \"aggregate\",\n    value: function aggregate(details) {\n      this.rawInserted += details.rawInserted;\n      this.skip = this.skip || details.skip;\n      this.inserted += details.inserted;\n      this.tailShift += details.tailShift;\n      return this;\n    }\n    /** Total offset considering all changes */\n\n  }, {\n    key: \"offset\",\n    get: function get() {\n      return this.tailShift + this.inserted.length;\n    }\n  }]);\n\n  return ChangeDetails;\n}();\n\n/** Provides details of continuous extracted tail */\nvar ContinuousTailDetails =\n/*#__PURE__*/\nfunction () {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n  function ContinuousTailDetails() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var stop = arguments.length > 2 ? arguments[2] : undefined;\n\n    _classCallCheck(this, ContinuousTailDetails);\n\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n\n  _createClass(ContinuousTailDetails, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.value;\n    }\n  }, {\n    key: \"extend\",\n    value: function extend(tail) {\n      this.value += String(tail);\n    }\n  }, {\n    key: \"appendTo\",\n    value: function appendTo(masked) {\n      return masked.append(this.toString(), {\n        tail: true\n      }).aggregate(masked._appendPlaceholder());\n    }\n  }, {\n    key: \"shiftBefore\",\n    value: function shiftBefore(pos) {\n      if (this.from >= pos || !this.value.length) return '';\n      var shiftChar = this.value[0];\n      this.value = this.value.slice(1);\n      return shiftChar;\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        value: this.value,\n        from: this.from,\n        stop: this.stop\n      };\n    },\n    set: function set(state) {\n      Object.assign(this, state);\n    }\n  }]);\n\n  return ContinuousTailDetails;\n}();\n\n/**\r\n * Applies mask on element.\r\n * @constructor\r\n * @param {HTMLInputElement|HTMLTextAreaElement|MaskElement} el - Element to apply mask\r\n * @param {Object} opts - Custom mask options\r\n * @return {InputMask}\r\n */\nfunction IMask(el) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\n/** Supported mask type */\n\n/** Provides common masking stuff */\nvar Masked =\n/*#__PURE__*/\nfunction () {\n  // $Shape<MaskedOptions>; TODO after fix https://github.com/facebook/flow/issues/4773\n\n  /** @type {Mask} */\n\n  /** */\n  // $FlowFixMe no ideas\n\n  /** Transforms value before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing in the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse strgin to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n  function Masked(opts) {\n    _classCallCheck(this, Masked);\n\n    this._value = '';\n\n    this._update(Object.assign({}, Masked.DEFAULTS, {}, opts));\n\n    this.isInitialized = true;\n  }\n  /** Sets and applies new options */\n\n\n  _createClass(Masked, [{\n    key: \"updateOptions\",\n    value: function updateOptions(opts) {\n      if (!Object.keys(opts).length) return;\n      this.withValueRefresh(this._update.bind(this, opts));\n    }\n    /**\r\n      Sets new options\r\n      @protected\r\n    */\n\n  }, {\n    key: \"_update\",\n    value: function _update(opts) {\n      Object.assign(this, opts);\n    }\n    /** Mask state */\n\n  }, {\n    key: \"reset\",\n\n    /** Resets value */\n    value: function reset() {\n      this._value = '';\n    }\n    /** */\n\n  }, {\n    key: \"resolve\",\n\n    /** Resolve new value */\n    value: function resolve(value) {\n      this.reset();\n      this.append(value, {\n        input: true\n      }, '');\n      this.doCommit();\n      return this.value;\n    }\n    /** */\n\n  }, {\n    key: \"nearestInputPos\",\n\n    /** Finds nearest input position in direction */\n    value: function nearestInputPos(cursorPos, direction) {\n      return cursorPos;\n    }\n    /** Extracts value in range considering flags */\n\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      return this.value.slice(fromPos, toPos);\n    }\n    /** Extracts tail in range */\n\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n    }\n    /** Appends tail */\n    // $FlowFixMe no ideas\n\n  }, {\n    key: \"appendTail\",\n    value: function appendTail(tail) {\n      if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n      return tail.appendTo(this);\n    }\n    /** Appends char */\n\n  }, {\n    key: \"_appendCharRaw\",\n    value: function _appendCharRaw(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      ch = this.doPrepare(ch, flags);\n      if (!ch) return new ChangeDetails();\n      this._value += ch;\n      return new ChangeDetails({\n        inserted: ch,\n        rawInserted: ch\n      });\n    }\n    /** Appends char */\n\n  }, {\n    key: \"_appendChar\",\n    value: function _appendChar(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var checkTail = arguments.length > 2 ? arguments[2] : undefined;\n      var consistentState = this.state;\n\n      var details = this._appendCharRaw(ch, flags);\n\n      if (details.inserted) {\n        var consistentTail;\n        var appended = this.doValidate(flags) !== false;\n\n        if (appended && checkTail != null) {\n          // validation ok, check tail\n          var beforeTailState = this.state;\n\n          if (this.overwrite) {\n            consistentTail = checkTail.state;\n            checkTail.shiftBefore(this.value.length);\n          }\n\n          var tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted === checkTail.toString(); // if ok, rollback state after tail\n\n          if (appended && tailDetails.inserted) this.state = beforeTailState;\n        } // revert all if something went wrong\n\n\n        if (!appended) {\n          details = new ChangeDetails();\n          this.state = consistentState;\n          if (checkTail && consistentTail) checkTail.state = consistentTail;\n        }\n      }\n\n      return details;\n    }\n    /** Appends optional placeholder at end */\n\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      return new ChangeDetails();\n    }\n    /** Appends symbols considering flags */\n    // $FlowFixMe no ideas\n\n  }, {\n    key: \"append\",\n    value: function append(str, flags, tail) {\n      if (!isString(str)) throw new Error('value should be string');\n      var details = new ChangeDetails();\n      var checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n      if (flags.tail) flags._beforeTailState = this.state;\n\n      for (var ci = 0; ci < str.length; ++ci) {\n        details.aggregate(this._appendChar(str[ci], flags, checkTail));\n      } // append tail but aggregate only tailShift\n\n\n      if (checkTail != null) {\n        details.tailShift += this.appendTail(checkTail).tailShift; // TODO it's a good idea to clear state after appending ends\n        // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n        // this._resetBeforeTailState();\n      }\n\n      return details;\n    }\n    /** */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      this._value = this.value.slice(0, fromPos) + this.value.slice(toPos);\n      return new ChangeDetails();\n    }\n    /** Calls function and reapplies current value */\n\n  }, {\n    key: \"withValueRefresh\",\n    value: function withValueRefresh(fn) {\n      if (this._refreshing || !this.isInitialized) return fn();\n      this._refreshing = true;\n      var rawInput = this.rawInputValue;\n      var value = this.value;\n      var ret = fn();\n      this.rawInputValue = rawInput; // append lost trailing chars at end\n\n      if (this.value !== value && value.indexOf(this.value) === 0) {\n        this.append(value.slice(this.value.length), {}, '');\n      }\n\n      delete this._refreshing;\n      return ret;\n    }\n    /** */\n\n  }, {\n    key: \"runIsolated\",\n    value: function runIsolated(fn) {\n      if (this._isolated || !this.isInitialized) return fn(this);\n      this._isolated = true;\n      var state = this.state;\n      var ret = fn(this);\n      this.state = state;\n      delete this._isolated;\n      return ret;\n    }\n    /**\r\n      Prepares string before mask processing\r\n      @protected\r\n    */\n\n  }, {\n    key: \"doPrepare\",\n    value: function doPrepare(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.prepare ? this.prepare(str, this, flags) : str;\n    }\n    /**\r\n      Validates if value is acceptable\r\n      @protected\r\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate(flags) {\n      return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n    }\n    /**\r\n      Does additional processing in the end of editing\r\n      @protected\r\n    */\n\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      if (this.commit) this.commit(this.value, this);\n    }\n    /** */\n\n  }, {\n    key: \"doFormat\",\n    value: function doFormat(value) {\n      return this.format ? this.format(value, this) : value;\n    }\n    /** */\n\n  }, {\n    key: \"doParse\",\n    value: function doParse(str) {\n      return this.parse ? this.parse(str, this) : str;\n    }\n    /** */\n\n  }, {\n    key: \"splice\",\n    value: function splice(start, deleteCount, inserted, removeDirection) {\n      var tailPos = start + deleteCount;\n      var tail = this.extractTail(tailPos);\n      var startChangePos = this.nearestInputPos(start, removeDirection);\n      var changeDetails = new ChangeDetails({\n        tailShift: startChangePos - start // adjust tailShift if start was aligned\n\n      }).aggregate(this.remove(startChangePos)).aggregate(this.append(inserted, {\n        input: true\n      }, tail));\n      return changeDetails;\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        _value: this.value\n      };\n    },\n    set: function set(state) {\n      this._value = state._value;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    },\n    set: function set(value) {\n      this.resolve(value);\n    }\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.value;\n    },\n    set: function set(value) {\n      this.reset();\n      this.append(value, {}, '');\n      this.doCommit();\n    }\n    /** */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.doParse(this.value);\n    },\n    set: function set(value) {\n      this.value = this.doFormat(value);\n    }\n    /** Value that includes raw user input */\n\n  }, {\n    key: \"rawInputValue\",\n    get: function get() {\n      return this.extractInput(0, this.value.length, {\n        raw: true\n      });\n    },\n    set: function set(value) {\n      this.reset();\n      this.append(value, {\n        raw: true\n      }, '');\n      this.doCommit();\n    }\n    /** */\n\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return true;\n    }\n  }]);\n\n  return Masked;\n}();\nMasked.DEFAULTS = {\n  format: function format(v) {\n    return v;\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\nIMask.Masked = Masked;\n\n/** Get Masked class by mask type */\n\nfunction maskedClass(mask) {\n  if (mask == null) {\n    throw new Error('mask property should be defined');\n  } // $FlowFixMe\n\n\n  if (mask instanceof RegExp) return IMask.MaskedRegExp; // $FlowFixMe\n\n  if (isString(mask)) return IMask.MaskedPattern; // $FlowFixMe\n\n  if (mask instanceof Date || mask === Date) return IMask.MaskedDate; // $FlowFixMe\n\n  if (mask instanceof Number || typeof mask === 'number' || mask === Number) return IMask.MaskedNumber; // $FlowFixMe\n\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic; // $FlowFixMe\n\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask; // $FlowFixMe\n\n  if (mask instanceof Function) return IMask.MaskedFunction; // $FlowFixMe\n\n  if (mask instanceof IMask.Masked) return mask.constructor;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  // $FlowFixMe\n\n  return IMask.Masked;\n}\n/** Creates new {@link Masked} depending on mask type */\n\nfunction createMask(opts) {\n  // $FlowFixMe\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  opts = Object.assign({}, opts);\n  var mask = opts.mask; // $FlowFixMe\n\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask;\n  var MaskedClass = maskedClass(mask);\n  if (!MaskedClass) throw new Error('Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.');\n  return new MaskedClass(opts);\n}\nIMask.createMask = createMask;\n\nvar DEFAULT_INPUT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n/** */\n\nvar PatternInputDefinition =\n/*#__PURE__*/\nfunction () {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n  function PatternInputDefinition(opts) {\n    _classCallCheck(this, PatternInputDefinition);\n\n    var mask = opts.mask,\n        blockOpts = _objectWithoutProperties$1(opts, [\"mask\"]);\n\n    this.masked = createMask({\n      mask: mask\n    });\n    Object.assign(this, blockOpts);\n  }\n\n  _createClass(PatternInputDefinition, [{\n    key: \"reset\",\n    value: function reset() {\n      this._isFilled = false;\n      this.masked.reset();\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n      if (fromPos === 0 && toPos >= 1) {\n        this._isFilled = false;\n        return this.masked.remove(fromPos, toPos);\n      }\n\n      return new ChangeDetails();\n    }\n  }, {\n    key: \"_appendChar\",\n    value: function _appendChar(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this._isFilled) return new ChangeDetails();\n      var state = this.masked.state; // simulate input\n\n      var details = this.masked._appendChar(str, flags);\n\n      if (details.inserted && this.doValidate(flags) === false) {\n        details.inserted = details.rawInserted = '';\n        this.masked.state = state;\n      }\n\n      if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n        details.inserted = this.placeholderChar;\n      }\n\n      details.skip = !details.inserted && !this.isOptional;\n      this._isFilled = Boolean(details.inserted);\n      return details;\n    }\n  }, {\n    key: \"append\",\n    value: function append() {\n      var _this$masked;\n\n      return (_this$masked = this.masked).append.apply(_this$masked, arguments);\n    }\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      var details = new ChangeDetails();\n      if (this._isFilled || this.isOptional) return details;\n      this._isFilled = true;\n      details.inserted = this.placeholderChar;\n      return details;\n    }\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var _this$masked2;\n\n      return (_this$masked2 = this.masked).extractTail.apply(_this$masked2, arguments);\n    }\n  }, {\n    key: \"appendTail\",\n    value: function appendTail() {\n      var _this$masked3;\n\n      return (_this$masked3 = this.masked).appendTail.apply(_this$masked3, arguments);\n    }\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var flags = arguments.length > 2 ? arguments[2] : undefined;\n      return this.masked.extractInput(fromPos, toPos, flags);\n    }\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n      var minPos = 0;\n      var maxPos = this.value.length;\n      var boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n\n      switch (direction) {\n        case DIRECTION.LEFT:\n        case DIRECTION.FORCE_LEFT:\n          return this.isComplete ? boundPos : minPos;\n\n        case DIRECTION.RIGHT:\n        case DIRECTION.FORCE_RIGHT:\n          return this.isComplete ? boundPos : maxPos;\n\n        case DIRECTION.NONE:\n        default:\n          return boundPos;\n      }\n    }\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _this$masked4, _this$parent;\n\n      return (_this$masked4 = this.masked).doValidate.apply(_this$masked4, arguments) && (!this.parent || (_this$parent = this.parent).doValidate.apply(_this$parent, arguments));\n    }\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      this.masked.doCommit();\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.masked.value || (this._isFilled && !this.isOptional ? this.placeholderChar : '');\n    }\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.masked.unmaskedValue;\n    }\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return Boolean(this.masked.value) || this.isOptional;\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        masked: this.masked.state,\n        _isFilled: this._isFilled\n      };\n    },\n    set: function set(state) {\n      this.masked.state = state.masked;\n      this._isFilled = state._isFilled;\n    }\n  }]);\n\n  return PatternInputDefinition;\n}();\n\nvar PatternFixedDefinition =\n/*#__PURE__*/\nfunction () {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n  function PatternFixedDefinition(opts) {\n    _classCallCheck(this, PatternFixedDefinition);\n\n    Object.assign(this, opts);\n    this._value = '';\n  }\n\n  _createClass(PatternFixedDefinition, [{\n    key: \"reset\",\n    value: function reset() {\n      this._isRawInput = false;\n      this._value = '';\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n      this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n      if (!this._value) this._isRawInput = false;\n      return new ChangeDetails();\n    }\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n      var minPos = 0;\n      var maxPos = this._value.length;\n\n      switch (direction) {\n        case DIRECTION.LEFT:\n        case DIRECTION.FORCE_LEFT:\n          return minPos;\n\n        case DIRECTION.NONE:\n        case DIRECTION.RIGHT:\n        case DIRECTION.FORCE_RIGHT:\n        default:\n          return maxPos;\n      }\n    }\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n    }\n  }, {\n    key: \"_appendChar\",\n    value: function _appendChar(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var details = new ChangeDetails();\n      if (this._value) return details;\n      var appended = this.char === str[0];\n      var isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && !flags.tail;\n      if (isResolved) details.rawInserted = this.char;\n      this._value = details.inserted = this.char;\n      this._isRawInput = isResolved && (flags.raw || flags.input);\n      return details;\n    }\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      var details = new ChangeDetails();\n      if (this._value) return details;\n      this._value = details.inserted = this.char;\n      return details;\n    }\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      return new ContinuousTailDetails('');\n    } // $FlowFixMe no ideas\n\n  }, {\n    key: \"appendTail\",\n    value: function appendTail(tail) {\n      if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n      return tail.appendTo(this);\n    }\n  }, {\n    key: \"append\",\n    value: function append(str, flags, tail) {\n      var details = this._appendChar(str, flags);\n\n      if (tail != null) {\n        details.tailShift += this.appendTail(tail).tailShift;\n      }\n\n      return details;\n    }\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {}\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    }\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.isUnmasking ? this.value : '';\n    }\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        _value: this._value,\n        _isRawInput: this._isRawInput\n      };\n    },\n    set: function set(state) {\n      Object.assign(this, state);\n    }\n  }]);\n\n  return PatternFixedDefinition;\n}();\n\nvar ChunksTailDetails =\n/*#__PURE__*/\nfunction () {\n  /** */\n  function ChunksTailDetails() {\n    var chunks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, ChunksTailDetails);\n\n    this.chunks = chunks;\n    this.from = from;\n  }\n\n  _createClass(ChunksTailDetails, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.chunks.map(String).join('');\n    } // $FlowFixMe no ideas\n\n  }, {\n    key: \"extend\",\n    value: function extend(tailChunk) {\n      if (!String(tailChunk)) return;\n      if (isString(tailChunk)) tailChunk = new ContinuousTailDetails(String(tailChunk));\n      var lastChunk = this.chunks[this.chunks.length - 1];\n      var extendLast = lastChunk && ( // if stops are same or tail has no stop\n      lastChunk.stop === tailChunk.stop || tailChunk.stop == null) && // if tail chunk goes just after last chunk\n      tailChunk.from === lastChunk.from + lastChunk.toString().length;\n\n      if (tailChunk instanceof ContinuousTailDetails) {\n        // check the ability to extend previous chunk\n        if (extendLast) {\n          // extend previous chunk\n          lastChunk.extend(tailChunk.toString());\n        } else {\n          // append new chunk\n          this.chunks.push(tailChunk);\n        }\n      } else if (tailChunk instanceof ChunksTailDetails) {\n        if (tailChunk.stop == null) {\n          // unwrap floating chunks to parent, keeping `from` pos\n          var firstTailChunk;\n\n          while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n            firstTailChunk = tailChunk.chunks.shift();\n            firstTailChunk.from += tailChunk.from;\n            this.extend(firstTailChunk);\n          }\n        } // if tail chunk still has value\n\n\n        if (tailChunk.toString()) {\n          // if chunks contains stops, then popup stop to container\n          tailChunk.stop = tailChunk.blockIndex;\n          this.chunks.push(tailChunk);\n        }\n      }\n    }\n  }, {\n    key: \"appendTo\",\n    value: function appendTo(masked) {\n      // $FlowFixMe\n      if (!(masked instanceof IMask.MaskedPattern)) {\n        var tail = new ContinuousTailDetails(this.toString());\n        return tail.appendTo(masked);\n      }\n\n      var details = new ChangeDetails();\n\n      for (var ci = 0; ci < this.chunks.length && !details.skip; ++ci) {\n        var chunk = this.chunks[ci];\n\n        var lastBlockIter = masked._mapPosToBlock(masked.value.length);\n\n        var stop = chunk.stop;\n        var chunkBlock = void 0;\n\n        if (stop != null && ( // if block not found or stop is behind lastBlock\n        !lastBlockIter || lastBlockIter.index <= stop)) {\n          if (chunk instanceof ChunksTailDetails || // for continuous block also check if stop is exist\n          masked._stops.indexOf(stop) >= 0) {\n            details.aggregate(masked._appendPlaceholder(stop));\n          }\n\n          chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n        }\n\n        if (chunkBlock) {\n          var tailDetails = chunkBlock.appendTail(chunk);\n          tailDetails.skip = false; // always ignore skip, it will be set on last\n\n          details.aggregate(tailDetails);\n          masked._value += tailDetails.inserted; // get not inserted chars\n\n          var remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n          if (remainChars) details.aggregate(masked.append(remainChars, {\n            tail: true\n          }));\n        } else {\n          details.aggregate(masked.append(chunk.toString(), {\n            tail: true\n          }));\n        }\n      }\n      return details;\n    }\n  }, {\n    key: \"shiftBefore\",\n    value: function shiftBefore(pos) {\n      if (this.from >= pos || !this.chunks.length) return '';\n      var chunkShiftPos = pos - this.from;\n      var ci = 0;\n\n      while (ci < this.chunks.length) {\n        var chunk = this.chunks[ci];\n        var shiftChar = chunk.shiftBefore(chunkShiftPos);\n\n        if (chunk.toString()) {\n          // chunk still contains value\n          // but not shifted - means no more available chars to shift\n          if (!shiftChar) break;\n          ++ci;\n        } else {\n          // clean if chunk has no value\n          this.chunks.splice(ci, 1);\n        }\n\n        if (shiftChar) return shiftChar;\n      }\n\n      return '';\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        chunks: this.chunks.map(function (c) {\n          return c.state;\n        }),\n        from: this.from,\n        stop: this.stop,\n        blockIndex: this.blockIndex\n      };\n    },\n    set: function set(state) {\n      var chunks = state.chunks,\n          props = _objectWithoutProperties$1(state, [\"chunks\"]);\n\n      Object.assign(this, props);\n      this.chunks = chunks.map(function (cstate) {\n        var chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails(); // $FlowFixMe already checked above\n\n        chunk.state = cstate;\n        return chunk;\n      });\n    }\n  }]);\n\n  return ChunksTailDetails;\n}();\n\n/** Masking by RegExp */\n\nvar MaskedRegExp =\n/*#__PURE__*/\nfunction (_Masked) {\n  _inherits(MaskedRegExp, _Masked);\n\n  function MaskedRegExp() {\n    _classCallCheck(this, MaskedRegExp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MaskedRegExp).apply(this, arguments));\n  }\n\n  _createClass(MaskedRegExp, [{\n    key: \"_update\",\n\n    /**\r\n      @override\r\n      @param {Object} opts\r\n    */\n    value: function _update(opts) {\n      if (opts.mask) opts.validate = function (value) {\n        return value.search(opts.mask) >= 0;\n      };\n\n      _get(_getPrototypeOf(MaskedRegExp.prototype), \"_update\", this).call(this, opts);\n    }\n  }]);\n\n  return MaskedRegExp;\n}(Masked);\nIMask.MaskedRegExp = MaskedRegExp;\n\n/**\r\n  Pattern mask\r\n  @param {Object} opts\r\n  @param {Object} opts.blocks\r\n  @param {Object} opts.definitions\r\n  @param {string} opts.placeholderChar\r\n  @param {boolean} opts.lazy\r\n*/\nvar MaskedPattern =\n/*#__PURE__*/\nfunction (_Masked) {\n  _inherits(MaskedPattern, _Masked);\n\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Show placeholder only when needed */\n  function MaskedPattern() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, MaskedPattern);\n\n    // TODO type $Shape<MaskedPatternOptions>={} does not work\n    opts.definitions = Object.assign({}, DEFAULT_INPUT_DEFINITIONS, opts.definitions);\n    return _possibleConstructorReturn(this, _getPrototypeOf(MaskedPattern).call(this, Object.assign({}, MaskedPattern.DEFAULTS, {}, opts)));\n  }\n  /**\r\n    @override\r\n    @param {Object} opts\r\n  */\n\n\n  _createClass(MaskedPattern, [{\n    key: \"_update\",\n    value: function _update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n\n      _get(_getPrototypeOf(MaskedPattern.prototype), \"_update\", this).call(this, opts);\n\n      this._rebuildMask();\n    }\n    /** */\n\n  }, {\n    key: \"_rebuildMask\",\n    value: function _rebuildMask() {\n      var _this = this;\n\n      var defs = this.definitions;\n      this._blocks = [];\n      this._stops = [];\n      this._maskedBlocks = {};\n      var pattern = this.mask;\n      if (!pattern || !defs) return;\n      var unmaskingBlock = false;\n      var optionalBlock = false;\n\n      for (var i = 0; i < pattern.length; ++i) {\n        if (this.blocks) {\n          var _ret = function () {\n            var p = pattern.slice(i);\n            var bNames = Object.keys(_this.blocks).filter(function (bName) {\n              return p.indexOf(bName) === 0;\n            }); // order by key length\n\n            bNames.sort(function (a, b) {\n              return b.length - a.length;\n            }); // use block name with max length\n\n            var bName = bNames[0];\n\n            if (bName) {\n              var maskedBlock = createMask(Object.assign({\n                parent: _this,\n                lazy: _this.lazy,\n                placeholderChar: _this.placeholderChar,\n                overwrite: _this.overwrite\n              }, _this.blocks[bName]));\n\n              if (maskedBlock) {\n                _this._blocks.push(maskedBlock); // store block index\n\n\n                if (!_this._maskedBlocks[bName]) _this._maskedBlocks[bName] = [];\n\n                _this._maskedBlocks[bName].push(_this._blocks.length - 1);\n              }\n\n              i += bName.length - 1;\n              return \"continue\";\n            }\n          }();\n\n          if (_ret === \"continue\") continue;\n        }\n\n        var char = pattern[i];\n\n        var _isInput = char in defs;\n\n        if (char === MaskedPattern.STOP_CHAR) {\n          this._stops.push(this._blocks.length);\n\n          continue;\n        }\n\n        if (char === '{' || char === '}') {\n          unmaskingBlock = !unmaskingBlock;\n          continue;\n        }\n\n        if (char === '[' || char === ']') {\n          optionalBlock = !optionalBlock;\n          continue;\n        }\n\n        if (char === MaskedPattern.ESCAPE_CHAR) {\n          ++i;\n          char = pattern[i];\n          if (!char) break;\n          _isInput = false;\n        }\n\n        var def = _isInput ? new PatternInputDefinition({\n          parent: this,\n          lazy: this.lazy,\n          placeholderChar: this.placeholderChar,\n          mask: defs[char],\n          isOptional: optionalBlock\n        }) : new PatternFixedDefinition({\n          char: char,\n          isUnmasking: unmaskingBlock\n        });\n\n        this._blocks.push(def);\n      }\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"reset\",\n\n    /**\r\n      @override\r\n    */\n    value: function reset() {\n      _get(_getPrototypeOf(MaskedPattern.prototype), \"reset\", this).call(this);\n\n      this._blocks.forEach(function (b) {\n        return b.reset();\n      });\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"doCommit\",\n\n    /**\r\n      @override\r\n    */\n    value: function doCommit() {\n      this._blocks.forEach(function (b) {\n        return b.doCommit();\n      });\n\n      _get(_getPrototypeOf(MaskedPattern.prototype), \"doCommit\", this).call(this);\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"appendTail\",\n\n    /**\r\n      @override\r\n    */\n    value: function appendTail(tail) {\n      return _get(_getPrototypeOf(MaskedPattern.prototype), \"appendTail\", this).call(this, tail).aggregate(this._appendPlaceholder());\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"_appendCharRaw\",\n    value: function _appendCharRaw(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      ch = this.doPrepare(ch, flags);\n\n      var blockIter = this._mapPosToBlock(this.value.length);\n\n      var details = new ChangeDetails();\n      if (!blockIter) return details;\n\n      for (var bi = blockIter.index;; ++bi) {\n        var _block = this._blocks[bi];\n        if (!_block) break;\n\n        var blockDetails = _block._appendChar(ch, flags);\n\n        var skip = blockDetails.skip;\n        details.aggregate(blockDetails);\n        if (skip || blockDetails.rawInserted) break; // go next char\n      }\n\n      return details;\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var _this2 = this;\n\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var chunkTail = new ChunksTailDetails();\n      if (fromPos === toPos) return chunkTail;\n\n      this._forEachBlocksInRange(fromPos, toPos, function (b, bi, bFromPos, bToPos) {\n        var blockChunk = b.extractTail(bFromPos, bToPos);\n        blockChunk.stop = _this2._findStopBefore(bi);\n        blockChunk.from = _this2._blockStartPos(bi);\n        if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n        chunkTail.extend(blockChunk);\n      });\n\n      return chunkTail;\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (fromPos === toPos) return '';\n      var input = '';\n\n      this._forEachBlocksInRange(fromPos, toPos, function (b, _, fromPos, toPos) {\n        input += b.extractInput(fromPos, toPos, flags);\n      });\n\n      return input;\n    }\n  }, {\n    key: \"_findStopBefore\",\n    value: function _findStopBefore(blockIndex) {\n      var stopBefore;\n\n      for (var si = 0; si < this._stops.length; ++si) {\n        var stop = this._stops[si];\n        if (stop <= blockIndex) stopBefore = stop;else break;\n      }\n\n      return stopBefore;\n    }\n    /** Appends placeholder depending on laziness */\n\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder(toBlockIndex) {\n      var _this3 = this;\n\n      var details = new ChangeDetails();\n      if (this.lazy && toBlockIndex == null) return details;\n\n      var startBlockIter = this._mapPosToBlock(this.value.length);\n\n      if (!startBlockIter) return details;\n      var startBlockIndex = startBlockIter.index;\n      var endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n\n      this._blocks.slice(startBlockIndex, endBlockIndex).forEach(function (b) {\n        if (!b.lazy || toBlockIndex != null) {\n          // $FlowFixMe `_blocks` may not be present\n          var args = b._blocks != null ? [b._blocks.length] : [];\n\n          var bDetails = b._appendPlaceholder.apply(b, args);\n\n          _this3._value += bDetails.inserted;\n          details.aggregate(bDetails);\n        }\n      });\n\n      return details;\n    }\n    /** Finds block in pos */\n\n  }, {\n    key: \"_mapPosToBlock\",\n    value: function _mapPosToBlock(pos) {\n      var accVal = '';\n\n      for (var bi = 0; bi < this._blocks.length; ++bi) {\n        var _block2 = this._blocks[bi];\n        var blockStartPos = accVal.length;\n        accVal += _block2.value;\n\n        if (pos <= accVal.length) {\n          return {\n            index: bi,\n            offset: pos - blockStartPos\n          };\n        }\n      }\n    }\n    /** */\n\n  }, {\n    key: \"_blockStartPos\",\n    value: function _blockStartPos(blockIndex) {\n      return this._blocks.slice(0, blockIndex).reduce(function (pos, b) {\n        return pos += b.value.length;\n      }, 0);\n    }\n    /** */\n\n  }, {\n    key: \"_forEachBlocksInRange\",\n    value: function _forEachBlocksInRange(fromPos) {\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var fn = arguments.length > 2 ? arguments[2] : undefined;\n\n      var fromBlockIter = this._mapPosToBlock(fromPos);\n\n      if (fromBlockIter) {\n        var toBlockIter = this._mapPosToBlock(toPos); // process first block\n\n\n        var isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n        var fromBlockStartPos = fromBlockIter.offset;\n        var fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].value.length;\n        fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n\n        if (toBlockIter && !isSameBlock) {\n          // process intermediate blocks\n          for (var bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n            fn(this._blocks[bi], bi, 0, this._blocks[bi].value.length);\n          } // process last block\n\n\n          fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n        }\n      }\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n      var removeDetails = _get(_getPrototypeOf(MaskedPattern.prototype), \"remove\", this).call(this, fromPos, toPos);\n\n      this._forEachBlocksInRange(fromPos, toPos, function (b, _, bFromPos, bToPos) {\n        removeDetails.aggregate(b.remove(bFromPos, bToPos));\n      });\n\n      return removeDetails;\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n      // TODO refactor - extract alignblock\n      var beginBlockData = this._mapPosToBlock(cursorPos) || {\n        index: 0,\n        offset: 0\n      };\n      var beginBlockOffset = beginBlockData.offset,\n          beginBlockIndex = beginBlockData.index;\n      var beginBlock = this._blocks[beginBlockIndex];\n      if (!beginBlock) return cursorPos;\n      var beginBlockCursorPos = beginBlockOffset; // if position inside block - try to adjust it\n\n      if (beginBlockCursorPos !== 0 && beginBlockCursorPos < beginBlock.value.length) {\n        beginBlockCursorPos = beginBlock.nearestInputPos(beginBlockOffset, forceDirection(direction));\n      }\n\n      var cursorAtRight = beginBlockCursorPos === beginBlock.value.length;\n      var cursorAtLeft = beginBlockCursorPos === 0; //  cursor is INSIDE first block (not at bounds)\n\n      if (!cursorAtLeft && !cursorAtRight) return this._blockStartPos(beginBlockIndex) + beginBlockCursorPos;\n      var searchBlockIndex = cursorAtRight ? beginBlockIndex + 1 : beginBlockIndex;\n\n      if (direction === DIRECTION.NONE) {\n        // NONE direction used to calculate start input position if no chars were removed\n        // FOR NONE:\n        // -\n        // input|any\n        // ->\n        //  any|input\n        // <-\n        //  filled-input|any\n        // check if first block at left is input\n        if (searchBlockIndex > 0) {\n          var blockIndexAtLeft = searchBlockIndex - 1;\n          var blockAtLeft = this._blocks[blockIndexAtLeft];\n          var blockInputPos = blockAtLeft.nearestInputPos(0, DIRECTION.NONE); // is input\n\n          if (!blockAtLeft.value.length || blockInputPos !== blockAtLeft.value.length) {\n            return this._blockStartPos(searchBlockIndex);\n          }\n        } // ->\n\n\n        var firstInputAtRight = searchBlockIndex;\n\n        for (var bi = firstInputAtRight; bi < this._blocks.length; ++bi) {\n          var blockAtRight = this._blocks[bi];\n\n          var _blockInputPos = blockAtRight.nearestInputPos(0, DIRECTION.NONE);\n\n          if (!blockAtRight.value.length || _blockInputPos !== blockAtRight.value.length) {\n            return this._blockStartPos(bi) + _blockInputPos;\n          }\n        } // <-\n        // find first non-fixed symbol\n\n\n        for (var _bi = searchBlockIndex - 1; _bi >= 0; --_bi) {\n          var _block3 = this._blocks[_bi];\n\n          var _blockInputPos2 = _block3.nearestInputPos(0, DIRECTION.NONE); // is input\n\n\n          if (!_block3.value.length || _blockInputPos2 !== _block3.value.length) {\n            return this._blockStartPos(_bi) + _block3.value.length;\n          }\n        }\n\n        return cursorPos;\n      }\n\n      if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n        // -\n        //  any|filled-input\n        // <-\n        //  any|first not empty is not-len-aligned\n        //  not-0-aligned|any\n        // ->\n        //  any|not-len-aligned or end\n        // check if first block at right is filled input\n        var firstFilledBlockIndexAtRight;\n\n        for (var _bi2 = searchBlockIndex; _bi2 < this._blocks.length; ++_bi2) {\n          if (this._blocks[_bi2].value) {\n            firstFilledBlockIndexAtRight = _bi2;\n            break;\n          }\n        }\n\n        if (firstFilledBlockIndexAtRight != null) {\n          var filledBlock = this._blocks[firstFilledBlockIndexAtRight];\n\n          var _blockInputPos3 = filledBlock.nearestInputPos(0, DIRECTION.RIGHT);\n\n          if (_blockInputPos3 === 0 && filledBlock.unmaskedValue.length) {\n            // filled block is input\n            return this._blockStartPos(firstFilledBlockIndexAtRight) + _blockInputPos3;\n          }\n        } // <-\n        // find this vars\n\n\n        var firstFilledInputBlockIndex = -1;\n        var firstEmptyInputBlockIndex; // TODO consider nested empty inputs\n\n        for (var _bi3 = searchBlockIndex - 1; _bi3 >= 0; --_bi3) {\n          var _block4 = this._blocks[_bi3];\n\n          var _blockInputPos4 = _block4.nearestInputPos(_block4.value.length, DIRECTION.FORCE_LEFT);\n\n          if (!_block4.value || _blockInputPos4 !== 0) firstEmptyInputBlockIndex = _bi3;\n\n          if (_blockInputPos4 !== 0) {\n            if (_blockInputPos4 !== _block4.value.length) {\n              // aligned inside block - return immediately\n              return this._blockStartPos(_bi3) + _blockInputPos4;\n            } else {\n              // found filled\n              firstFilledInputBlockIndex = _bi3;\n              break;\n            }\n          }\n        }\n\n        if (direction === DIRECTION.LEFT) {\n          // try find first empty input before start searching position only when not forced\n          for (var _bi4 = firstFilledInputBlockIndex + 1; _bi4 <= Math.min(searchBlockIndex, this._blocks.length - 1); ++_bi4) {\n            var _block5 = this._blocks[_bi4];\n\n            var _blockInputPos5 = _block5.nearestInputPos(0, DIRECTION.NONE);\n\n            var blockAlignedPos = this._blockStartPos(_bi4) + _blockInputPos5;\n\n            if (blockAlignedPos > cursorPos) break; // if block is not lazy input\n\n            if (_blockInputPos5 !== _block5.value.length) return blockAlignedPos;\n          }\n        } // process overflow\n\n\n        if (firstFilledInputBlockIndex >= 0) {\n          return this._blockStartPos(firstFilledInputBlockIndex) + this._blocks[firstFilledInputBlockIndex].value.length;\n        } // for lazy if has aligned left inside fixed and has came to the start - use start position\n\n\n        if (direction === DIRECTION.FORCE_LEFT || this.lazy && !this.extractInput() && !isInput(this._blocks[searchBlockIndex])) {\n          return 0;\n        }\n\n        if (firstEmptyInputBlockIndex != null) {\n          return this._blockStartPos(firstEmptyInputBlockIndex);\n        } // find first input\n\n\n        for (var _bi5 = searchBlockIndex; _bi5 < this._blocks.length; ++_bi5) {\n          var _block6 = this._blocks[_bi5];\n\n          var _blockInputPos6 = _block6.nearestInputPos(0, DIRECTION.NONE); // is input\n\n\n          if (!_block6.value.length || _blockInputPos6 !== _block6.value.length) {\n            return this._blockStartPos(_bi5) + _blockInputPos6;\n          }\n        }\n\n        return 0;\n      }\n\n      if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n        // ->\n        //  any|not-len-aligned and filled\n        //  any|not-len-aligned\n        // <-\n        //  not-0-aligned or start|any\n        var firstInputBlockAlignedIndex;\n        var firstInputBlockAlignedPos;\n\n        for (var _bi6 = searchBlockIndex; _bi6 < this._blocks.length; ++_bi6) {\n          var _block7 = this._blocks[_bi6];\n\n          var _blockInputPos7 = _block7.nearestInputPos(0, DIRECTION.NONE);\n\n          if (_blockInputPos7 !== _block7.value.length) {\n            firstInputBlockAlignedPos = this._blockStartPos(_bi6) + _blockInputPos7;\n            firstInputBlockAlignedIndex = _bi6;\n            break;\n          }\n        }\n\n        if (firstInputBlockAlignedIndex != null && firstInputBlockAlignedPos != null) {\n          for (var _bi7 = firstInputBlockAlignedIndex; _bi7 < this._blocks.length; ++_bi7) {\n            var _block8 = this._blocks[_bi7];\n\n            var _blockInputPos8 = _block8.nearestInputPos(0, DIRECTION.FORCE_RIGHT);\n\n            if (_blockInputPos8 !== _block8.value.length) {\n              return this._blockStartPos(_bi7) + _blockInputPos8;\n            }\n          }\n\n          return direction === DIRECTION.FORCE_RIGHT ? this.value.length : firstInputBlockAlignedPos;\n        }\n\n        for (var _bi8 = Math.min(searchBlockIndex, this._blocks.length - 1); _bi8 >= 0; --_bi8) {\n          var _block9 = this._blocks[_bi8];\n\n          var _blockInputPos9 = _block9.nearestInputPos(_block9.value.length, DIRECTION.LEFT);\n\n          if (_blockInputPos9 !== 0) {\n            var alignedPos = this._blockStartPos(_bi8) + _blockInputPos9;\n\n            if (alignedPos >= cursorPos) return alignedPos;\n            break;\n          }\n        }\n      }\n\n      return cursorPos;\n    }\n    /** Get block by name */\n\n  }, {\n    key: \"maskedBlock\",\n    value: function maskedBlock(name) {\n      return this.maskedBlocks(name)[0];\n    }\n    /** Get all blocks by name */\n\n  }, {\n    key: \"maskedBlocks\",\n    value: function maskedBlocks(name) {\n      var _this4 = this;\n\n      var indices = this._maskedBlocks[name];\n      if (!indices) return [];\n      return indices.map(function (gi) {\n        return _this4._blocks[gi];\n      });\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return Object.assign({}, _get(_getPrototypeOf(MaskedPattern.prototype), \"state\", this), {\n        _blocks: this._blocks.map(function (b) {\n          return b.state;\n        })\n      });\n    },\n    set: function set(state) {\n      var _blocks = state._blocks,\n          maskedState = _objectWithoutProperties$1(state, [\"_blocks\"]);\n\n      this._blocks.forEach(function (b, bi) {\n        return b.state = _blocks[bi];\n      });\n\n      _set(_getPrototypeOf(MaskedPattern.prototype), \"state\", maskedState, this, true);\n    }\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return this._blocks.every(function (b) {\n        return b.isComplete;\n      });\n    }\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this._blocks.reduce(function (str, b) {\n        return str += b.unmaskedValue;\n      }, '');\n    },\n    set: function set(unmaskedValue) {\n      _set(_getPrototypeOf(MaskedPattern.prototype), \"unmaskedValue\", unmaskedValue, this, true);\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      // TODO return _value when not in change?\n      return this._blocks.reduce(function (str, b) {\n        return str += b.value;\n      }, '');\n    },\n    set: function set(value) {\n      _set(_getPrototypeOf(MaskedPattern.prototype), \"value\", value, this, true);\n    }\n  }]);\n\n  return MaskedPattern;\n}(Masked);\nMaskedPattern.DEFAULTS = {\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\n\nfunction isInput(block) {\n  if (!block) return false;\n  var value = block.value;\n  return !value || block.nearestInputPos(0, DIRECTION.NONE) !== value.length;\n}\n\nIMask.MaskedPattern = MaskedPattern;\n\n/** Pattern which accepts ranges */\n\nvar MaskedRange =\n/*#__PURE__*/\nfunction (_MaskedPattern) {\n  _inherits(MaskedRange, _MaskedPattern);\n\n  function MaskedRange() {\n    _classCallCheck(this, MaskedRange);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MaskedRange).apply(this, arguments));\n  }\n\n  _createClass(MaskedRange, [{\n    key: \"_update\",\n\n    /**\r\n      @override\r\n    */\n    value: function _update(opts) {\n      // TODO type\n      opts = Object.assign({\n        to: this.to || 0,\n        from: this.from || 0\n      }, opts);\n      var maxLength = String(opts.to).length;\n      if (opts.maxLength != null) maxLength = Math.max(maxLength, opts.maxLength);\n      opts.maxLength = maxLength;\n      var fromStr = String(opts.from).padStart(maxLength, '0');\n      var toStr = String(opts.to).padStart(maxLength, '0');\n      var sameCharsCount = 0;\n\n      while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) {\n        ++sameCharsCount;\n      }\n\n      opts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(maxLength - sameCharsCount);\n\n      _get(_getPrototypeOf(MaskedRange.prototype), \"_update\", this).call(this, opts);\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"boundaries\",\n    value: function boundaries(str) {\n      var minstr = '';\n      var maxstr = '';\n\n      var _ref = str.match(/^(\\D*)(\\d*)(\\D*)/) || [],\n          _ref2 = _slicedToArray(_ref, 3),\n          placeholder = _ref2[1],\n          num = _ref2[2];\n\n      if (num) {\n        minstr = '0'.repeat(placeholder.length) + num;\n        maxstr = '9'.repeat(placeholder.length) + num;\n      }\n\n      minstr = minstr.padEnd(this.maxLength, '0');\n      maxstr = maxstr.padEnd(this.maxLength, '9');\n      return [minstr, maxstr];\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"doPrepare\",\n    value: function doPrepare(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      str = _get(_getPrototypeOf(MaskedRange.prototype), \"doPrepare\", this).call(this, str, flags).replace(/\\D/g, '');\n      if (!this.autofix) return str;\n      var fromStr = String(this.from).padStart(this.maxLength, '0');\n      var toStr = String(this.to).padStart(this.maxLength, '0');\n      var val = this.value;\n      var prepStr = '';\n\n      for (var ci = 0; ci < str.length; ++ci) {\n        var nextVal = val + prepStr + str[ci];\n\n        var _this$boundaries = this.boundaries(nextVal),\n            _this$boundaries2 = _slicedToArray(_this$boundaries, 2),\n            minstr = _this$boundaries2[0],\n            maxstr = _this$boundaries2[1];\n\n        if (Number(maxstr) < this.from) prepStr += fromStr[nextVal.length - 1];else if (Number(minstr) > this.to) prepStr += toStr[nextVal.length - 1];else prepStr += str[ci];\n      }\n\n      return prepStr;\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _get2;\n\n      var str = this.value;\n      var firstNonZero = str.search(/[^0]/);\n      if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n\n      var _this$boundaries3 = this.boundaries(str),\n          _this$boundaries4 = _slicedToArray(_this$boundaries3, 2),\n          minstr = _this$boundaries4[0],\n          maxstr = _this$boundaries4[1];\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.from <= Number(maxstr) && Number(minstr) <= this.to && (_get2 = _get(_getPrototypeOf(MaskedRange.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args));\n    }\n  }, {\n    key: \"_matchFrom\",\n\n    /**\r\n      Optionally sets max length of pattern.\r\n      Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\r\n    */\n\n    /** Min bound */\n\n    /** Max bound */\n\n    /** */\n    get: function get() {\n      return this.maxLength - String(this.from).length;\n    }\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return _get(_getPrototypeOf(MaskedRange.prototype), \"isComplete\", this) && Boolean(this.value);\n    }\n  }]);\n\n  return MaskedRange;\n}(MaskedPattern);\nIMask.MaskedRange = MaskedRange;\n\n/** Date mask */\n\nvar MaskedDate =\n/*#__PURE__*/\nfunction (_MaskedPattern) {\n  _inherits(MaskedDate, _MaskedPattern);\n\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** */\n\n  /**\r\n    @param {Object} opts\r\n  */\n  function MaskedDate(opts) {\n    _classCallCheck(this, MaskedDate);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MaskedDate).call(this, Object.assign({}, MaskedDate.DEFAULTS, {}, opts)));\n  }\n  /**\r\n    @override\r\n  */\n\n\n  _createClass(MaskedDate, [{\n    key: \"_update\",\n    value: function _update(opts) {\n      if (opts.mask === Date) delete opts.mask;\n      if (opts.pattern) opts.mask = opts.pattern;\n      var blocks = opts.blocks;\n      opts.blocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS()); // adjust year block\n\n      if (opts.min) opts.blocks.Y.from = opts.min.getFullYear();\n      if (opts.max) opts.blocks.Y.to = opts.max.getFullYear();\n\n      if (opts.min && opts.max && opts.blocks.Y.from === opts.blocks.Y.to) {\n        opts.blocks.m.from = opts.min.getMonth() + 1;\n        opts.blocks.m.to = opts.max.getMonth() + 1;\n\n        if (opts.blocks.m.from === opts.blocks.m.to) {\n          opts.blocks.d.from = opts.min.getDate();\n          opts.blocks.d.to = opts.max.getDate();\n        }\n      }\n\n      Object.assign(opts.blocks, blocks); // add autofix\n\n      Object.keys(opts.blocks).forEach(function (bk) {\n        var b = opts.blocks[bk];\n        if (!('autofix' in b)) b.autofix = opts.autofix;\n      });\n\n      _get(_getPrototypeOf(MaskedDate.prototype), \"_update\", this).call(this, opts);\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _get2;\n\n      var date = this.date;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(MaskedDate.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args)) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n    }\n    /** Checks if date is exists */\n\n  }, {\n    key: \"isDateExist\",\n    value: function isDateExist(str) {\n      return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n    }\n    /** Parsed Date */\n\n  }, {\n    key: \"date\",\n    get: function get() {\n      return this.typedValue;\n    },\n    set: function set(date) {\n      this.typedValue = date;\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.isComplete ? _get(_getPrototypeOf(MaskedDate.prototype), \"typedValue\", this) : null;\n    },\n    set: function set(value) {\n      _set(_getPrototypeOf(MaskedDate.prototype), \"typedValue\", value, this, true);\n    }\n  }]);\n\n  return MaskedDate;\n}(MaskedPattern);\nMaskedDate.DEFAULTS = {\n  pattern: 'd{.}`m{.}`Y',\n  format: function format(date) {\n    var day = String(date.getDate()).padStart(2, '0');\n    var month = String(date.getMonth() + 1).padStart(2, '0');\n    var year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: function parse(str) {\n    var _str$split = str.split('.'),\n        _str$split2 = _slicedToArray(_str$split, 3),\n        day = _str$split2[0],\n        month = _str$split2[1],\n        year = _str$split2[2];\n\n    return new Date(year, month - 1, day);\n  }\n};\n\nMaskedDate.GET_DEFAULT_BLOCKS = function () {\n  return {\n    d: {\n      mask: MaskedRange,\n      from: 1,\n      to: 31,\n      maxLength: 2\n    },\n    m: {\n      mask: MaskedRange,\n      from: 1,\n      to: 12,\n      maxLength: 2\n    },\n    Y: {\n      mask: MaskedRange,\n      from: 1900,\n      to: 9999\n    }\n  };\n};\n\nIMask.MaskedDate = MaskedDate;\n\n/**\r\n  Generic element API to use with mask\r\n  @interface\r\n*/\nvar MaskElement =\n/*#__PURE__*/\nfunction () {\n  function MaskElement() {\n    _classCallCheck(this, MaskElement);\n  }\n\n  _createClass(MaskElement, [{\n    key: \"select\",\n\n    /** Safely sets element selection */\n    value: function select(start, end) {\n      if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n\n      try {\n        this._unsafeSelect(start, end);\n      } catch (e) {}\n    }\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"_unsafeSelect\",\n    value: function _unsafeSelect(start, end) {}\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"bindEvents\",\n\n    /** Should be overriden in subclasses */\n    value: function bindEvents(handlers) {}\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"unbindEvents\",\n    value: function unbindEvents() {}\n  }, {\n    key: \"selectionStart\",\n\n    /** */\n\n    /** */\n\n    /** */\n\n    /** Safely returns selection start */\n    get: function get() {\n      var start;\n\n      try {\n        start = this._unsafeSelectionStart;\n      } catch (e) {}\n\n      return start != null ? start : this.value.length;\n    }\n    /** Safely returns selection end */\n\n  }, {\n    key: \"selectionEnd\",\n    get: function get() {\n      var end;\n\n      try {\n        end = this._unsafeSelectionEnd;\n      } catch (e) {}\n\n      return end != null ? end : this.value.length;\n    }\n  }, {\n    key: \"isActive\",\n    get: function get() {\n      return false;\n    }\n  }]);\n\n  return MaskElement;\n}();\nIMask.MaskElement = MaskElement;\n\n/** Bridge between HTMLElement and {@link Masked} */\n\nvar HTMLMaskElement =\n/*#__PURE__*/\nfunction (_MaskElement) {\n  _inherits(HTMLMaskElement, _MaskElement);\n\n  /** Mapping between HTMLElement events and mask internal events */\n\n  /** HTMLElement to use mask on */\n\n  /**\r\n    @param {HTMLInputElement|HTMLTextAreaElement} input\r\n  */\n  function HTMLMaskElement(input) {\n    var _this;\n\n    _classCallCheck(this, HTMLMaskElement);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HTMLMaskElement).call(this));\n    _this.input = input;\n    _this._handlers = {};\n    return _this;\n  }\n  /** */\n  // $FlowFixMe https://github.com/facebook/flow/issues/2839\n\n\n  _createClass(HTMLMaskElement, [{\n    key: \"_unsafeSelect\",\n\n    /**\r\n      Sets HTMLElement selection\r\n      @override\r\n    */\n    value: function _unsafeSelect(start, end) {\n      this.input.setSelectionRange(start, end);\n    }\n    /**\r\n      HTMLElement value\r\n      @override\r\n    */\n\n  }, {\n    key: \"bindEvents\",\n\n    /**\r\n      Binds HTMLElement events to mask internal events\r\n      @override\r\n    */\n    value: function bindEvents(handlers) {\n      var _this2 = this;\n\n      Object.keys(handlers).forEach(function (event) {\n        return _this2._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]);\n      });\n    }\n    /**\r\n      Unbinds HTMLElement events to mask internal events\r\n      @override\r\n    */\n\n  }, {\n    key: \"unbindEvents\",\n    value: function unbindEvents() {\n      var _this3 = this;\n\n      Object.keys(this._handlers).forEach(function (event) {\n        return _this3._toggleEventHandler(event);\n      });\n    }\n    /** */\n\n  }, {\n    key: \"_toggleEventHandler\",\n    value: function _toggleEventHandler(event, handler) {\n      if (this._handlers[event]) {\n        this.input.removeEventListener(event, this._handlers[event]);\n        delete this._handlers[event];\n      }\n\n      if (handler) {\n        this.input.addEventListener(event, handler);\n        this._handlers[event] = handler;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.input.getRootNode ? this.input.getRootNode() : document;\n    }\n    /**\r\n      Is element in focus\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"isActive\",\n    get: function get() {\n      //$FlowFixMe\n      return this.input === this.rootElement.activeElement;\n    }\n    /**\r\n      Returns HTMLElement selection start\r\n      @override\r\n    */\n\n  }, {\n    key: \"_unsafeSelectionStart\",\n    get: function get() {\n      return this.input.selectionStart;\n    }\n    /**\r\n      Returns HTMLElement selection end\r\n      @override\r\n    */\n\n  }, {\n    key: \"_unsafeSelectionEnd\",\n    get: function get() {\n      return this.input.selectionEnd;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.input.value;\n    },\n    set: function set(value) {\n      this.input.value = value;\n    }\n  }]);\n\n  return HTMLMaskElement;\n}(MaskElement);\nHTMLMaskElement.EVENTS_MAP = {\n  selectionChange: 'keydown',\n  input: 'input',\n  drop: 'drop',\n  click: 'click',\n  focus: 'focus',\n  commit: 'blur'\n};\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nvar HTMLContenteditableMaskElement =\n/*#__PURE__*/\nfunction (_HTMLMaskElement) {\n  _inherits(HTMLContenteditableMaskElement, _HTMLMaskElement);\n\n  function HTMLContenteditableMaskElement() {\n    _classCallCheck(this, HTMLContenteditableMaskElement);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(HTMLContenteditableMaskElement).apply(this, arguments));\n  }\n\n  _createClass(HTMLContenteditableMaskElement, [{\n    key: \"_unsafeSelect\",\n\n    /**\r\n      Sets HTMLElement selection\r\n      @override\r\n    */\n    value: function _unsafeSelect(start, end) {\n      if (!this.rootElement.createRange) return;\n      var range = this.rootElement.createRange();\n      range.setStart(this.input.firstChild || this.input, start);\n      range.setEnd(this.input.lastChild || this.input, end);\n      var root = this.rootElement;\n      var selection = root.getSelection && root.getSelection();\n\n      if (selection) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n    /**\r\n      HTMLElement value\r\n      @override\r\n    */\n\n  }, {\n    key: \"_unsafeSelectionStart\",\n\n    /**\r\n      Returns HTMLElement selection start\r\n      @override\r\n    */\n    get: function get() {\n      var root = this.rootElement;\n      var selection = root.getSelection && root.getSelection();\n      return selection && selection.anchorOffset;\n    }\n    /**\r\n      Returns HTMLElement selection end\r\n      @override\r\n    */\n\n  }, {\n    key: \"_unsafeSelectionEnd\",\n    get: function get() {\n      var root = this.rootElement;\n      var selection = root.getSelection && root.getSelection();\n      return selection && this._unsafeSelectionStart + String(selection).length;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      // $FlowFixMe\n      return this.input.textContent;\n    },\n    set: function set(value) {\n      this.input.textContent = value;\n    }\n  }]);\n\n  return HTMLContenteditableMaskElement;\n}(HTMLMaskElement);\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\n/** Listens to element events and controls changes between element and {@link Masked} */\n\nvar InputMask =\n/*#__PURE__*/\nfunction () {\n  /**\r\n    View element\r\n    @readonly\r\n  */\n\n  /**\r\n    Internal {@link Masked} model\r\n    @readonly\r\n  */\n\n  /**\r\n    @param {MaskElement|HTMLInputElement|HTMLTextAreaElement} el\r\n    @param {Object} opts\r\n  */\n  function InputMask(el, opts) {\n    _classCallCheck(this, InputMask);\n\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n\n    this._bindEvents(); // refresh\n\n\n    this.updateValue();\n\n    this._onChange();\n  }\n  /** Read or update mask */\n\n\n  _createClass(InputMask, [{\n    key: \"maskEquals\",\n    value: function maskEquals(mask) {\n      return mask == null || mask === this.masked.mask || mask === Date && this.masked instanceof MaskedDate;\n    }\n  }, {\n    key: \"_bindEvents\",\n\n    /**\r\n      Starts listening to element events\r\n      @protected\r\n    */\n    value: function _bindEvents() {\n      this.el.bindEvents({\n        selectionChange: this._saveSelection,\n        input: this._onInput,\n        drop: this._onDrop,\n        click: this._onClick,\n        focus: this._onFocus,\n        commit: this._onChange\n      });\n    }\n    /**\r\n      Stops listening to element events\r\n      @protected\r\n     */\n\n  }, {\n    key: \"_unbindEvents\",\n    value: function _unbindEvents() {\n      if (this.el) this.el.unbindEvents();\n    }\n    /**\r\n      Fires custom event\r\n      @protected\r\n     */\n\n  }, {\n    key: \"_fireEvent\",\n    value: function _fireEvent(ev) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var listeners = this._listeners[ev];\n      if (!listeners) return;\n      listeners.forEach(function (l) {\n        return l.apply(void 0, args);\n      });\n    }\n    /**\r\n      Current selection start\r\n      @readonly\r\n    */\n\n  }, {\n    key: \"_saveSelection\",\n\n    /**\r\n      Stores current selection\r\n      @protected\r\n    */\n    value: function _saveSelection()\n    /* ev */\n    {\n      if (this.value !== this.el.value) {\n        console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n      }\n\n      this._selection = {\n        start: this.selectionStart,\n        end: this.cursorPos\n      };\n    }\n    /** Syncronizes model value from view */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue() {\n      this.masked.value = this.el.value;\n      this._value = this.masked.value;\n    }\n    /** Syncronizes view from model value, fires change events */\n\n  }, {\n    key: \"updateControl\",\n    value: function updateControl() {\n      var newUnmaskedValue = this.masked.unmaskedValue;\n      var newValue = this.masked.value;\n      var isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;\n      this._unmaskedValue = newUnmaskedValue;\n      this._value = newValue;\n      if (this.el.value !== newValue) this.el.value = newValue;\n      if (isChanged) this._fireChangeEvents();\n    }\n    /** Updates options with deep equal check, recreates @{link Masked} model if mask type changes */\n\n  }, {\n    key: \"updateOptions\",\n    value: function updateOptions(opts) {\n      var mask = opts.mask,\n          restOpts = _objectWithoutProperties$1(opts, [\"mask\"]);\n\n      var updateMask = !this.maskEquals(mask);\n      var updateOpts = !objectIncludes(this.masked, restOpts);\n      if (updateMask) this.mask = mask;\n      if (updateOpts) this.masked.updateOptions(restOpts);\n      if (updateMask || updateOpts) this.updateControl();\n    }\n    /** Updates cursor */\n\n  }, {\n    key: \"updateCursor\",\n    value: function updateCursor(cursorPos) {\n      if (cursorPos == null) return;\n      this.cursorPos = cursorPos; // also queue change cursor for mobile browsers\n\n      this._delayUpdateCursor(cursorPos);\n    }\n    /**\r\n      Delays cursor update to support mobile browsers\r\n      @private\r\n    */\n\n  }, {\n    key: \"_delayUpdateCursor\",\n    value: function _delayUpdateCursor(cursorPos) {\n      var _this = this;\n\n      this._abortUpdateCursor();\n\n      this._changingCursorPos = cursorPos;\n      this._cursorChanging = setTimeout(function () {\n        if (!_this.el) return; // if was destroyed\n\n        _this.cursorPos = _this._changingCursorPos;\n\n        _this._abortUpdateCursor();\n      }, 10);\n    }\n    /**\r\n      Fires custom events\r\n      @protected\r\n    */\n\n  }, {\n    key: \"_fireChangeEvents\",\n    value: function _fireChangeEvents() {\n      this._fireEvent('accept', this._inputEvent);\n\n      if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n    }\n    /**\r\n      Aborts delayed cursor update\r\n      @private\r\n    */\n\n  }, {\n    key: \"_abortUpdateCursor\",\n    value: function _abortUpdateCursor() {\n      if (this._cursorChanging) {\n        clearTimeout(this._cursorChanging);\n        delete this._cursorChanging;\n      }\n    }\n    /** Aligns cursor to nearest available position */\n\n  }, {\n    key: \"alignCursor\",\n    value: function alignCursor() {\n      this.cursorPos = this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT);\n    }\n    /** Aligns cursor only if selection is empty */\n\n  }, {\n    key: \"alignCursorFriendly\",\n    value: function alignCursorFriendly() {\n      if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n\n      this.alignCursor();\n    }\n    /** Adds listener on custom event */\n\n  }, {\n    key: \"on\",\n    value: function on(ev, handler) {\n      if (!this._listeners[ev]) this._listeners[ev] = [];\n\n      this._listeners[ev].push(handler);\n\n      return this;\n    }\n    /** Removes custom event listener */\n\n  }, {\n    key: \"off\",\n    value: function off(ev, handler) {\n      if (!this._listeners[ev]) return this;\n\n      if (!handler) {\n        delete this._listeners[ev];\n        return this;\n      }\n\n      var hIndex = this._listeners[ev].indexOf(handler);\n\n      if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n      return this;\n    }\n    /** Handles view input event */\n\n  }, {\n    key: \"_onInput\",\n    value: function _onInput(e) {\n      this._inputEvent = e;\n\n      this._abortUpdateCursor(); // fix strange IE behavior\n\n\n      if (!this._selection) return this.updateValue();\n      var details = new ActionDetails( // new state\n      this.el.value, this.cursorPos, // old state\n      this.value, this._selection);\n      var oldRawValue = this.masked.rawInputValue;\n      var offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection).offset; // force align in remove direction only if no input chars were removed\n      // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n\n      var removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n      var cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n      this.updateControl();\n      this.updateCursor(cursorPos);\n      delete this._inputEvent;\n    }\n    /** Handles view change event and commits model value */\n\n  }, {\n    key: \"_onChange\",\n    value: function _onChange() {\n      if (this.value !== this.el.value) {\n        this.updateValue();\n      }\n\n      this.masked.doCommit();\n      this.updateControl();\n\n      this._saveSelection();\n    }\n    /** Handles view drop event, prevents by default */\n\n  }, {\n    key: \"_onDrop\",\n    value: function _onDrop(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    /** Restore last selection on focus */\n\n  }, {\n    key: \"_onFocus\",\n    value: function _onFocus(ev) {\n      this.alignCursorFriendly();\n    }\n    /** Restore last selection on focus */\n\n  }, {\n    key: \"_onClick\",\n    value: function _onClick(ev) {\n      this.alignCursorFriendly();\n    }\n    /** Unbind view events and removes element reference */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._unbindEvents(); // $FlowFixMe why not do so?\n\n\n      this._listeners.length = 0; // $FlowFixMe\n\n      delete this.el;\n    }\n  }, {\n    key: \"mask\",\n    get: function get() {\n      return this.masked.mask;\n    },\n    set: function set(mask) {\n      if (this.maskEquals(mask)) return;\n\n      if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n        this.masked.updateOptions({\n          mask: mask\n        });\n        return;\n      }\n\n      var masked = createMask({\n        mask: mask\n      });\n      masked.unmaskedValue = this.masked.unmaskedValue;\n      this.masked = masked;\n    }\n    /** Raw value */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    },\n    set: function set(str) {\n      this.masked.value = str;\n      this.updateControl();\n      this.alignCursor();\n    }\n    /** Unmasked value */\n\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this._unmaskedValue;\n    },\n    set: function set(str) {\n      this.masked.unmaskedValue = str;\n      this.updateControl();\n      this.alignCursor();\n    }\n    /** Typed unmasked value */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.masked.typedValue;\n    },\n    set: function set(val) {\n      this.masked.typedValue = val;\n      this.updateControl();\n      this.alignCursor();\n    }\n  }, {\n    key: \"selectionStart\",\n    get: function get() {\n      return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n    }\n    /** Current cursor position */\n\n  }, {\n    key: \"cursorPos\",\n    get: function get() {\n      return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n    },\n    set: function set(pos) {\n      if (!this.el || !this.el.isActive) return;\n      this.el.select(pos, pos);\n\n      this._saveSelection();\n    }\n  }]);\n\n  return InputMask;\n}();\nIMask.InputMask = InputMask;\n\n/** Pattern which validates enum values */\n\nvar MaskedEnum =\n/*#__PURE__*/\nfunction (_MaskedPattern) {\n  _inherits(MaskedEnum, _MaskedPattern);\n\n  function MaskedEnum() {\n    _classCallCheck(this, MaskedEnum);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MaskedEnum).apply(this, arguments));\n  }\n\n  _createClass(MaskedEnum, [{\n    key: \"_update\",\n\n    /**\r\n      @override\r\n      @param {Object} opts\r\n    */\n    value: function _update(opts) {\n      // TODO type\n      if (opts.enum) opts.mask = '*'.repeat(opts.enum[0].length);\n\n      _get(_getPrototypeOf(MaskedEnum.prototype), \"_update\", this).call(this, opts);\n    }\n    /**\r\n      @override\r\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _this = this,\n          _get2;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.enum.some(function (e) {\n        return e.indexOf(_this.unmaskedValue) >= 0;\n      }) && (_get2 = _get(_getPrototypeOf(MaskedEnum.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args));\n    }\n  }]);\n\n  return MaskedEnum;\n}(MaskedPattern);\nIMask.MaskedEnum = MaskedEnum;\n\nvar DEGREE_CHAR = '';\nvar MINUTE_CHAR = '';\nvar SECOND_CHAR = '';\nvar SPACER_CHAR = ' ';\nvar PLACEHOLDER_CHAR = '_';\nvar DOT = '.';\nvar SEPARATOR = ':';\n\n// @ts-check\n\n/**\n * Latitude/Longitude as Degrees, Minutes, Seconds\n * Ref: https://regexr.com/3qgn3\n *\n * Range check for minutes and seconds (0-59)\n * Max latitude 90:00:00, Max longitude 180:00:00\n *\n * Matches:\n * 90:00:00N 180:00:00E | 34:59:33S 179:59:59W | 00:00:00N 000:00:00W\n * 34:59:33.123S 179:59:59.999W | 90:00:00.000N 180:00:00.000E\n * 45:06:42:N:034:56:46:E (normalized format)\n *\n * Non-matches:\n * 91:00:00N 181:00:00E | 34:59:33Z 179:59:59W | 00:00:00N 181:00:00W\n * 90:00:00.001N 180:00:00.001E\n *\n * Groups:\n * [1] 90:00:00.000\n * [2] N\n * [3] 180:00:00.000\n * [4] E\n */\nvar RE_DMS = /^((?:\\d|[0-8][0-9])(?::(?:[0-5]\\d|\\d))(?::(?:[0-5]\\d|\\d)(?:\\.\\d{1,3})?)|90(?::00)(?::00)(?:\\.0{1,3})?)(?:\\s|:)?([NS])(?:\\s|:)?((?:0?\\d\\d|0?0?\\d|1[0-7]\\d)(?::(?:[0-5]\\d|\\d))(?::(?:[0-5]\\d|\\d)(?:\\.\\d{1,3})?)|180(?::00)(?::00)(?:\\.0{1,3})?)(?:\\s|:)?([EW])$/;\n/**\n * Latitude/Longitude as Decimal Degrees\n * Ref: https://regexr.com/3ql84\n *\n * Latitude Matches:\n * 90 | -90 | 90.0 | 0 | 0.0 | 10.123456\n *\n * Longitude Matches:\n * 180 | -180 | 180.0 | 123.000000\n */\n\nvar DD_LAT = '-?(?:90(?:(?:\\\\.0{1,6})?)|(?:[0-9]|[1-8][0-9])(?:(?:\\\\.[0-9]{1,6})?))';\nvar DD_LON = '-?(?:180(?:(?:\\\\.0{1,6})?)|(?:[0-9]|[0-9][0-9]|1[0-7][0-9])(?:(?:\\\\.[0-9]{1,6})?))';\n\nvar RE_DD = new RegExp(\"^(\".concat(DD_LAT, \"),\\\\s?(\").concat(DD_LON, \"$)\"));\n\n// @ts-check\n/**\n * fill\n *\n * Fills an array with the provided value X number of times\n *\n * @param {any[]} arr Array to fill\n * @param {any} value Value to push to the array\n * @param {number} count Number of items to add\n * @returns {any[]} Array filled with values\n */\n\nfunction fill(arr, value, count) {\n  for (var i = 0; i < count; i++) {\n    arr.push(value);\n  }\n\n  return arr;\n}\n/**\n * normalizeInput\n *\n * Returns a normalized DMS input value\n *\n * @param {string} value Input value\n * @param {string} [sep] Value separator\n * @returns {string} Normalized value\n */\n\nfunction normalizeInput(value) {\n  var sep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : SEPARATOR;\n  return (value === null || value === void 0 ? void 0 : value.replace(/[^0-9.NSEW]/gi, sep).replace(/:{2,}/g, sep)) || '';\n}\n/**\n * convertInput\n *\n * Converts a DD string into a DMS string\n *\n * @param {string} value Input value\n * @param {number} precision DMS decimal places\n *  @param {string} [sep] Value separator\n * @returns {string} Normalized DMS string\n */\n\nfunction convertInput(value, precision) {\n  var sep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : SEPARATOR;\n\n  if (validateDD(value)) {\n    var dd = value.split(',');\n    var lat = parseFloat(dd[0]);\n    var lon = parseFloat(dd[1]);\n    var latArr = decimalToDMS(lat, false, precision);\n    var lonArr = decimalToDMS(lon, true, precision);\n    value = serializeDMS(latArr, lonArr, sep);\n  }\n\n  return value || '';\n}\n/**\n * validateDD\n *\n * Returns true if the provided value is a valid DD string\n *\n * @param {string} value Input value\n * @returns {boolean} Is valid DD?\n */\n\nfunction validateDD(value) {\n  return RE_DD.test(value);\n}\n/**\n * Returns true if the provided value is a valid (normalized) DMS string\n *\n * @param {string} value Input value\n * @returns {boolean} Is valid DMS?\n */\n\nfunction validateDMS(value) {\n  return RE_DMS.test(value);\n}\n/**\n * parseDMS\n *\n * Parses a DMS string into an array of lat/lon arrays\n *\n * @param {string} value DMS value, e.g. '04:08:15:N:162:03:42:E'\n * @param {string} [sep] Separator\n * @returns {((string|number)[])[]} [[D, M, S, 'N|S'], [D, M, S, 'E|W']]\n */\n\nfunction parseDMS(value) {\n  var sep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : SEPARATOR;\n  var match = value.match(RE_DMS).slice(1);\n  var lat = match[0].split(sep).map(function (n) {\n    return parseFloat(n);\n  });\n  var lon = match[2].split(sep).map(function (n) {\n    return parseFloat(n);\n  });\n  return [[lat[0], lat[1], lat[2], match[1]], [lon[0], lon[1], lon[2], match[3]]];\n}\n/**\n * serializeDMS\n *\n * Serializes DMS lat/lon arrays into a normalized DMS string\n *\n * @param {(string|number)[]} lat DMS latitude, e.g. [4, 8, 15, 'N']\n * @param {(string|number)[]} lon DMS longitude, e.g. [162, 3, 42, 'E']\n * @param {string} [sep] Separator\n * @returns {string}\n * @example `04:08:15:N:162:03:42:E`\n */\n\nfunction serializeDMS(lat, lon) {\n  var sep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : SEPARATOR;\n  var res = [];\n  res[0] = lat.map(function (item) {\n    return item.toString().replace(/^(\\d)(\\.\\d+)?$/, '0$1$2');\n  }).join(sep);\n  res[1] = lon.map(function (item, i) {\n    return i === 0 ? item.toString().replace(/^(\\d)$/, '00$1').replace(/^(\\d\\d)$/, '0$1') : item.toString().replace(/^(\\d)(\\.\\d+)?$/, '0$1$2');\n  }).join(sep);\n  return res.join(sep);\n}\n/**\n * dmsToDecimal\n *\n * Converts Degrees Minutes Seconds to Decimal Degrees\n *\n * Formula:\n * DD = D + M / 60 + S / 3600\n *\n * @param {number} degrees\n * @param {number} minutes\n * @param {number} seconds\n * @param {string} direction Compass direction, e.g. N|S|E|W\n * @param {number} [precision]  Decimal places (default: 6)\n * @returns {number} Decimal degrees, e.g. 42.451\n */\n\nfunction dmsToDecimal(degrees, minutes, seconds, direction) {\n  var precision = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 6;\n  var factor = Math.pow(10, precision);\n  var dd = degrees + minutes / 60 + seconds / 3600; // Round the result to the given precision\n\n  dd = Math.round(dd * factor) / factor; // If direction is South or West then value is negative\n\n  return /S|W/.test(direction) ? dd * -1 : dd;\n}\n/**\n * decimalToDMS\n *\n * Converts Decimal Degress to Degrees Minutes Seconds\n *\n * @param {number} dd Decimal degree value\n * @param {boolean} isLon Is longitude?\n * @param {number} [precision] Decimal places for seconds (default: 0)\n * @returns {(string|number)[]} DMS values, e.g. [D, M, S, 'N|S|E|W']\n */\n\nfunction decimalToDMS(dd, isLon) {\n  var precision = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var factor = Math.pow(10, precision);\n  var direction = dd < 0 ? isLon ? 'W' : 'S' : isLon ? 'E' : 'N'; // Ensure degrees is a positive value\n\n  var absolute = Math.abs(dd);\n  var degrees = Math.floor(absolute);\n  var minutesFloat = (absolute - degrees) * 60;\n  var minutes = Math.floor(minutesFloat);\n  var seconds = (minutesFloat - minutes) * 60; // Round seconds to the given precision\n\n  seconds = Math.round(seconds * factor) / factor; // Ensure minutes & seconds are not 60\n\n  if (seconds === 60) {\n    minutes++;\n    seconds = 0;\n  }\n\n  if (minutes === 60) {\n    degrees++;\n    minutes = 0;\n  }\n\n  return [degrees, minutes, seconds, direction];\n}\n\n// @ts-check\n/**\n * If latitude degrees is 90 or longitude degrees is 180\n * then ensure minutes & seconds are not greater than 0.\n *\n * @param {boolean} isLon\n * @param {number} precision\n * @returns {function}\n */\n\nvar minSecValidate = function minSecValidate(isLon, precision) {\n  return function (value, _ref) {\n    var _blocks = _ref.parent._blocks;\n    var max = isLon ? 180 : 90; // If precision is provided it will change the array position for lon degrees\n\n    var pos = precision ? 13 : 11;\n    var parent = isLon ? _blocks[pos] : _blocks[0];\n    var degrees = Number(parent.value);\n    var seconds = Number(value); //console.log('validate', degrees, seconds, parent, _blocks)\n\n    return !(degrees === max && seconds > 0);\n  };\n};\n\nvar getDegreeMask = function getDegreeMask(isLon) {\n  return {\n    mask: MaskedRange,\n    from: 0,\n    to: isLon ? 180 : 90\n  };\n};\n\nvar getMinuteMask = function getMinuteMask(isLon, precision) {\n  return {\n    mask: MaskedRange,\n    from: 0,\n    to: 59,\n    validate: minSecValidate(isLon, precision)\n  };\n};\n\nvar getSecondMask = function getSecondMask(isLon, precision) {\n  return {\n    mask: MaskedRange,\n    from: 0,\n    to: 59,\n    validate: minSecValidate(isLon, precision)\n  };\n};\n\nvar getArcSecondMask = function getArcSecondMask(precision) {\n  return {\n    mask: MaskedRange,\n    from: 0,\n    to: Number(fill([], 9, precision).join(''))\n  };\n};\n\nvar getDirectionMask = function getDirectionMask(isLon) {\n  return {\n    mask: MaskedEnum,\n    \"enum\": isLon ? ['E', 'W'] : ['N', 'S'],\n    prepare: function prepare(str) {\n      return str.toUpperCase();\n    }\n  };\n};\n/**\n * createMask\n *\n * Returns an input mask using the provided symbols\n *\n * @param {Object} [options] Mask options\n * @property {string} [degreeChar] Degrees symbol, e.g. ``\n * @property {string} [minuteChar] Minutes symbol, e.g. ``\n * @property {string} [secondChar] Seconds symbol, e.g. ``\n * @property {string} [spacerChar] Spacer character, e.g. ` `\n * @property {string} [placeholderChar] Placeholder character, e.g. `_`\n * @property {number} [dmsPrecision] Second decimal places [0-6]\n */\n\n\nvar createMask$1 = function createMask() {\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref2$degreeChar = _ref2.degreeChar,\n      degreeChar = _ref2$degreeChar === void 0 ? DEGREE_CHAR : _ref2$degreeChar,\n      _ref2$minuteChar = _ref2.minuteChar,\n      minuteChar = _ref2$minuteChar === void 0 ? MINUTE_CHAR : _ref2$minuteChar,\n      _ref2$secondChar = _ref2.secondChar,\n      secondChar = _ref2$secondChar === void 0 ? SECOND_CHAR : _ref2$secondChar,\n      _ref2$spacerChar = _ref2.spacerChar,\n      spacerChar = _ref2$spacerChar === void 0 ? SPACER_CHAR : _ref2$spacerChar,\n      _ref2$placeholderChar = _ref2.placeholderChar,\n      placeholderChar = _ref2$placeholderChar === void 0 ? PLACEHOLDER_CHAR : _ref2$placeholderChar,\n      _ref2$dmsPrecision = _ref2.dmsPrecision,\n      dmsPrecision = _ref2$dmsPrecision === void 0 ? 0 : _ref2$dmsPrecision;\n\n  var precision = dmsPrecision < 0 ? 0 : dmsPrecision > 6 ? 6 : dmsPrecision;\n  var mask = ['YD', 'DC', 'SPACER', 'YM', 'MC', 'SPACER', 'YS', 'SC', 'SPACER', 'NS', 'SPACER', 'XD', 'DC', 'SPACER', 'XM', 'MC', 'SPACER', 'XS', 'SC', 'SPACER', 'EW'];\n\n  if (precision > 0) {\n    mask.splice(7, 0, 'DOT');\n    mask.splice(8, 0, 'AS');\n    mask.splice(20, 0, 'DOT');\n    mask.splice(21, 0, 'AS');\n  } // @ts-ignore\n\n\n  return new MaskedPattern({\n    mask: mask.join(''),\n    placeholderChar: placeholderChar,\n    autofix: true,\n    overwrite: true,\n    // If placeholderChar is defined then set lazy to false,\n    // which will display the placeholder character.\n    lazy: placeholderChar === null,\n    blocks: {\n      DC: {\n        mask: degreeChar\n      },\n      MC: {\n        mask: minuteChar\n      },\n      SC: {\n        mask: secondChar\n      },\n      SPACER: {\n        mask: spacerChar\n      },\n      DOT: {\n        mask: DOT\n      },\n      AS: getArcSecondMask(precision),\n      YD: getDegreeMask(),\n      YM: getMinuteMask(),\n      YS: getSecondMask(),\n      NS: getDirectionMask(),\n      XD: getDegreeMask(true),\n      XM: getMinuteMask(true, precision),\n      XS: getSecondMask(true, precision),\n      EW: getDirectionMask(true)\n    }\n  });\n};\n\n/**\n * useCoordMask Hook\n *\n * @param {Object} options\n * @property {ref} inputRef Input ref\n * @property {string} controlledValue Input value\n * @property {string} [degreeChar] Degrees symbol, e.g. ``\n * @property {string} [minuteChar] Minutes symbol, e.g. ``\n * @property {string} [secondChar] Seconds symbol, e.g. ``\n * @property {string} [spacerChar] Spacer character, e.g. ` `\n * @property {string} [placeholderChar] Placeholder character, e.g. `_`\n * @property {number} [ddPrecision] Decimal places [0-8]\n * @property {number} [dmsPrecision] Decimal places [0-6]\n * @property {function} onChange onChange callback\n */\n\nvar useCoordMask = function useCoordMask(_ref) {\n  var inputRef = _ref.inputRef,\n      controlledValue = _ref.controlledValue,\n      degreeChar = _ref.degreeChar,\n      minuteChar = _ref.minuteChar,\n      secondChar = _ref.secondChar,\n      spacerChar = _ref.spacerChar,\n      placeholderChar = _ref.placeholderChar,\n      ddPrecision = _ref.ddPrecision,\n      dmsPrecision = _ref.dmsPrecision,\n      onChange = _ref.onChange;\n  var maskRef = useRef(null);\n  var mask = useMemo(function () {\n    return createMask$1({\n      degreeChar: degreeChar,\n      minuteChar: minuteChar,\n      secondChar: secondChar,\n      spacerChar: spacerChar,\n      placeholderChar: placeholderChar,\n      dmsPrecision: dmsPrecision\n    });\n  }, [degreeChar, minuteChar, secondChar, spacerChar, placeholderChar, dmsPrecision]);\n  var handleChange = useCallback(function (value, unmaskedValue) {\n    if (unmaskedValue.length) {\n      var normalized = normalizeInput(value);\n      var isValid = validateDMS(normalized); //console.log('handleChange', { value, unmaskedValue, isValid })\n\n      if (isValid) {\n        var dms = parseDMS(normalized); // @ts-ignore {https://github.com/Microsoft/TypeScript/pull/24897}\n\n        var lat = dmsToDecimal.apply(void 0, _toConsumableArray(dms[0]).concat([ddPrecision])); // @ts-ignore\n\n        var lon = dmsToDecimal.apply(void 0, _toConsumableArray(dms[1]).concat([ddPrecision])); // Callback with the original event and the converted values\n\n        onChange(value, {\n          unmaskedValue: unmaskedValue,\n          dd: [lat, lon],\n          dms: dms\n        });\n      }\n    } else {\n      onChange('', {\n        unmaskedValue: '',\n        dd: [],\n        dms: []\n      });\n    }\n  }, [ddPrecision, onChange]);\n  var initMask = useCallback(function (element, mask) {\n    maskRef.current = IMask(element, mask); //console.log('initMask', { mask })\n\n    maskRef.current.on('accept', function () {\n      var unmaskedValue = maskRef.current.unmaskedValue; //console.log('accept', unmaskedValue)\n\n      if (unmaskedValue === '') {\n        maskRef.current._fireEvent('complete');\n      }\n    });\n    maskRef.current.on('complete', function () {\n      var _maskRef$current = maskRef.current,\n          unmaskedValue = _maskRef$current.unmaskedValue,\n          value = _maskRef$current.value; //console.log('complete', value, unmaskedValue)\n\n      handleChange(value, unmaskedValue);\n    });\n  }, [handleChange]);\n  var setValue = useCallback(function (value) {\n    // Convert DD value to DMS\n    var dmsValue = convertInput(value, dmsPrecision, ''); // Resolve new masked value\n\n    mask.resolve(dmsValue); //console.log({ value, dmsValue })\n    // Syncronize view from model value & fire change events\n\n    maskRef.current.updateControl();\n  }, [dmsPrecision, mask]); // Initialize new IMask instance if it doesn't exist yet\n\n  useEffect(function () {\n    if (!maskRef.current) {\n      initMask(inputRef.current, mask);\n    }\n  }, [initMask, inputRef, mask]); // Update mask value when the input value changes\n\n  useEffect(function () {\n    var _inputRef$current;\n\n    //console.log('useEffect', { controlledValue })\n    if (maskRef.current && ((_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.value) !== controlledValue) {\n      setValue(controlledValue);\n    }\n  }, [controlledValue, inputRef, setValue]);\n};\n\n/**\n * CoordinateInput\n */\n\nvar CoordinateInput = function CoordinateInput(_ref) {\n  var degreeChar = _ref.degreeChar,\n      minuteChar = _ref.minuteChar,\n      secondChar = _ref.secondChar,\n      spacerChar = _ref.spacerChar,\n      placeholderChar = _ref.placeholderChar,\n      ddPrecision = _ref.ddPrecision,\n      dmsPrecision = _ref.dmsPrecision,\n      inputRef = _ref.inputRef,\n      _ref$placeholder = _ref.placeholder,\n      placeholder = _ref$placeholder === void 0 ? '04 08 15 N 162 03 42 E' : _ref$placeholder,\n      onChange = _ref.onChange,\n      controlledValue = _ref.value,\n      props = _objectWithoutProperties(_ref, [\"degreeChar\", \"minuteChar\", \"secondChar\", \"spacerChar\", \"placeholderChar\", \"ddPrecision\", \"dmsPrecision\", \"inputRef\", \"placeholder\", \"onChange\", \"value\"]);\n\n  var innerRef = useRef(null);\n  useCoordMask({\n    inputRef: innerRef,\n    controlledValue: controlledValue,\n    degreeChar: degreeChar,\n    minuteChar: minuteChar,\n    secondChar: secondChar,\n    spacerChar: spacerChar,\n    placeholderChar: placeholderChar,\n    ddPrecision: ddPrecision,\n    dmsPrecision: dmsPrecision,\n    onChange: onChange\n  });\n  useEffect(function () {\n    if (typeof inputRef === 'function') {\n      inputRef(innerRef.current);\n    }\n  }, [innerRef, inputRef]);\n  return /*#__PURE__*/React.createElement(\"input\", _extends({}, props, {\n    defaultValue: controlledValue,\n    placeholder: placeholder,\n    ref: innerRef,\n    type: \"text\"\n  }));\n};\n\nCoordinateInput.propTypes = {\n  degreeChar: PropTypes.string,\n  ddPrecision: PropTypes.number,\n  dmsPrecision: PropTypes.number,\n  minuteChar: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  placeholderChar: PropTypes.string,\n  inputRef: PropTypes.func,\n  secondChar: PropTypes.string,\n  spacerChar: PropTypes.string,\n  value: PropTypes.string\n};\n\nexport default CoordinateInput;\nexport { decimalToDMS, dmsToDecimal };\n","import React from 'react'\n\nconst repoName = 'nerdstep/react-coordinate-input'\nconst repoUrl = `https://github.com/${repoName}`\nconst tagImg = `https://flat.badgen.net/github/tag/${repoName}`\nconst forksImg = `https://flat.badgen.net/github/forks/${repoName}`\nconst starsImg = `https://flat.badgen.net/github/stars/${repoName}`\n\nconst Footer = () => (\n  <nav\n    className=\"breadcrumb has-bullet-separator is-centered\"\n    aria-label=\"breadcrumbs\"\n  >\n    <ul>\n      <li style={{ height: 24 }}>\n        <a href={repoUrl}>\n          <img src={tagImg} alt=\"GitHub latest tag\" />\n        </a>\n      </li>\n      <li>\n        <a href={repoUrl}>\n          <img src={forksImg} alt=\"GitHub forks\" />\n        </a>\n      </li>\n      <li>\n        <a href={repoUrl}>\n          <img src={starsImg} alt=\"GitHub stars\" />\n        </a>\n      </li>\n    </ul>\n  </nav>\n)\n\nexport default Footer\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport CoordinateInput from 'react-coordinate-input'\nimport Footer from './Footer'\n\nfunction fill(arr, value, count) {\n  for (let i = 0; i < count; i++) {\n    arr.push(value)\n  }\n  return arr\n}\n\nconst initialState = {\n  value: '',\n  unmaskedValue: '',\n  dd: [],\n  dms: [],\n}\n\nconst selectOptions = [\n  '90, -180',\n  '-90, 180',\n  '42.363, 27.891',\n  '42 27 00 N 067 06 00 W',\n  '040815N1620342E',\n  '23 16 07 S 127 00 00 E',\n]\n\nconst App = () => {\n  const [ddPrecision, setDDPrecision] = useState(6)\n  const [dmsPrecision, setDMSPrecision] = useState(0)\n  const [selected, setSelected] = useState('')\n  const [state, setState] = useState(initialState)\n  const inputRef = useRef()\n\n  const placeholder = useMemo(() => {\n    const p = '04 08 15.dec N 162 03 42.dec E'\n    let dec = ''\n    if (dmsPrecision > 0) {\n      dec = fill([], 0, dmsPrecision).join('')\n      dec = `.${dec}`\n    }\n    return p.replace(/\\.dec/g, dec)\n  }, [dmsPrecision])\n\n  const handleReset = useCallback(() => {\n    setState(initialState)\n    setSelected('')\n  }, [])\n\n  const handleChange = useCallback((value, props) => {\n    console.log('handleChange', { value, ...props })\n    setState({ value, ...props })\n  }, [])\n\n  const handleBlur = useCallback((e) => {\n    //console.log('handleBlur', e)\n  }, [])\n\n  const handleChangeDDPrecision = useCallback(\n    (e) => {\n      handleReset()\n      let value = parseInt(e.target.value, 10) || 0\n      value = value < 0 ? 0 : value > 8 ? 8 : value\n      setDDPrecision(value)\n    },\n    [handleReset]\n  )\n\n  const handleChangeDMSPrecision = useCallback(\n    (e) => {\n      handleReset()\n      let value = parseInt(e.target.value, 10) || 0\n      value = value < 0 ? 0 : value > 6 ? 6 : value\n      setDMSPrecision(value)\n    },\n    [handleReset]\n  )\n\n  const handleSelectChange = useCallback(({ target: { value } }) => {\n    setSelected(value)\n    setState({ value })\n  }, [])\n\n  useEffect(() => {\n    //console.log(inputRef.current.value)\n  }, [])\n\n  const output = {\n    ...state,\n    dms: JSON.stringify(state.dms),\n    dd: JSON.stringify(state.dd),\n  }\n\n  return (\n    <section className=\"hero is-fullheight has-background-light\">\n      <div className=\"hero-body\">\n        <div className=\"container\">\n          <div className=\"column is-8 is-offset-2\">\n            <h3 className=\"title has-text-grey has-text-centered\">\n              React Coordinate Input\n            </h3>\n            <div className=\"box\">\n              <div className=\"field\">\n                <label className=\"label\">Input - Degrees Minutes Seconds</label>\n                <div className=\"control\">\n                  <CoordinateInput\n                    aria-label=\"coordinate-input\"\n                    className=\"input\"\n                    dir=\"auto\"\n                    ddPrecision={ddPrecision}\n                    dmsPrecision={dmsPrecision}\n                    inputRef={(c) => (inputRef.current = c)}\n                    name=\"coordinate-input\"\n                    onBlur={handleBlur}\n                    onChange={handleChange}\n                    placeholder={placeholder}\n                    placeholderChar=\"_\"\n                    value={state.value}\n                  />\n                </div>\n                <p className=\"help\">Example: {placeholder}</p>\n              </div>\n              <div className=\"field is-grouped\">\n                <div className=\"control\">\n                  <div className=\"select\">\n                    <select\n                      disabled={dmsPrecision > 0}\n                      onChange={handleSelectChange}\n                      value={selected}\n                    >\n                      <option value=\"\">Set value...</option>\n                      {selectOptions.map((el, i) => (\n                        <option key={i}>{el}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div className=\"control\">\n                  <button className=\"button\" onClick={handleReset}>\n                    Reset\n                  </button>\n                </div>\n              </div>\n              <h5>Options</h5>\n              <div className=\"field\">\n                <label className=\"label is-small has-text-grey\">\n                  Decimal Places for Seconds (0-6)\n                </label>\n                <div className=\"control\">\n                  <input\n                    className=\"input\"\n                    onChange={handleChangeDMSPrecision}\n                    type=\"number\"\n                    value={dmsPrecision}\n                  />\n                </div>\n              </div>\n              <div className=\"field\">\n                <label className=\"label is-small has-text-grey\">\n                  Decimal Places for Decimal Degrees (0-8)\n                </label>\n                <div className=\"control\">\n                  <input\n                    className=\"input\"\n                    onChange={handleChangeDDPrecision}\n                    type=\"number\"\n                    value={ddPrecision}\n                  />\n                </div>\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">State</label>\n                <div className=\"control\">\n                  <pre>{JSON.stringify(output, null, 2)}</pre>\n                </div>\n              </div>\n            </div>\n            <Footer />\n          </div>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default App\n","import 'bulma/css/bulma.css'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}